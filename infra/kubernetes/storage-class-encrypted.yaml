# Encrypted Storage Class for Database Volumes
# This storage class enables encryption at rest for PersistentVolumes
#
# Usage:
#   kubectl apply -f storage-class-encrypted.yaml
#
# Note: The actual implementation depends on your cloud provider:
# - AWS EKS: Uses EBS encryption (encrypted: "true")
# - GCP GKE: Uses persistent disk encryption (encryptionKey: <key>)
# - Azure AKS: Uses managed disk encryption (encryptionAtHost: true)

apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: encrypted-ssd
  labels:
    app: fitvibe
    component: database
provisioner: kubernetes.io/aws-ebs # Change based on your cloud provider
parameters:
  type: gp3
  encrypted: "true" # Enable encryption at rest
  # For GCP, use: encryptionKey: projects/PROJECT_ID/locations/LOCATION/keyRings/KEY_RING/cryptoKeys/KEY_NAME
  # For Azure, encryption is enabled by default on managed disks
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
reclaimPolicy: Retain
