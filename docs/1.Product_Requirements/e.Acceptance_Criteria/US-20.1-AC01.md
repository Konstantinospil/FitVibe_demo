# US-20.1-AC01: Production SSL/TLS Configuration

---

**AC ID**: US-20.1-AC01  
**Story ID**: [US-20.1](../d.User_stories/US-20.1-database-ssl-tls-configuration.md)  
**Status**: Proposed  
**Priority**: High  
**Test Method**: Integration / Security  
**Created**: 2025-12-21  
**Updated**: 2025-12-21

---

## Criterion

All database connections in production use TLS 1.3 (minimum TLS 1.2) with certificate verification enabled (`rejectUnauthorized: true`). SSL mode is controlled via environment variables (`PGSSL=true`, `PGSSLMODE=require` or `verify-full`).

**SMART Criteria Checklist**:

- **Specific**: Production database connections use TLS 1.3/1.2 with certificate verification
- **Measurable**: SSL configuration verified via environment variables and connection logs
- **Achievable**: Standard PostgreSQL SSL configuration
- **Relevant**: Data protection in transit
- **Time-bound**: Applied immediately in production

## Test Method

Integration tests verify SSL connection establishment with certificate verification. Security audit confirms SSL configuration.

## Evidence Required

- SSL configuration in `db.config.ts` and `knexfile.ts`
- Environment variable documentation
- Integration test results showing SSL connection
- Security audit report confirming SSL configuration

## Verification

- [ ] Criterion is specific and measurable
- [ ] Test method is appropriate
- [ ] Evidence requirements are clear

## Related Artifacts

- **Story**: [US-20.1](../d.User_stories/US-20.1-database-ssl-tls-configuration.md)
- **Epic**: [E20](../b.Epics/E20-database-encryption.md)
- **Requirement**: [NFR-008](../a.Requirements/NFR-008-database-encryption.md)
- **PRD Reference**: PRD §Security, §Data Protection
- **TDD Reference**: TDD §3.4 (Backend Stack), §5.1 (Security)

---

**Last Updated**: 2025-12-21  
**Verified By**: {Name/Team}  
**Verified Date**: {YYYY-MM-DD}
