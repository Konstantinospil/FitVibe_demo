openapi: 3.0.3
info:
  title: FitVibe Feed & Community API
  version: 1.0.0
  description: API for social feed and community features (Epic 3: Sharing & Community)
servers:
  - url: /api/v1
    description: API v1

paths:
  /feed:
    get:
      summary: Get feed
      description: |
        Get the public feed, personal feed, or following feed.
        
        **Authentication:** Required for all feed access (privacy-by-default)
        
        **Scopes:**
        - `public`: Public sessions from all users (default)
        - `me`: Only sessions from the authenticated user
        - `following`: Only sessions from users the authenticated user follows
        
        **Rate Limiting:** 120 requests per 60 seconds
      operationId: getFeed
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: scope
          in: query
          description: Feed scope (public, me, or following)
          schema:
            type: string
            enum: [public, me, following]
            default: public
        - name: q
          in: query
          description: Search query (searches in session titles, exercise names, user names)
          schema:
            type: string
        - name: sort
          in: query
          description: Sort order (date, popularity, or relevance)
          schema:
            type: string
            enum: [date, popularity, relevance]
            default: date
        - name: limit
          in: query
          description: Number of results per page (default: 20, max: 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip (default: 0)
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FeedResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /feed/leaderboard:
    get:
      summary: Get leaderboard
      description: |
        Get the points leaderboard for users.
        
        **Scopes:**
        - `global`: Global leaderboard (default)
        - `friends`: Leaderboard of users you follow
        
        **Rate Limiting:** 60 requests per 60 seconds
      operationId: getLeaderboard
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: scope
          in: query
          description: Leaderboard scope (global or friends)
          schema:
            type: string
            enum: [global, friends]
            default: global
        - name: period
          in: query
          description: Time period for leaderboard
          schema:
            type: string
            enum: [week, month]
            default: week
        - name: limit
          in: query
          description: Number of results (default: 25, max: 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 25
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeaderboardResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /feed/item/{feedItemId}/like:
    post:
      summary: Like a feed item
      description: |
        Like a feed item (session). Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 100 requests per 300 seconds
      operationId: likeFeedItem
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: feedItemId
          in: path
          required: true
          description: Feed item ID
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Feed item liked successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LikeResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Unlike a feed item
      description: |
        Remove like from a feed item. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 100 requests per 300 seconds
      operationId: unlikeFeedItem
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: feedItemId
          in: path
          required: true
          description: Feed item ID
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Feed item unliked successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LikeResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/session/{sessionId}/bookmark:
    post:
      summary: Bookmark a session
      description: |
        Bookmark a session for later reference. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 100 requests per 300 seconds
      operationId: bookmarkSession
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: sessionId
          in: path
          required: true
          description: Session ID
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Session bookmarked successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookmarkResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Remove bookmark
      description: |
        Remove bookmark from a session. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 100 requests per 300 seconds
      operationId: removeBookmark
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: sessionId
          in: path
          required: true
          description: Session ID
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Bookmark removed successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookmarkResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/bookmarks:
    get:
      summary: List bookmarked sessions
      description: |
        Get paginated list of bookmarked sessions for the authenticated user.
        
        **Rate Limiting:** 60 requests per 60 seconds
      operationId: listBookmarks
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: limit
          in: query
          description: Number of results per page (default: 50, max: 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: offset
          in: query
          description: Number of results to skip (default: 0)
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookmarksResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /feed/item/{feedItemId}/comments:
    get:
      summary: List comments for a feed item
      description: |
        Get paginated list of comments for a feed item.
        
        **Rate Limiting:** 120 requests per 60 seconds
      operationId: listComments
      tags:
        - Comments
      security:
        - cookieAuth: []
      parameters:
        - name: feedItemId
          in: path
          required: true
          description: Feed item ID
          schema:
            type: string
            format: uuid
        - name: limit
          in: query
          description: Number of results per page (default: 50, max: 200)
          schema:
            type: integer
            minimum: 1
            maximum: 200
            default: 50
        - name: offset
          in: query
          description: Number of results to skip (default: 0)
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CommentsResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    post:
      summary: Create a comment
      description: |
        Create a comment on a feed item.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 20 requests per 3600 seconds (1 hour)
      operationId: createComment
      tags:
        - Comments
      security:
        - cookieAuth: []
      parameters:
        - name: feedItemId
          in: path
          required: true
          description: Feed item ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCommentRequest"
      responses:
        "201":
          description: Comment created successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Comment"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/comments/{commentId}:
    delete:
      summary: Delete a comment
      description: |
        Delete a comment. Users can delete their own comments, session owners can delete any comment on their sessions.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 60 requests per 3600 seconds (1 hour)
      operationId: deleteComment
      tags:
        - Comments
      security:
        - cookieAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Comment deleted successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteCommentResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/item/{feedItemId}/report:
    post:
      summary: Report a feed item
      description: |
        Report inappropriate content in a feed item.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 20 requests per 3600 seconds (1 hour)
      operationId: reportFeedItem
      tags:
        - Moderation
      security:
        - cookieAuth: []
      parameters:
        - name: feedItemId
          in: path
          required: true
          description: Feed item ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReportRequest"
      responses:
        "201":
          description: Report submitted successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReportResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/comments/{commentId}/report:
    post:
      summary: Report a comment
      description: |
        Report inappropriate content in a comment.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 20 requests per 3600 seconds (1 hour)
      operationId: reportComment
      tags:
        - Moderation
      security:
        - cookieAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReportRequest"
      responses:
        "201":
          description: Report submitted successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReportResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/users/{alias}/follow:
    post:
      summary: Follow a user
      description: |
        Follow a user by alias. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 50 requests per 86400 seconds (24 hours)
      operationId: followUser
      tags:
        - Social
      security:
        - cookieAuth: []
      parameters:
        - name: alias
          in: path
          required: true
          description: User alias
          schema:
            type: string
            minLength: 3
            maxLength: 50
      responses:
        "200":
          description: User followed successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FollowResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Unfollow a user
      description: |
        Unfollow a user by alias. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 50 requests per 86400 seconds (24 hours)
      operationId: unfollowUser
      tags:
        - Social
      security:
        - cookieAuth: []
      parameters:
        - name: alias
          in: path
          required: true
          description: User alias
          schema:
            type: string
            minLength: 3
            maxLength: 50
      responses:
        "200":
          description: User unfollowed successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnfollowResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/users/{alias}/followers:
    get:
      summary: List user followers
      description: |
        Get list of users following the specified user.
        
        **Rate Limiting:** 120 requests per 60 seconds
      operationId: listFollowers
      tags:
        - Social
      security:
        - cookieAuth: []
      parameters:
        - name: alias
          in: path
          required: true
          description: User alias
          schema:
            type: string
            minLength: 3
            maxLength: 50
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FollowersResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/users/{alias}/following:
    get:
      summary: List users being followed
      description: |
        Get list of users that the specified user is following.
        
        **Rate Limiting:** 120 requests per 60 seconds
      operationId: listFollowing
      tags:
        - Social
      security:
        - cookieAuth: []
      parameters:
        - name: alias
          in: path
          required: true
          description: User alias
          schema:
            type: string
            minLength: 3
            maxLength: 50
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FollowingResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/users/{alias}/block:
    post:
      summary: Block a user
      description: |
        Block a user by alias. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 50 requests per 86400 seconds (24 hours)
      operationId: blockUser
      tags:
        - Social
      security:
        - cookieAuth: []
      parameters:
        - name: alias
          in: path
          required: true
          description: User alias
          schema:
            type: string
            minLength: 3
            maxLength: 50
      responses:
        "200":
          description: User blocked successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BlockResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Unblock a user
      description: |
        Unblock a user by alias. Idempotent operation.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 50 requests per 86400 seconds (24 hours)
      operationId: unblockUser
      tags:
        - Social
      security:
        - cookieAuth: []
      parameters:
        - name: alias
          in: path
          required: true
          description: User alias
          schema:
            type: string
            minLength: 3
            maxLength: 50
      responses:
        "200":
          description: User unblocked successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnblockResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /feed/session/{sessionId}/clone:
    post:
      summary: Clone a session from feed
      description: |
        Clone a public session from the feed to create a new session for the authenticated user.
        
        **Idempotency:** Supports `Idempotency-Key` header (24h TTL)
        
        **Rate Limiting:** 20 requests per 60 seconds
      operationId: cloneSessionFromFeed
      tags:
        - Feed
      security:
        - cookieAuth: []
      parameters:
        - name: sessionId
          in: path
          required: true
          description: Session ID to clone
          schema:
            type: string
            format: uuid
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Optional custom title for cloned session
      responses:
        "201":
          description: Session cloned successfully
          headers:
            Idempotency-Key:
              description: The idempotency key used for this request
              schema:
                type: string
            Idempotent-Replayed:
              description: Indicates if this is a replayed response
              schema:
                type: string
                enum: ["true"]
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClonedSessionResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

components:
  schemas:
    FeedItem:
      type: object
      required:
        - feedItemId
        - ownerId
        - ownerUsername
        - ownerDisplayName
        - visibility
        - publishedAt
        - session
        - stats
      properties:
        feedItemId:
          type: string
          format: uuid
          description: Feed item ID
        ownerId:
          type: string
          format: uuid
          description: Owner user ID
        ownerUsername:
          type: string
          description: Owner username
        ownerDisplayName:
          type: string
          description: Owner display name
        visibility:
          type: string
          enum: [private, public, link]
          description: Session visibility level
        publishedAt:
          type: string
          format: date-time
          nullable: true
          description: Publication timestamp
        session:
          type: object
          nullable: true
          properties:
            id:
              type: string
              format: uuid
            title:
              type: string
              nullable: true
            completedAt:
              type: string
              format: date-time
              nullable: true
            points:
              type: number
              nullable: true
        stats:
          $ref: "#/components/schemas/FeedItemStats"
    FeedItemStats:
      type: object
      required:
        - likes
        - comments
        - viewerHasLiked
        - viewerHasBookmarked
      properties:
        likes:
          type: integer
          minimum: 0
          description: Number of likes
        comments:
          type: integer
          minimum: 0
          description: Number of comments
        viewerHasLiked:
          type: boolean
          description: Whether the authenticated user has liked this item
        viewerHasBookmarked:
          type: boolean
          description: Whether the authenticated user has bookmarked this session
    FeedResponse:
      type: object
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/FeedItem"
    Comment:
      type: object
      required:
        - id
        - feedItemId
        - authorId
        - authorUsername
        - authorDisplayName
        - body
        - createdAt
        - isDeleted
      properties:
        id:
          type: string
          format: uuid
        feedItemId:
          type: string
          format: uuid
        authorId:
          type: string
          format: uuid
        authorUsername:
          type: string
        authorDisplayName:
          type: string
        body:
          type: string
          description: Comment text
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          nullable: true
        isDeleted:
          type: boolean
          description: Whether the comment has been soft-deleted
    CreateCommentRequest:
      type: object
      required:
        - body
      properties:
        body:
          type: string
          minLength: 1
          maxLength: 2000
          description: Comment text
    CommentsResponse:
      type: object
      required:
        - comments
      properties:
        comments:
          type: array
          items:
            $ref: "#/components/schemas/Comment"
    DeleteCommentResponse:
      type: object
      required:
        - deleted
      properties:
        deleted:
          type: boolean
    LikeResponse:
      type: object
      required:
        - liked
        - likesCount
      properties:
        liked:
          type: boolean
          description: Whether the item is now liked
        likesCount:
          type: integer
          minimum: 0
          description: Total number of likes
    BookmarkResponse:
      type: object
      required:
        - bookmarked
      properties:
        bookmarked:
          type: boolean
          description: Whether the session is now bookmarked
    BookmarksResponse:
      type: object
      required:
        - bookmarks
      properties:
        bookmarks:
          type: array
          items:
            type: object
            properties:
              sessionId:
                type: string
                format: uuid
              bookmarkedAt:
                type: string
                format: date-time
    ReportRequest:
      type: object
      required:
        - reason
      properties:
        reason:
          type: string
          minLength: 1
          maxLength: 200
          description: Reason for reporting
        details:
          type: string
          maxLength: 1000
          description: Additional details (optional)
    ReportResponse:
      type: object
      required:
        - reportId
        - reportedAt
      properties:
        reportId:
          type: string
          format: uuid
        reportedAt:
          type: string
          format: date-time
    FollowResponse:
      type: object
      required:
        - followingId
      properties:
        followingId:
          type: string
          format: uuid
          description: Following relationship ID
    UnfollowResponse:
      type: object
      required:
        - unfollowedId
      properties:
        unfollowedId:
          type: string
          format: uuid
          description: Unfollowed relationship ID
    FollowersResponse:
      type: object
      required:
        - followers
      properties:
        followers:
          type: array
          items:
            type: object
            properties:
              userId:
                type: string
                format: uuid
              username:
                type: string
              displayName:
                type: string
              followedAt:
                type: string
                format: date-time
    FollowingResponse:
      type: object
      required:
        - following
      properties:
        following:
          type: array
          items:
            type: object
            properties:
              userId:
                type: string
                format: uuid
              username:
                type: string
              displayName:
                type: string
              followedAt:
                type: string
                format: date-time
    BlockResponse:
      type: object
      required:
        - blocked
      properties:
        blocked:
          type: boolean
          description: Whether the user is now blocked
    UnblockResponse:
      type: object
      required:
        - unblocked
      properties:
        unblocked:
          type: boolean
          description: Whether the user is now unblocked
    LeaderboardResponse:
      type: object
      required:
        - leaderboard
        - scope
        - period
      properties:
        leaderboard:
          type: array
          items:
            type: object
            properties:
              userId:
                type: string
                format: uuid
              username:
                type: string
              displayName:
                type: string
              points:
                type: number
                minimum: 0
              rank:
                type: integer
                minimum: 1
        scope:
          type: string
          enum: [global, friends]
        period:
          type: string
          enum: [week, month]
    ClonedSessionResponse:
      type: object
      required:
        - id
        - clonedAt
      properties:
        id:
          type: string
          format: uuid
          description: ID of the newly created cloned session
        clonedAt:
          type: string
          format: date-time
    Error:
      type: object
      required:
        - error
        - code
      properties:
        error:
          type: string
          description: Human-readable error message
        code:
          type: string
          description: Error code (e.g., E.VALIDATION_ERROR, E.NOT_FOUND)
  responses:
    BadRequest:
      description: Bad request (validation error)
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error: "Validation failed"
            code: "E.VALIDATION_ERROR"
    Unauthorized:
      description: Unauthorized (authentication required)
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error: "Unauthorized"
            code: "E.UNAUTHENTICATED"
    Forbidden:
      description: Forbidden (insufficient permissions)
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error: "Forbidden"
            code: "E.FORBIDDEN"
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error: "Resource not found"
            code: "E.NOT_FOUND"
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: session
