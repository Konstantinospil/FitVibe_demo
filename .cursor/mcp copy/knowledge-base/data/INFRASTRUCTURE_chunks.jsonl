{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_000", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "# FitVibe Infrastructure Deployment Guide\n\nThis document provides comprehensive instructions for deploying FitVibe infrastructure across all environments.\n\n\n## Table of Contents\n\n1. [Architecture Overview](#architecture-overview)\n2. [Prerequisites](#prerequisites)\n3. [Local Development Setup](#local-development-setup)\n4. [Kubernetes Production Deployment](#kubernetes-production-deployment)\n5. [Monitoring & Observability](#monitoring--observability)\n6. [Disaster Recovery](#disaster-recovery)\n7.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 0, "token_count": 124, "hash_short": "c8a622ae", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_001", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "l-development-setup)\n4. [Kubernetes Production Deployment](#kubernetes-production-deployment)\n5. [Monitoring & Observability](#monitoring--observability)\n6. [Disaster Recovery](#disaster-recovery)\n7. [Troubleshooting](#troubleshooting)\n\n## Architecture Overview\n\n### System Components\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                         Internet                             │\n└───────────────────────┬─────────────────────────────────────┘\n                        │\n                        ↓\n┌─────────────────────────────────────────────────────────────┐\n│                   NGINX Ingress / ALB                        │\n│                   (TLS Termination)                          │\n└───────┬─────────────────────────────────────┬───────────────┘\n        │                                     │\n        ↓                                     ↓\n┌──────────────────┐              ┌──────────────────────┐\n│   Frontend       │              │   Backend API        │\n│   (React/Vite)   │◄────────────►│   (Node/Express)     │\n│   Replicas: 2-6  │              │   Replicas: 3-10     │\n└──────────────────┘              └──────┬───────────────┘\n                                         │\n                    ┌────────────────────┼───────────────┐\n                    ↓                    ↓               ↓\n            ┌──────────────┐    ┌──────────────┐  ┌────────────┐\n            │  PostgreSQL  │    │    Redis     │  │  S3/Object │\n            │  (Primary)   │    │   (Cache)    │  │  Storage   │\n            └──────────────┘    └──────────────┘  └────────────┘\n                    ↓\n            ┌──────────────┐\n            │  PostgreSQL  │\n            │  (Replica)   │\n            └──────────────┘\n```", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 1, "token_count": 436, "hash_short": "7832a32f", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_002", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "└──────────────┘    └──────────────┘  └────────────┘\n                    ↓\n            ┌──────────────┐\n            │  PostgreSQL  │\n            │  (Replica)   │\n            └──────────────┘\n```\n\n\n### Infrastructure Components\n\n| Component      | Purpose                        | HA Strategy                        | Backup                         |\n| -------------- | ------------------------------ | ---------------------------------- | ------------------------------ |\n| **Frontend**   | React SPA served via NGINX     | 2-6 replicas, HPA                  | Image registry                 |\n| **Backend**    | Express API server             | 3-10 replicas, HPA                 | Image registry                 |\n| **PostgreSQL** | Primary database               | Master-replica, automated failover | Daily snapshots, WAL archiving |\n| **Redis**      | Cache and session storage      | Single instance (or cluster)       | RDB snapshots (hourly)         |\n| **NGINX**      | Reverse proxy, TLS termination | 2+ replicas                        | Config in git                  |\n| **Prometheus** | Metrics collection             | 2 replicas                         | 30-day retention               |\n| **Grafana**    | Metrics visualization          | 2 replicas                         | Dashboards in git              |", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 2, "token_count": 331, "hash_short": "63d782e8", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_003", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "| 2 replicas                         | 30-day retention               |\n| **Grafana**    | Metrics visualization          | 2 replicas                         | Dashboards in git              |\n\n\n## Prerequisites\n\n### Required Tools\n\n**For Local Development:**\n\n- Docker 24+ & Docker Compose 2.20+\n- Node.js 20 LTS\n- PNPM 9+\n- PostgreSQL 15+ client (`psql`)\n\n**For Kubernetes Deployment:**\n\n- `kubectl` 1.28+\n- `helm` 3.12+\n- Cloud provider CLI:\n  - AWS: `aws-cli` 2.x\n  - GCP: `gcloud` SDK\n  - Azure: `az` CLI\n- `kubeseal` (for sealed-secrets)\n- `jq` (for JSON parsing)\n\n### Access Requirements\n\n**Development:**\n\n- GitHub repository access\n- Local admin privileges (for Docker)\n\n**Production:**\n\n- Cloud provider account with admin IAM role\n- Kubernetes cluster access (RBAC: cluster-admin initially, namespace-scoped later)\n- GitHub Container Registry access (GHCR)\n- Domain DNS control (for TLS certificates)\n\n## Local Development Setup\n\n### Quick Start with Docker Compose\n\n1.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 3, "token_count": 245, "hash_short": "795da6d6", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_004", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ter-admin initially, namespace-scoped later)\n- GitHub Container Registry access (GHCR)\n- Domain DNS control (for TLS certificates)\n\n## Local Development Setup\n\n### Quick Start with Docker Compose\n\n1. **Clone repository**:\n\n```bash\ngit clone https://github.com/Konstantinospil/FitVibe-v2.git\ncd FitVibe-v2\n```\n\n2. **Configure environment**:\n\n```bash\n# Copy example environment files\ncp .env.example .env\ncp apps/frontend/.env.example apps/frontend/.env.local\n\n# Generate JWT keys\nmkdir -p infra/keys\nopenssl genrsa -out infra/keys/jwt_rs256.key 4096\nopenssl rsa -in infra/keys/jwt_rs256.key -pubout -out infra/keys/jwt_rs256.pub\n\n# Update .env with your configuration\n\n# Minimal required changes:\n\n# - DATABASE_URL (if using external database)\n\n# - SMTP credentials (for email features)\n```\n\n3.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 4, "token_count": 198, "hash_short": "56f07126", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_005", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "out -out infra/keys/jwt_rs256.pub\n\n# Update .env with your configuration\n\n# Minimal required changes:\n\n# - DATABASE_URL (if using external database)\n\n# - SMTP credentials (for email features)\n```\n\n3. **Start all services**:\n\n```bash\n\n# Start full stack (PostgreSQL, Redis, Backend, Frontend, Prometheus, Grafana)\ndocker-compose up -d\n\n# View logs\ndocker-compose logs -f backend frontend\n\n# Check service health\ncurl http://localhost:4000/health\ncurl http://localhost:3000\n```\n\n4. **Run database migrations**:\n\n```bash\n# Install dependencies\npnpm install\n\n# Run migrations\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n\n# Seed database (optional)\npnpm tsx apps/backend/src/db/scripts/seed.ts\n```\n\n5.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 5, "token_count": 175, "hash_short": "3f219218", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_006", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ions**:\n\n```bash\n# Install dependencies\npnpm install\n\n# Run migrations\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n\n# Seed database (optional)\npnpm tsx apps/backend/src/db/scripts/seed.ts\n```\n\n5. **Access services**:\n\n| Service     | URL                   | Credentials                    |\n| ----------- | --------------------- | ------------------------------ |\n| Frontend    | http://localhost:3000 | Register new account           |\n| Backend API | http://localhost:4000 | N/A (API endpoints)            |\n| Prometheus  | http://localhost:9090 | None                           |\n| Grafana     | http://localhost:3001 | admin / admin                  |\n| PostgreSQL  | localhost:5432        | fitvibe / fitvibe_dev_password |\n| Redis       | localhost:6379        | fitvibe_dev_redis              |\n\n### Manual Development Setup (Without Docker)\n\n1.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 6, "token_count": 214, "hash_short": "bc7752b4", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_007", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "|\n| PostgreSQL  | localhost:5432        | fitvibe / fitvibe_dev_password |\n| Redis       | localhost:6379        | fitvibe_dev_redis              |\n\n### Manual Development Setup (Without Docker)\n\n1. **Start PostgreSQL**:\n\n```bash\n# macOS (Homebrew)\nbrew install postgresql@15\nbrew services start postgresql@15\n\n# Create database\ncreatedb fitvibe\n```\n\n2. **Start Redis**:\n\n```bash\n# macOS (Homebrew)\nbrew install redis\nbrew services start redis\n\n# Set password\nredis-cli CONFIG SET requirepass fitvibe_dev_redis\n```\n\n3. **Install dependencies and run migrations**:\n\n```bash\npnpm install\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n```\n\n4. **Start backend**:\n\n```bash\npnpm --filter @fitvibe/backend dev\n# Runs on http://localhost:4000\n```\n\n5.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 7, "token_count": 186, "hash_short": "4d879a59", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_008", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "run migrations**:\n\n```bash\npnpm install\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n```\n\n4. **Start backend**:\n\n```bash\npnpm --filter @fitvibe/backend dev\n# Runs on http://localhost:4000\n```\n\n5.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 8, "token_count": 49, "hash_short": "9890ba3d", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_009", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "**Start frontend** (in separate terminal):\n\n```bash\npnpm --filter @fitvibe/frontend dev\n# Runs on http://localhost:3000\n```\n\n## Kubernetes Production Deployment\n\n### Cluster Setup\n\n#### AWS EKS Example\n\n```bash\n# Install eksctl\nbrew install eksctl\n\n# Create EKS cluster\neksctl create cluster \\\n  --name fitvibe-production \\\n  --region us-east-1 \\\n  --nodegroup-name standard-workers \\\n  --node-type t3.medium \\\n  --nodes 3 \\\n  --nodes-min 3 \\\n  --nodes-max 10 \\\n  --managed\n\n# Configure kubectl\naws eks update-kubeconfig --region us-east-1 --name fitvibe-production\n\n# Verify connectivity\nkubectl get nodes\n```\n\n#### GKE Example\n\n```bash\n# Create GKE cluster\ngcloud container clusters create fitvibe-production \\\n  --zone us-central1-a \\\n  --num-nodes 3 \\\n  --machine-type n1-standard-2 \\\n  --enable-autoscaling \\\n  --min-nodes 3 \\\n  --max-nodes 10\n\n# Get credentials\ngcloud container clusters get-credentials fitvibe-production --zone us-central1-a\n\n# Verify\nkubectl get nodes\n```\n\n### Install Required Components", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 9, "token_count": 253, "hash_short": "e9b96a99", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_010", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "--min-nodes 3 \\\n  --max-nodes 10\n\n# Get credentials\ngcloud container clusters get-credentials fitvibe-production --zone us-central1-a\n\n# Verify\nkubectl get nodes\n```\n\n### Install Required Components\n\n\n#### 1. NGINX Ingress Controller\n\n```bash\n# Add Helm repo\nhelm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx\nhelm repo update\n\n# Install\nhelm install ingress-nginx ingress-nginx/ingress-nginx \\\n  --namespace ingress-nginx \\\n  --create-namespace \\\n  --set controller.metrics.enabled=true \\\n  --set controller.podAnnotations.\"prometheus\\.io/scrape\"=true \\\n  --set controller.podAnnotations.\"prometheus\\.io/port\"=10254\n\n# Get LoadBalancer IP\nkubectl get svc -n ingress-nginx ingress-nginx-controller\n```\n\n#### 2.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 10, "token_count": 182, "hash_short": "bec85356", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_011", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "dAnnotations.\"prometheus\\.io/scrape\"=true \\\n  --set controller.podAnnotations.\"prometheus\\.io/port\"=10254\n\n# Get LoadBalancer IP\nkubectl get svc -n ingress-nginx ingress-nginx-controller\n```\n\n#### 2. Cert-Manager (for TLS certificates)\n\n```bash\n# Install cert-manager\nkubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.0/cert-manager.yaml\n\n# Verify installation\nkubectl get pods -n cert-manager\n\n# ClusterIssuer is defined in infra/kubernetes/ingress.yaml\n```\n\n#### 3. External Secrets Operator\n\n```bash\n# Add Helm repo\nhelm repo add external-secrets https://charts.external-secrets.io\nhelm repo update\n\n# Install\nhelm install external-secrets \\\n  external-secrets/external-secrets \\\n  -n external-secrets-system \\\n  --create-namespace\n\n# Verify\nkubectl get pods -n external-secrets-system\n```\n\n#### 4.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 11, "token_count": 209, "hash_short": "e50705a3", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_012", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "# Install\nhelm install external-secrets \\\n  external-secrets/external-secrets \\\n  -n external-secrets-system \\\n  --create-namespace\n\n# Verify\nkubectl get pods -n external-secrets-system\n```\n\n#### 4. Prometheus & Grafana\n\n```bash\n# Add Helm repo\nhelm repo add prometheus-community https://prometheus-community.github.io/helm-charts\nhelm repo update\n\n# Install Prometheus\nhelm install prometheus prometheus-community/prometheus \\\n  --namespace monitoring \\\n  --create-namespace \\\n  --values infra/prometheus/prometheus-values.yaml\n\n# Install Grafana\nhelm install grafana grafana/grafana \\\n  --namespace monitoring \\\n  --values infra/grafana/grafana-values.yaml\n\n# Get Grafana admin password\nkubectl get secret --namespace monitoring grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode\n```\n\n### Deploy FitVibe Application\n\n#### 1. Create Namespace\n\n```bash\nkubectl apply -f infra/kubernetes/namespace.yaml\n```\n\n#### 2.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 12, "token_count": 231, "hash_short": "9510130b", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_013", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ing grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode\n```\n\n### Deploy FitVibe Application\n\n#### 1. Create Namespace\n\n```bash\nkubectl apply -f infra/kubernetes/namespace.yaml\n```\n\n#### 2.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 13, "token_count": 49, "hash_short": "742f2b27", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_014", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "Configure Secrets\n\n**Option A: Using Sealed Secrets (Recommended for GitOps)**\n\n```bash\n# Install sealed-secrets controller\nkubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml\n\n# Create secret locally (DO NOT commit this file)\nkubectl create secret generic fitvibe-secrets \\\n  --from-literal=postgres-user=fitvibe \\\n  --from-literal=postgres-password=YOUR_SECURE_PASSWORD \\\n  --from-literal=redis-password=YOUR_REDIS_PASSWORD \\\n  --from-file=jwt-private-key=./infra/keys/jwt_rs256.key \\\n  --from-file=jwt-public-key=./infra/keys/jwt_rs256.pub \\\n  --namespace=fitvibe \\\n  --dry-run=client -o yaml | \\\n  kubeseal --format yaml > infra/kubernetes/sealed-secrets-production.yaml\n\n# Apply sealed secret (safe to commit)\nkubectl apply -f infra/kubernetes/sealed-secrets-production.yaml\n```\n\n**Option B: Using External Secrets Operator**\n\n```bash\n# Store secrets in AWS Secrets Manager\naws secretsmanager create-secret \\\n  --name fitvibe/production/postgres \\\n  --secret-string '{\"username\":\"fitvibe\",\"password\":\"YOUR_SECURE_PASSWORD\"}'\n\naws secretsmanager create-secret \\\n  --name fitvibe/production/redis \\\n  --secret-string '{\"password\":\"YOUR_REDIS_PASSWORD\"}'", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 14, "token_count": 302, "hash_short": "6662ad87", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_015", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "secret-string '{\"username\":\"fitvibe\",\"password\":\"YOUR_SECURE_PASSWORD\"}'\n\naws secretsmanager create-secret \\\n  --name fitvibe/production/redis \\\n  --secret-string '{\"password\":\"YOUR_REDIS_PASSWORD\"}'\n\n\n# Create ExternalSecret resource (already configured in setup)\nkubectl apply -f infra/kubernetes/external-secret.yaml\n```\n\n#### 3. Deploy ConfigMap\n\n```bash\n# Review and update configmap.yaml with production values\nkubectl apply -f infra/kubernetes/configmap.yaml\n```\n\n#### 4.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 15, "token_count": 119, "hash_short": "baa7e0d3", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_016", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "-f infra/kubernetes/external-secret.yaml\n```\n\n#### 3. Deploy ConfigMap\n\n```bash\n# Review and update configmap.yaml with production values\nkubectl apply -f infra/kubernetes/configmap.yaml\n```\n\n#### 4. Deploy Database (PostgreSQL)\n\n```bash\n# Deploy PostgreSQL StatefulSet\nkubectl apply -f infra/kubernetes/postgres-deployment.yaml\n\n# Verify pods are running\nkubectl get pods -n fitvibe -l app=postgres\n\n# Run migrations\nkubectl exec -it -n fitvibe postgres-0 -- psql -U fitvibe -d fitvibe -c \"SELECT version();\"\n\n# From local machine (with access to pod):\nexport PGPASSWORD=$(kubectl get secret fitvibe-secrets -n fitvibe -o jsonpath='{.data.postgres-password}' | base64 -d)\nexport DATABASE_URL=\"postgresql://fitvibe:${PGPASSWORD}@$(kubectl get svc postgres -n fitvibe -o jsonpath='{.spec.clusterIP}'):5432/fitvibe\"\n\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n```\n\n#### 5.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 16, "token_count": 218, "hash_short": "71223751", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_017", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ort DATABASE_URL=\"postgresql://fitvibe:${PGPASSWORD}@$(kubectl get svc postgres -n fitvibe -o jsonpath='{.spec.clusterIP}'):5432/fitvibe\"\n\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n```\n\n#### 5. Deploy Redis\n\n```bash\nkubectl apply -f infra/kubernetes/redis-deployment.yaml\n\n# Verify\nkubectl get pods -n fitvibe -l app=redis\n```\n\n#### 6. Deploy Backend\n\n```bash\n# Build and push Docker image\ndocker build -t ghcr.io/konstantinospil/fitvibe-backend:latest -f apps/backend/Dockerfile .\ndocker push ghcr.io/konstantinospil/fitvibe-backend:latest\n\n# Deploy to Kubernetes\nkubectl apply -f infra/kubernetes/backend-deployment.yaml\n\n# Watch rollout\nkubectl rollout status deployment/backend -n fitvibe\n\n# Check logs\nkubectl logs -n fitvibe -l app=backend --tail=50 -f\n```\n\n#### 7. Deploy Frontend\n\n```bash\n# Build and push Docker image\ndocker build \\\n  --build-arg VITE_API_URL=https://api.fitvibe.com \\\n  -t ghcr.io/konstantinospil/fitvibe-frontend:latest \\\n  -f apps/frontend/Dockerfile .", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 17, "token_count": 246, "hash_short": "e63a8d64", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_018", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ntend\n\n```bash\n# Build and push Docker image\ndocker build \\\n  --build-arg VITE_API_URL=https://api.fitvibe.com \\\n  -t ghcr.io/konstantinospil/fitvibe-frontend:latest \\\n  -f apps/frontend/Dockerfile .\ndocker push ghcr.io/konstantinospil/fitvibe-frontend:latest\n\n# Deploy\nkubectl apply -f infra/kubernetes/frontend-deployment.yaml\n\n# Verify\nkubectl rollout status deployment/frontend -n fitvibe\n```\n\n#### 8.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 18, "token_count": 101, "hash_short": "f9358d73", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_019", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "push ghcr.io/konstantinospil/fitvibe-frontend:latest\n\n# Deploy\nkubectl apply -f infra/kubernetes/frontend-deployment.yaml\n\n# Verify\nkubectl rollout status deployment/frontend -n fitvibe\n```\n\n#### 8.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 19, "token_count": 49, "hash_short": "d2714aa7", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_020", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "Configure Ingress & TLS\n\n```bash\n# Update ingress.yaml with your domain\n\n# Ensure DNS A records point to Ingress LoadBalancer IP\n\nkubectl apply -f infra/kubernetes/ingress.yaml\n\n\n# Watch cert-manager issue certificates\nkubectl get certificate -n fitvibe --watch\n\n# Verify HTTPS\ncurl -I https://fitvibe.com\ncurl -I https://api.fitvibe.com/health\n```\n\n### Verify Deployment\n\n```bash\n# Check all resources\nkubectl get all -n fitvibe\n\n# Check pod health\nkubectl get pods -n fitvibe\n\n# Check services\nkubectl get svc -n fitvibe\n\n# Check ingress\nkubectl get ingress -n fitvibe\n\n# Test backend health\ncurl https://api.fitvibe.com/health\n\n# Test frontend\ncurl https://fitvibe.com\n\n# Check logs for errors\nkubectl logs -n fitvibe -l app=backend --tail=100 | grep -i error\nkubectl logs -n fitvibe -l app=frontend --tail=100 | grep -i error\n```\n\n## Monitoring & Observability\n\n### Prometheus Metrics\n\n**Access Prometheus**:\n\n```bash\n# Port-forward to access locally\nkubectl port-forward -n monitoring svc/prometheus-server 9090:80", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 20, "token_count": 254, "hash_short": "69d95429", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_021", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "-i error\n```\n\n## Monitoring & Observability\n\n### Prometheus Metrics\n\n**Access Prometheus**:\n\n```bash\n# Port-forward to access locally\nkubectl port-forward -n monitoring svc/prometheus-server 9090:80\n\n\n# Open http://localhost:9090\n```\n\n**Key Metrics**:\n\n- `http_request_duration_seconds` - API latency histogram\n- `http_requests_total` - Total request count\n- `jwt_refresh_reuse_total` - Refresh token reuse attempts\n- `up` - Service availability (0 = down, 1 = up)\n- `process_resident_memory_bytes` - Memory usage\n- `nodejs_heap_size_used_bytes` - Node.js heap usage\n\n### Grafana Dashboards\n\n**Access Grafana**:\n\n```bash\n# Get admin password\nkubectl get secret -n monitoring grafana -o jsonpath=\"{.data.admin-password}\" | base64 -d\n\n# Port-forward\nkubectl port-forward -n monitoring svc/grafana 3000:80\n\n# Open http://localhost:3000\n\n# Login with admin / <password>\n```\n\n**Import Dashboards**:\n\n1. Navigate to Dashboards → Import\n2. Upload JSON files from `infra/grafana/dashboards/`\n3. Select Prometheus datasource", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 21, "token_count": 253, "hash_short": "e70ee08a", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_022", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "/localhost:3000\n\n# Login with admin / <password>\n```\n\n**Import Dashboards**:\n\n1. Navigate to Dashboards → Import\n2. Upload JSON files from `infra/grafana/dashboards/`\n3. Select Prometheus datasource\n\n\n\n### Alerts\n\n**Prometheus Alert Rules** are defined in `infra/prometheus/alerts.yml`.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 22, "token_count": 71, "hash_short": "8c30e86a", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_023", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "e to Dashboards → Import\n2. Upload JSON files from `infra/grafana/dashboards/`\n3. Select Prometheus datasource\n\n\n\n### Alerts\n\n**Prometheus Alert Rules** are defined in `infra/prometheus/alerts.yml`.\n\n**Key Alerts**:\n\n- **HighErrorRate**: 5xx rate > 1% for 5 minutes\n- **HighAPILatency**: p95 latency > 600ms for 5 minutes\n- **ServiceDown**: Service unavailable for 2 minutes\n- **DatabaseConnectionPoolHigh**: > 80% pool utilization\n- **HighMemoryUsage**: > 90% memory consumption\n\n**Alert Notification**:\n\nConfigure Alertmanager to send notifications to Slack, PagerDuty, or email:\n\n```yaml\n# infra/prometheus/alertmanager-config.yaml\nreceivers:\n  - name: \"slack-notifications\"\n    slack_configs:\n      - api_url: \"YOUR_SLACK_WEBHOOK_URL\"\n        channel: \"#fitvibe-alerts\"\n        text: \"{{ .CommonAnnotations.summary }}\"\n```\n\n### Logging\n\n**Centralized Logging with Loki** (optional):\n\n```bash\n# Install Loki stack\nhelm repo add grafana https://grafana.github.io/helm-charts\nhelm install loki grafana/loki-stack \\\n  --namespace monitoring \\\n  --set promtail.enabled=true \\\n  --set grafana.enabled=false", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 23, "token_count": 276, "hash_short": "fa3cf0fc", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_024", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "Loki stack\nhelm repo add grafana https://grafana.github.io/helm-charts\nhelm install loki grafana/loki-stack \\\n  --namespace monitoring \\\n  --set promtail.enabled=true \\\n  --set grafana.enabled=false\n\n\n# View logs in Grafana\n\n# Add Loki datasource: http://loki:3100\n\n# Use LogQL queries:\n\n# {namespace=\"fitvibe\", app=\"backend\"} |= \"error\"\n```\n\n\n## Disaster Recovery\n\n### Backup Strategy\n\n#### Database Backups\n\n**Automated Daily Snapshots**:\n\n```bash\n# AWS RDS (automated backups)\naws rds modify-db-instance \\\n  --db-instance-identifier fitvibe-production \\\n  --backup-retention-period 30 \\\n  --preferred-backup-window \"03:00-04:00\"\n\n# Manual snapshot\naws rds create-db-snapshot \\\n  --db-instance-identifier fitvibe-production \\\n  --db-snapshot-identifier fitvibe-prod-$(date +%Y%m%d)\n\n# GCP Cloud SQL\ngcloud sql backups create \\\n  --instance=fitvibe-production \\\n  --description=\"Manual backup $(date)\"\n```\n\n**WAL Archiving** (for point-in-time recovery):\n\n```sql\n-- Enable WAL archiving in PostgreSQL\nALTER SYSTEM SET wal_level = replica;\nALTER SYSTEM SET archive_mode = ON;\nALTER SYSTEM SET archive_command = 'aws s3 cp %p s3://fitvibe-wal-archive/%f';\nSELECT pg_reload_conf();\n```", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 24, "token_count": 295, "hash_short": "2f97c8f3", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_025", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ing in PostgreSQL\nALTER SYSTEM SET wal_level = replica;\nALTER SYSTEM SET archive_mode = ON;\nALTER SYSTEM SET archive_command = 'aws s3 cp %p s3://fitvibe-wal-archive/%f';\nSELECT pg_reload_conf();\n```\n\n\n#### Redis Backups\n\n```bash\n# Create RDB snapshot\nkubectl exec -n fitvibe redis-0 -- redis-cli --pass $REDIS_PASSWORD BGSAVE\n\n# Copy RDB file to S3\nkubectl cp fitvibe/redis-0:/data/dump.rdb ./dump.rdb\naws s3 cp ./dump.rdb s3://fitvibe-redis-backups/dump-$(date +%Y%m%d).rdb\n```\n\n#### Secrets Backups\n\n```bash\n# Export all secrets (encrypted)\nkubectl get secrets -n fitvibe -o yaml > secrets-backup.yaml\n\n# Encrypt backup\ngpg --symmetric --cipher-algo AES256 secrets-backup.yaml\n\n# Store encrypted backup securely\naws s3 cp secrets-backup.yaml.gpg s3://fitvibe-secure-backups/\nrm secrets-backup.yaml secrets-backup.yaml.gpg\n```\n\n### Recovery Procedures\n\n#### Database Recovery\n\n**Restore from snapshot**:\n\n```bash\n# AWS RDS\naws rds restore-db-instance-from-db-snapshot \\\n  --db-instance-identifier fitvibe-production-restored \\\n  --db-snapshot-identifier fitvibe-prod-20251113", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 25, "token_count": 269, "hash_short": "4759a789", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_026", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "**Restore from snapshot**:\n\n```bash\n# AWS RDS\naws rds restore-db-instance-from-db-snapshot \\\n  --db-instance-identifier fitvibe-production-restored \\\n  --db-snapshot-identifier fitvibe-prod-20251113\n\n\n# Point cluster to restored instance\nkubectl edit configmap fitvibe-config -n fitvibe\n# Update postgres-host to new endpoint\n```\n\n**Point-in-time recovery (PITR)**:\n\n```bash\n# Restore to specific timestamp\naws rds restore-db-instance-to-point-in-time \\\n  --source-db-instance-identifier fitvibe-production \\\n  --target-db-instance-identifier fitvibe-prod-pitr \\\n  --restore-time 2025-11-13T10:30:00Z\n```\n\n#### Application Recovery\n\n**Rollback deployment**:\n\n```bash\n# View deployment history\nkubectl rollout history deployment/backend -n fitvibe\n\n# Rollback to previous version\nkubectl rollout undo deployment/backend -n fitvibe\n\n# Rollback to specific revision\nkubectl rollout undo deployment/backend -n fitvibe --to-revision=3\n```\n\n**Restore from image tag**:\n\n```bash\n# Deploy specific version\nkubectl set image deployment/backend \\\n  backend=ghcr.io/konstantinospil/fitvibe-backend:v1.2.3 \\\n  -n fitvibe\n```", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 26, "token_count": 278, "hash_short": "4182376e", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_027", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "--to-revision=3\n```\n\n**Restore from image tag**:\n\n```bash\n# Deploy specific version\nkubectl set image deployment/backend \\\n  backend=ghcr.io/konstantinospil/fitvibe-backend:v1.2.3 \\\n  -n fitvibe\n```\n\n\n## Troubleshooting\n\n### Common Issues\n\n#### 1.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 27, "token_count": 61, "hash_short": "6afd602a", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_028", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "```bash\n# Deploy specific version\nkubectl set image deployment/backend \\\n  backend=ghcr.io/konstantinospil/fitvibe-backend:v1.2.3 \\\n  -n fitvibe\n```\n\n\n## Troubleshooting\n\n### Common Issues\n\n#### 1. Pods Not Starting\n\n**Symptoms**: Pods stuck in `Pending`, `CrashLoopBackOff`, or `ImagePullBackOff`\n\n**Diagnosis**:\n\n```bash\n# Describe pod for events\nkubectl describe pod <pod-name> -n fitvibe\n\n# Check logs\nkubectl logs <pod-name> -n fitvibe --previous\n\n# Common causes:\n\n# - Insufficient cluster resources (CPU/memory)\n\n# - Image pull errors (check GHCR access)\n\n# - Missing secrets/configmaps\n\n# - Failed liveness/readiness probes\n```\n\n**Solutions**:\n\n```bash\n# Scale down other workloads to free resources\nkubectl scale deployment/frontend --replicas=1 -n fitvibe\n\n# Verify secret exists\nkubectl get secret fitvibe-secrets -n fitvibe\n\n# Check image exists\ndocker pull ghcr.io/konstantinospil/fitvibe-backend:latest\n\n# Adjust resource requests/limits in deployment YAML\n```\n\n#### 2.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 28, "token_count": 245, "hash_short": "66269353", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_029", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "xists\nkubectl get secret fitvibe-secrets -n fitvibe\n\n# Check image exists\ndocker pull ghcr.io/konstantinospil/fitvibe-backend:latest\n\n# Adjust resource requests/limits in deployment YAML\n```\n\n#### 2. Database Connection Failures\n\n**Symptoms**: Backend logs show `ECONNREFUSED` or `connection timeout`\n\n**Diagnosis**:\n\n```bash\n# Check PostgreSQL pod\nkubectl get pods -n fitvibe -l app=postgres\n\n# Test connection from backend pod\nkubectl exec -it -n fitvibe <backend-pod> -- \\\n  psql -h postgres -U fitvibe -d fitvibe -c \"SELECT 1\"\n\n# Check service DNS\nkubectl exec -it -n fitvibe <backend-pod> -- nslookup postgres\n```\n\n**Solutions**:\n\n```bash\n# Verify database credentials\nkubectl get secret fitvibe-secrets -n fitvibe -o jsonpath='{.data.postgres-password}' | base64 -d\n\n# Check PostgreSQL logs\nkubectl logs -n fitvibe postgres-0\n\n# Restart PostgreSQL\nkubectl delete pod postgres-0 -n fitvibe\n```\n\n#### 3.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 29, "token_count": 226, "hash_short": "a52fe125", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_030", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "-n fitvibe -o jsonpath='{.data.postgres-password}' | base64 -d\n\n# Check PostgreSQL logs\nkubectl logs -n fitvibe postgres-0\n\n# Restart PostgreSQL\nkubectl delete pod postgres-0 -n fitvibe\n```\n\n#### 3. High Latency / Slow Responses\n\n**Symptoms**: API responses > 1s, frontend loading slowly\n\n**Diagnosis**:\n\n```bash\n# Check Prometheus metrics\n\n# Query: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))\n\n\n# Check pod CPU/memory usage\nkubectl top pods -n fitvibe\n\n# Check database query performance\nkubectl exec -n fitvibe postgres-0 -- \\\n  psql -U fitvibe -d fitvibe -c \"SELECT * FROM pg_stat_statements ORDER BY mean_exec_time DESC LIMIT 10;\"\n```\n\n**Solutions**:\n\n```bash\n# Scale up replicas\nkubectl scale deployment/backend --replicas=6 -n fitvibe\n\n# Adjust HPA targets\nkubectl edit hpa backend-hpa -n fitvibe\n\n# Add database indexes (run migrations)\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n```\n\n#### 4.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 30, "token_count": 233, "hash_short": "46b2dc9d", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_031", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "ent/backend --replicas=6 -n fitvibe\n\n# Adjust HPA targets\nkubectl edit hpa backend-hpa -n fitvibe\n\n# Add database indexes (run migrations)\npnpm tsx apps/backend/src/db/scripts/migrate.ts\n```\n\n#### 4.", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 31, "token_count": 49, "hash_short": "9e4830c2", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_032", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "Certificate Issues\n\n**Symptoms**: `ERR_CERT_AUTHORITY_INVALID`, `NET::ERR_CERT_COMMON_NAME_INVALID`\n\n**Diagnosis**:\n\n```bash\n# Check certificate status\nkubectl get certificate -n fitvibe\n\n# Describe certificate for errors\nkubectl describe certificate fitvibe-tls -n fitvibe\n\n# Check cert-manager logs\nkubectl logs -n cert-manager -l app=cert-manager\n```\n\n**Solutions**:\n\n```bash\n# Delete and recreate certificate\nkubectl delete certificate fitvibe-tls -n fitvibe\nkubectl apply -f infra/kubernetes/ingress.yaml\n\n# Manually test ACME challenge\ncurl http://fitvibe.com/.well-known/acme-challenge/test\n```\n\n### Debugging Commands\n\n```bash\n# Interactive shell in pod\nkubectl exec -it -n fitvibe <pod-name> -- /bin/sh\n\n# Copy files from pod\nkubectl cp fitvibe/<pod-name>:/app/logs ./logs\n\n# Port-forward for local debugging\nkubectl port-forward -n fitvibe svc/backend 4000:4000\n\n# View cluster events\nkubectl get events -n fitvibe --sort-by='.lastTimestamp'\n\n# Restart deployment\nkubectl rollout restart deployment/backend -n fitvibe\n```", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 32, "token_count": 257, "hash_short": "94ca6dbb", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE_chunk_033", "doc_id": ".._.._docs_2.Technical_Design_Document_INFRASTRUCTURE", "text": "orward -n fitvibe svc/backend 4000:4000\n\n# View cluster events\nkubectl get events -n fitvibe --sort-by='.lastTimestamp'\n\n# Restart deployment\nkubectl rollout restart deployment/backend -n fitvibe\n```\n\n\n## References\n\n- **CLAUDE.md**: Project overview and development guide\n- **SECRETS_MANAGEMENT.md**: Secrets rotation and compliance\n- **apps/docs/**: Detailed technical design documents\n- **Kubernetes Docs**: https://kubernetes.io/docs/\n- **Prometheus Docs**: https://prometheus.io/docs/\n\n---\n\n**Document Version**: 1.0\n**Last Updated**: 2025-11-13\n**Maintained By**: DevOps Team", "source_file": "../../docs/2.Technical_Design_Document/INFRASTRUCTURE.md", "category": "technical", "chunk_index": 33, "token_count": 145, "hash_short": "a30dee76", "version": 1.0, "title": "FitVibe Infrastructure Deployment Guide", "mtime": "2025-11-23T19:05:38.554215", "ingested_at": "2025-11-30T04:00:42.128344", "tags": ["technical", "md"]}
