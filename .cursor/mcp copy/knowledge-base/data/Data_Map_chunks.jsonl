{"chunk_id": ".._.._docs_5.Policies_Data_Map_chunk_000", "doc_id": ".._.._docs_5.Policies_Data_Map", "text": "# FitVibe Data Map (GDPR Article 30 Snapshot)\n\n| Domain / Dataset               | Tables & Storage                                                                                | Lawful Basis                                 | Retention / Purge                                                   |\n| ------------------------------ | ----------------------------------------------------------------------------------------------- | -------------------------------------------- | ------------------------------------------------------------------- |\n| Accounts & authentication      | `users`, `auth_sessions`, `refresh_tokens`                                                      | Contractual necessity                        | Active account lifetime; sessions ≤ 120d                            |\n| Identity verification          | `auth_tokens` (reset/verify)                                                                    | Legitimate interests / consent               | Auto-purge on expiry (≤ 24h)                                        |\n| Profile & preferences          | `user_static`, `user_contacts`, `user_metrics`                                                  | Contractual necessity                        | Lifetime of account; purge on DSR                                   |\n| Workout planning & logs        | `plans`, `sessions`, `session_exercises`, `exercise_sets`, `planned/actual_exercise_attributes` | Contractual necessity                        | Lifetime of account; cascade delete on DSR                          |\n| Exercise catalog               | `exercises`, `exercise_tags`, media assets                                                      | Contractual necessity / legitimate interests | User-owned data deleted on DSR; global catalog archived             |\n| Gamification                   | `user_points`, `badge_catalog`, `badges`                                                        | Legitimate interests                         | Lifetime of account; points partitioned monthly                     |\n| Social features                | `feed_items`, `feed_likes`, `feed_comments`, `followers`, `share_links`                         | Consent (public/link scopes)                 | Soft delete supported; purge on DSR                                 |\n| Moderation & safety            | `feed_reports`, `user_blocks`, audit log                                                        | Legitimate interests / legal obligation      | Reports retained 180d or until resolved                             |\n| Communications & notifications | `notifications` (planned), email provider logs                                                  | Legitimate interests / consent               | Notifications 90d rolling, provider logs 30d                        |\n| Security & compliance          | `audit_log`, `idempotency_keys`, `user_tombstones`                                              | Legitimate interests / legal obligation      | Audit log 180d, idempotency keys 24h, tombstones until backup purge |\n| Observability                  | Metrics/log pipelines (Prometheus, Loki)                                                        | Legitimate interests                         | Metrics 14d, logs 30d with PII redaction                            |\n| Backups                        | Encrypted snapshots (AWS RDS + S3)                                                              | Legal obligation                             | 14d rolling, purge accelerated for DSR                              |", "source_file": "../../docs/5.Policies/Data_Map.md", "category": "policies", "chunk_index": 0, "token_count": 886, "hash_short": "c4a11925", "version": 1.0, "title": "FitVibe Data Map (GDPR Article 30 Snapshot)", "mtime": "2025-11-21T01:10:57.963665", "ingested_at": "2025-11-30T04:00:43.884797", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_Data_Map_chunk_001", "doc_id": ".._.._docs_5.Policies_Data_Map", "text": "ots (AWS RDS + S3)                                                              | Legal obligation                             | 14d rolling, purge accelerated for DSR                              |\n\n\n\n## Data residency\n\n- Primary region: `eu-central-1` (Frankfurt).\n- Backups replicated to `eu-west-1`.\n- Media assets stored in S3 with regional replication and customer-managed keys.\n\n## DSR pipeline\n\n1. User triggers delete/export in-app.\n2. `users` row marked `pending_deletion` and scheduled via `purge_scheduled_at`.\n3. Retention job (`pnpm retention:run`) processes due deletions, dropping linked\n   sessions, exercises, media, follower edges, and anonymising audit trails.\n4. `user_tombstones` record is created for compliance evidence until backups are\n   purged.\n5. Backups older than 14 days are removed automatically; ad-hoc purge tickets\n   track accelerated deletion if needed.", "source_file": "../../docs/5.Policies/Data_Map.md", "category": "policies", "chunk_index": 1, "token_count": 222, "hash_short": "31848e27", "version": 1.0, "title": "FitVibe Data Map (GDPR Article 30 Snapshot)", "mtime": "2025-11-21T01:10:57.963665", "ingested_at": "2025-11-30T04:00:43.884797", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_Data_Map_chunk_002", "doc_id": ".._.._docs_5.Policies_Data_Map", "text": "bstones` record is created for compliance evidence until backups are\n   purged.\n5. Backups older than 14 days are removed automatically; ad-hoc purge tickets\n   track accelerated deletion if needed.\n\nSee [docs\\2c.Technical_Design_Document_Data.md](/docs/2c.Technical_Design_Document_Data.md) §6.8 for detailed table\nretention requirements.", "source_file": "../../docs/5.Policies/Data_Map.md", "category": "policies", "chunk_index": 2, "token_count": 84, "hash_short": "0572e7b4", "version": 1.0, "title": "FitVibe Data Map (GDPR Article 30 Snapshot)", "mtime": "2025-11-21T01:10:57.963665", "ingested_at": "2025-11-30T04:00:43.884797", "tags": ["policies", "md"]}
