{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_000", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "# OpenTelemetry Configuration Guide\n\n**Version:** 1.0\n**Last Updated:** 2025-11-11\n**Owner:** Observability Team\n\nThis document provides guidance for implementing and configuring OpenTelemetry distributed tracing in FitVibe.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 0, "token_count": 56, "hash_short": "7fce4b54", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_001", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "ion Guide\n\n**Version:** 1.0\n**Last Updated:** 2025-11-11\n**Owner:** Observability Team\n\nThis document provides guidance for implementing and configuring OpenTelemetry distributed tracing in FitVibe.\n\n---\n\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Current Status](#current-status)\n- [Architecture](#architecture)\n- [Implementation Steps](#implementation-steps)\n- [Sampling Configuration](#sampling-configuration)\n- [Dashboard Usage](#dashboard-usage)\n- [Troubleshooting](#troubleshooting)\n\n---\n\n## Overview\n\n### Purpose\n\nOpenTelemetry provides distributed tracing capabilities to:\n\n- Track request flow across services\n- Identify performance bottlenecks\n- Measure span durations and dependencies\n- Correlate traces with logs and metrics\n\n### Stack Components\n\n- **Tempo**: Trace storage backend (Grafana)\n- **OpenTelemetry SDK**: Instrumentation library\n- **Prometheus**: Metrics generated from traces (span metrics)\n- **Grafana**: Visualization and correlation\n\n---\n\n## Current Status\n\n**Implementation Status**: Partial", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 1, "token_count": 257, "hash_short": "e90dc67d", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_002", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "SDK**: Instrumentation library\n- **Prometheus**: Metrics generated from traces (span metrics)\n- **Grafana**: Visualization and correlation\n\n---\n\n## Current Status\n\n**Implementation Status**: Partial\n\n\n### Completed\n\n- ✅ Tempo deployed in docker-compose.dev.yml\n- ✅ Grafana datasource configured with Tempo\n- ✅ OTel tracing dashboard created\n- ✅ Metrics generator configured (span metrics → Prometheus)\n- ✅ Trace correlation with logs (Loki) and metrics (Prometheus)\n\n### Pending\n\n- ⏳ OpenTelemetry SDK implementation in backend (`apps/backend/src/observability/tracing.ts`)\n- ⏳ Auto-instrumentation for Express routes\n- ⏳ Custom span creation for database queries\n- ⏳ Context propagation across async operations\n\n---\n\n## Architecture\n\n### Trace Flow\n\n```\nHTTP Request\n    ↓\nExpress Middleware (OTel auto-instrument)\n    ↓\nRoute Handler\n    ↓\nService Layer (custom spans)\n    ↓\nRepository Layer (DB spans)\n    ↓\nDatabase Query\n    ↓\nTempo (trace storage)\n    ↓\nPrometheus (span metrics)\n    ↓\nGrafana (visualization)\n```", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 2, "token_count": 254, "hash_short": "508ec529", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_003", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "↓\nRoute Handler\n    ↓\nService Layer (custom spans)\n    ↓\nRepository Layer (DB spans)\n    ↓\nDatabase Query\n    ↓\nTempo (trace storage)\n    ↓\nPrometheus (span metrics)\n    ↓\nGrafana (visualization)\n```\n\n\n### Trace Attributes\n\nStandard attributes to include:\n\n- `http.method` - HTTP method (GET, POST, etc.)\n- `http.route` - Route template (/api/v1/users/:id)\n- `http.status_code` - Response status code\n- `http.user_agent` - Client user agent\n- `db.system` - Database type (postgresql)\n- `db.statement` - SQL query (sanitized)\n- `user.id` - Authenticated user ID (if available)\n- `error` - Error flag (boolean)\n- `error.message` - Error message (if error occurred)\n\n---\n\n## Implementation Steps\n\n### Step 1: Install OpenTelemetry SDK\n\n```bash\ncd apps/backend\nnpm install --save \\\n  @opentelemetry/sdk-node \\\n  @opentelemetry/auto-instrumentations-node \\\n  @opentelemetry/exporter-trace-otlp-http \\\n  @opentelemetry/resources \\\n  @opentelemetry/semantic-conventions\n```\n\n### Step 2: Implement Tracing Initialization\n\nUpdate `apps/backend/src/observability/tracing.ts`:\n\n```typescript\nimport { NodeSDK } from \"@opentelemetry/sdk-node\";\nimport { getNodeAutoInstrumentations } from \"@opentelemetry/auto-instrumentations-node\";\nimport { OTLPTraceExporter } from \"@opentelemetry/exporter-trace-otlp-http\";\nimport { Resource } from \"@opentelemetry/resources\";\nimport { SemanticResourceAttributes } from \"@opentelemetry/semantic-conventions\";\nimport { diag, DiagConsoleLogger, DiagLogLevel } from \"@opentelemetry/api\";\n\nconst consoleLogger = new DiagConsoleLogger();\ndiag.setLogger(consoleLogger, DiagLogLevel.INFO);\n\nexport function initializeTracing(): NodeSDK | null {\n  // Skip tracing in test environment\n  if (process.env.NODE_ENV === \"test\") {\n    return null;\n  }\n\n  const tempoUrl = process.env.TEMPO_ENDPOINT || \"http://localhost:4318/v1/traces\";\n\n  const sdk = new NodeSDK({\n    resource: new Resource({\n      [SemanticResourceAttributes.SERVICE_NAME]: \"fitvibe-backend\",\n      [SemanticResourceAttributes.SERVICE_VERSION]: process.env.APP_VERSION || \"1.0.0\",\n      [SemanticResourceAttributes.DEPLOYMENT_ENVIRONMENT]: process.env.NODE_ENV || \"development\",\n    }),\n    traceExporter: new OTLPTraceExporter({\n      url: tempoUrl,\n    }),\n    instrumentations: [\n      getNodeAutoInstrumentations({\n        // Disable file system instrumentation (too noisy)\n        \"@opentelemetry/instrumentation-fs\": {\n          enabled: false,\n        },\n        // Configure HTTP instrumentation\n        \"@opentelemetry/instrumentation-http\": {\n          ignoreIncomingRequestHook: (req) => {\n            // Ignore health checks and metrics\n            const url = req.url || \"\";\n            return url === \"/health\" || url === \"/metrics\";\n          },\n          requestHook: (span, request) => {\n            // Add custom attributes\n            span.setAttribute(\"http.client_ip\", request.socket.remoteAddress || \"unknown\");\n          },\n        },\n        // Configure Express instrumentation\n        \"@opentelemetry/instrumentation-express\": {\n          enabled: true,\n        },\n        // Configure PostgreSQL instrumentation\n        \"@opentelemetry/instrumentation-pg\": {\n          enabled: true,\n          enhancedDatabaseReporting: true,\n        },\n      }),\n    ],\n  });\n\n  sdk.start();\n\n  // Graceful shutdown\n  process.on(\"SIGTERM\", () => {\n    sdk\n      .shutdown()\n      .then(() => console.log(\"Tracing terminated\"))\n      .catch((error) => console.error(\"Error terminating tracing\", error));\n  });\n\n  return sdk;\n}\n```", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 3, "token_count": 880, "hash_short": "0daf11f2", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_004", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "SIGTERM\", () => {\n    sdk\n      .shutdown()\n      .then(() => console.log(\"Tracing terminated\"))\n      .catch((error) => console.error(\"Error terminating tracing\", error));\n  });\n\n  return sdk;\n}\n```\n\n\n### Step 3: Initialize in Server Entry Point\n\nUpdate `apps/backend/src/server.ts`:\n\n```typescript\nimport { initializeTracing } from \"./observability/tracing.js\";\n\n// Initialize tracing BEFORE importing the app\nconst tracingSdk = initializeTracing();\n\nimport { app } from \"./app.js\";\nimport { env } from \"./config/env.js\";\nimport { logger } from \"./config/logger.js\";\n\n// ...", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 4, "token_count": 144, "hash_short": "d2894d1a", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_005", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "e tracing BEFORE importing the app\nconst tracingSdk = initializeTracing();\n\nimport { app } from \"./app.js\";\nimport { env } from \"./config/env.js\";\nimport { logger } from \"./config/logger.js\";\n\n// ...", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 5, "token_count": 49, "hash_short": "361d86f6", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_006", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "rest of server setup\n```\n\n### Step 4: Add Custom Spans (Optional)\n\nFor critical operations, add custom spans:\n\n```typescript\nimport { trace } from \"@opentelemetry/api\";\n\nconst tracer = trace.getTracer(\"fitvibe-backend\");\n\nasync function processComplexOperation(userId: string) {\n  const span = tracer.startSpan(\"process-complex-operation\", {\n    attributes: {\n      \"user.id\": userId,\n      \"operation.type\": \"complex\",\n    },\n  });\n\n  try {\n    // Your operation logic\n    const result = await doSomething();\n\n    span.setAttribute(\"operation.result\", \"success\");\n    return result;\n  } catch (error) {\n    span.recordException(error as Error);\n    span.setAttribute(\"error\", true);\n    throw error;\n  } finally {\n    span.end();\n  }\n}\n```\n\n### Step 5: Environment Configuration\n\nAdd to `.env`:\n\n```bash\n# OpenTelemetry configuration\nTEMPO_ENDPOINT=http://tempo:4318/v1/traces\nOTEL_TRACES_SAMPLER=parentbased_traceidratio\nOTEL_TRACES_SAMPLER_ARG=0.1  # 10% sampling rate\n```\n\n---\n\n## Sampling Configuration", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 6, "token_count": 251, "hash_short": "edbca671", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_007", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "penTelemetry configuration\nTEMPO_ENDPOINT=http://tempo:4318/v1/traces\nOTEL_TRACES_SAMPLER=parentbased_traceidratio\nOTEL_TRACES_SAMPLER_ARG=0.1  # 10% sampling rate\n```\n\n---\n\n## Sampling Configuration\n\n\n### Sampling Strategies\n\n**1. Always On (Development)**\n\n```bash\nOTEL_TRACES_SAMPLER=always_on\n```\n\n- Traces 100% of requests\n- Use only in development/staging\n- High overhead in production\n\n**2. Trace ID Ratio (Production)**\n\n```bash\nOTEL_TRACES_SAMPLER=traceidratio\nOTEL_TRACES_SAMPLER_ARG=0.1  # 10%\n```\n\n- Samples a percentage of traces\n- Recommended for production\n- Adjust based on traffic volume\n\n**3.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 7, "token_count": 152, "hash_short": "b7003040", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_008", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "o (Production)**\n\n```bash\nOTEL_TRACES_SAMPLER=traceidratio\nOTEL_TRACES_SAMPLER_ARG=0.1  # 10%\n```\n\n- Samples a percentage of traces\n- Recommended for production\n- Adjust based on traffic volume\n\n**3. Parent-Based Trace ID Ratio (Recommended)**\n\n```bash\nOTEL_TRACES_SAMPLER=parentbased_traceidratio\nOTEL_TRACES_SAMPLER_ARG=0.1  # 10%\n```\n\n- Respects parent span sampling decisions\n- Good for distributed systems\n- Default recommendation\n\n### Adaptive Sampling (Future)\n\nFor high-traffic production:\n\n- Sample 100% of errors\n- Sample 100% of slow requests (p99)\n- Sample 1-10% of successful requests\n- Requires custom sampler implementation\n\n---\n\n## Dashboard Usage\n\n### Accessing the OTel Tracing Dashboard\n\n1. Open Grafana: http://localhost:3000\n2. Navigate to Dashboards → FitVibe OpenTelemetry Tracing\n3. Default time range: Last 6 hours\n\n### Key Panels\n\n**1. Trace Rate by Route**\n\n- Shows request volume per endpoint\n- Helps identify hotspots\n- Useful for capacity planning\n\n**2.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 8, "token_count": 245, "hash_short": "421b5b24", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_009", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "enTelemetry Tracing\n3. Default time range: Last 6 hours\n\n### Key Panels\n\n**1. Trace Rate by Route**\n\n- Shows request volume per endpoint\n- Helps identify hotspots\n- Useful for capacity planning\n\n**2. Span Duration (p95, p99)**\n\n- Latency percentiles by route\n- Identifies slow endpoints\n- Triggers for optimization\n\n**3. Slowest Spans (30m window)**\n\n- Table of slowest operations\n- Ranked by p95 duration\n- Priority for performance work\n\n**4. Error Rate by Trace**\n\n- Errors as percentage of traces\n- Broken down by span/route\n- Alerts on degradation\n\n**5. Trace Volume by Service**\n\n- Pie chart of trace distribution\n- Useful for microservices\n- Single service for now (backend)\n\n**6. Trace Sampling Rate**\n\n- Current sampling percentage\n- Gauge showing sample rate\n- Verify sampling config\n\n### Trace Exploration\n\n**View Individual Trace:**\n\n1. Click on any panel data point\n2. Select \"View Trace\" from context menu\n3. Explore span timeline and attributes\n\n**Correlate with Logs:**\n\n1.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 9, "token_count": 247, "hash_short": "db2e6300", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_010", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "fig\n\n### Trace Exploration\n\n**View Individual Trace:**\n\n1. Click on any panel data point\n2. Select \"View Trace\" from context menu\n3. Explore span timeline and attributes\n\n**Correlate with Logs:**\n\n1. From trace view, click \"Logs for this span\"\n2. Tempo automatically filters Loki logs by trace ID\n3. See correlated log entries\n\n**Correlate with Metrics:**\n\n1. From trace view, click \"Metrics for this span\"\n2. View Prometheus metrics for same time range\n3. See request rate, error rate, latency\n\n---\n\n## Troubleshooting\n\n### Issue: No Traces Appearing\n\n**Symptoms:**\n\n- Grafana shows no traces\n- OTel dashboard panels empty\n\n**Diagnosis:**\n\n```bash\n# Check Tempo is running\ndocker ps | grep tempo\n\n# Check Tempo logs\ndocker logs fitvibe_tempo\n\n# Verify backend is sending traces\ncurl http://localhost:4318/v1/traces\n```\n\n**Resolution:**\n\n1. Verify `TEMPO_ENDPOINT` environment variable is set\n2. Check Tempo configuration in `tempo-config.yml`\n3.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 10, "token_count": 236, "hash_short": "f3b1f444", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_011", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "erify backend is sending traces\ncurl http://localhost:4318/v1/traces\n```\n\n**Resolution:**\n\n1. Verify `TEMPO_ENDPOINT` environment variable is set\n2. Check Tempo configuration in `tempo-config.yml`\n3. Ensure OpenTelemetry SDK is initialized before Express app\n4. Check network connectivity between backend and Tempo\n\n### Issue: High Cardinality Warning\n\n**Symptoms:**\n\n- Prometheus warns about high cardinality\n- Slow dashboard queries\n- High memory usage\n\n**Diagnosis:**\n\n```bash\n# Check span metric cardinality\ncurl -s http://localhost:9090/api/v1/label/__name__/values | grep traces_spanmetrics\n```\n\n**Resolution:**\n\n1. Reduce sampling rate (lower `OTEL_TRACES_SAMPLER_ARG`)\n2. Limit span attribute cardinality (avoid UUIDs in labels)\n3. Use exemplars instead of full trace metrics\n4.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 11, "token_count": 196, "hash_short": "7aa01420", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_012", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "anmetrics\n```\n\n**Resolution:**\n\n1. Reduce sampling rate (lower `OTEL_TRACES_SAMPLER_ARG`)\n2. Limit span attribute cardinality (avoid UUIDs in labels)\n3. Use exemplars instead of full trace metrics\n4.", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 12, "token_count": 49, "hash_short": "5cbebb56", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_013", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "Aggregate spans by route template, not full URL\n\n### Issue: Missing Database Spans\n\n**Symptoms:**\n\n- HTTP spans appear, but no database query spans\n- Incomplete trace waterfalls\n\n**Diagnosis:**\n\n- Check PostgreSQL instrumentation is enabled\n- Verify `pg` package is being auto-instrumented\n\n**Resolution:**\n\n```typescript\n// Ensure pg instrumentation is enabled\n'@opentelemetry/instrumentation-pg': {\n  enabled: true,\n  enhancedDatabaseReporting: true,\n},\n```\n\n### Issue: Sampling Rate Too Low\n\n**Symptoms:**\n\n- Few traces captured\n- Missing important requests\n- Dashboard shows < 1% sampling\n\n**Resolution:**\nIncrease sampling rate (adjust for traffic):\n\n```bash\n# Development: 100%\nOTEL_TRACES_SAMPLER_ARG=1.0\n\n# Staging: 50%\nOTEL_TRACES_SAMPLER_ARG=0.5\n\n# Production low traffic: 10%\nOTEL_TRACES_SAMPLER_ARG=0.1\n\n# Production high traffic: 1%\nOTEL_TRACES_SAMPLER_ARG=0.01\n```\n\n---\n\n## Performance Considerations\n\n### Overhead\n\nOpenTelemetry adds minimal overhead when configured correctly:\n\n| Component            | Overhead | Notes                        |\n| -------------------- | -------- | ---------------------------- |\n| Auto-instrumentation | 1-3%     | CPU overhead                 |\n| Span creation        | < 1ms    | Per span                     |\n| Exporter             | 2-5%     | Network + serialization      |\n| **Total**            | **3-8%** | Acceptable for observability |", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 13, "token_count": 348, "hash_short": "476b1776", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
{"chunk_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration_chunk_014", "doc_id": ".._.._docs_5.Policies_5.a.Ops_OpenTelemetry_Configuration", "text": "Span creation        | < 1ms    | Per span                     |\n| Exporter             | 2-5%     | Network + serialization      |\n| **Total**            | **3-8%** | Acceptable for observability |\n\n\n### Optimization Tips\n\n1. **Use appropriate sampling**: Don't trace 100% in production\n2. **Batch export**: Configure batch span processor (default: every 5s or 512 spans)\n3. **Limit span attributes**: Only add essential attributes\n4. **Avoid synchronous export**: Use async OTLP exporter\n5. **Monitor exporter queue**: Alert on dropped spans\n\n---\n\n## References\n\n- [OpenTelemetry JavaScript Documentation](https://opentelemetry.io/docs/instrumentation/js/)\n- [Tempo Documentation](https://grafana.com/docs/tempo/latest/)\n- [OpenTelemetry Semantic Conventions](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/)\n- [Grafana Tempo Best Practices](https://grafana.com/docs/tempo/latest/operations/best-practices/)", "source_file": "../../docs/5.Policies/5.a.Ops/OpenTelemetry_Configuration.md", "category": "policies", "chunk_index": 14, "token_count": 235, "hash_short": "c1abdffe", "version": 1.0, "title": "OpenTelemetry Configuration Guide", "mtime": "2025-11-15T07:01:39.662141", "ingested_at": "2025-11-30T04:00:44.012956", "tags": ["policies", "md"]}
