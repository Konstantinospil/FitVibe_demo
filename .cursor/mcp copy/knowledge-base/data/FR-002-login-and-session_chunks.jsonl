{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session_chunk_000", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session", "text": "# FR-002 — Login & Session\n\n---\n\n**Requirement ID**: FR-002  \n**Type**: Functional Requirement  \n**Title**: Login & Session  \n**Status**: Done  \n**Priority**: High  \n**Gate**: GOLD  \n**Owner**: ENG/QA  \n**Created**: 2025-11-21  \n**Updated**: 2025-01-21\n\n---\n\n\n## Executive Summary\n\nThis functional requirement specifies login & session capabilities that the system must provide.\n\nProvide secure authentication and session management with token-based access control.\n\n## Business Context\n\n- **Business Objective**: Provide secure authentication and session management with token-based access control.\n- **Success Criteria**: Users can securely log in, maintain sessions, and log out with proper token invalidation.", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-002-login-and-session.md", "category": "requirements", "chunk_index": 0, "token_count": 178, "hash_short": "c23470f6", "version": 1.0, "title": "FR-002 — Login & Session", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.169324", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session_chunk_001", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session", "text": "Provide secure authentication and session management with token-based access control.\n- **Success Criteria**: Users can securely log in, maintain sessions, and log out with proper token invalidation.", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-002-login-and-session.md", "category": "requirements", "chunk_index": 1, "token_count": 49, "hash_short": "daec1936", "version": 1.0, "title": "FR-002 — Login & Session", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.169324", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session_chunk_002", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session", "text": "- **Target Users**: All authenticated users\n\n## Traceability\n\n- **PRD Reference**: PRD §Auth\n- **TDD Reference**: TDD §Sessions\n\n## Functional Requirements\n\n### Authentication\n\nThe system shall provide secure authentication with the following capabilities:\n\n- **Token-Based Authentication**: RS256 JWT tokens with proper TTL (access ≤15m, refresh ≤30d)\n- **Secure Cookie Configuration**: HttpOnly, Secure, SameSite flags per environment\n- **No Secret Storage**: Local storage not used for secrets\n\n### Session Management\n\n- **Token Refresh**: Refresh token rotation with replay detection\n- **Logout**: Server-side token invalidation within ≤1s\n- **Session Locking**: Reused rotated tokens trigger session lock and security event logging\n\n### Security Features\n\n- **Account Lockout**: After 10 failed attempts per 15m/IP+account, auto-unlock after 15m\n- **No User Enumeration**: Generic error messages, timing variance ≤5ms\n- **2FA Support**: Optional TOTP with QR enrollment, backup codes (10 one-time)", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-002-login-and-session.md", "category": "requirements", "chunk_index": 2, "token_count": 250, "hash_short": "f0aacd75", "version": 1.0, "title": "FR-002 — Login & Session", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.169324", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session_chunk_003", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session", "text": "empts per 15m/IP+account, auto-unlock after 15m\n- **No User Enumeration**: Generic error messages, timing variance ≤5ms\n- **2FA Support**: Optional TOTP with QR enrollment, backup codes (10 one-time)\n\n\n## Related Epics\n\n- [E11: Authentication & Registration](../b.Epics/E11-authentication-and-registration.md)\n\n## Dependencies\n\n### Technical Dependencies\n\n- JWT library (RS256)\n- Session storage\n- 2FA library (TOTP)\n\n### Feature Dependencies\n\n- [FR-001: User Registration](./FR-001-user-registration.md) - User accounts must exist\n\n## Constraints\n\n### Technical Constraints\n\n- Access token TTL ≤15m\n- Refresh token TTL ≤30d\n- Account lockout: 10 attempts per 15m\n- Timing variance ≤5ms for user enumeration prevention\n\n### Business Constraints\n\n- Secure cookie configuration required\n- 2FA must be optional (not mandatory)\n\n## Assumptions\n\n- Users understand token-based authentication\n- Secure cookie support in browsers\n- 2FA devices/apps available to users\n\n## Risks & Issues\n\n- **Risk**: Token expiration may interrupt user sessions\n- **Risk**: Account lockout may prevent legitimate access\n- **Risk**: 2FA setup complexity may deter users", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-002-login-and-session.md", "category": "requirements", "chunk_index": 3, "token_count": 286, "hash_short": "7fb49f20", "version": 1.0, "title": "FR-002 — Login & Session", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.169324", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session_chunk_004", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-002-login-and-session", "text": "ilable to users\n\n## Risks & Issues\n\n- **Risk**: Token expiration may interrupt user sessions\n- **Risk**: Account lockout may prevent legitimate access\n- **Risk**: 2FA setup complexity may deter users\n\n\n## Open Questions\n\n- None\n\n## Related Requirements\n\n- [FR-001: User Registration](./FR-001-user-registration.md) - User account creation\n- [FR-003: Auth-Wall](./FR-003-authwall.md) - Protected route access\n- [NFR-001: Security](./NFR-001-security.md) - Security requirements\n\n---\n\n**Last Updated**: 2025-01-21  \n**Next Review**: 2025-02-21", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-002-login-and-session.md", "category": "requirements", "chunk_index": 4, "token_count": 135, "hash_short": "6c2f4f1c", "version": 1.0, "title": "FR-002 — Login & Session", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.169324", "tags": ["requirements", "md"]}
