{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_000", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "# Acceptance Criteria for All User Stories\n\n**Generated**: 2025-01-21\n\n---\n\n\n## US-1.1\n\n### US-1.1-AC01\n\n**Criterion**: Users can edit alias, weight, fitness level, and training frequency via API endpoint PATCH /api/v1/users/me within ≤500ms response time.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: API response times, DB snapshot, UI screenshots\n\n### US-1.1-AC02\n\n**Criterion**: Profile field validation: alias max 32 chars, weight range 20-400 kg (or equivalent in lbs), fitness level enum (beginner/intermediate/advanced/elite), training frequency enum (rarely/1_2_per_week/3_4_per_week/5_plus_per_week). Invalid values rejected with 422 and clear error messages.\n\n- **Test Method**: Unit + API negative\n- **Evidence Required**: Validation test results, error message samples\n\n### US-1.1-AC03\n\n**Criterion**: Immutable fields (date_of_birth, gender) cannot be modified; attempts return 403 Forbidden with error code E.USER.IMMUTABLE_FIELD.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 0, "token_count": 240, "hash_short": "dba232bf", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_001", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "est results, error message samples\n\n### US-1.1-AC03\n\n**Criterion**: Immutable fields (date_of_birth, gender) cannot be modified; attempts return 403 Forbidden with error code E.USER.IMMUTABLE_FIELD.\n\n- **Test Method**: API negative\n- **Evidence Required**: HTTP traces, error responses\n\n### US-1.1-AC04\n\n**Criterion**: Weight is stored internally as kg (weight_kg) regardless of user's preferred unit; UI converts for display based on user's weight_unit preference.\n\n- **Test Method**: Integration\n- **Evidence Required**: DB records, UI conversion tests\n\n### US-1.1-AC05\n\n**Criterion**: Profile changes are audit-logged with who/when/what; state history records created for each field change.\n\n- **Test Method**: Integration\n- **Evidence Required**: Audit log excerpts, state history records\n\n---\n\n## US-1.2\n\n### US-1.2-AC01\n\n**Criterion**: Users can upload avatar images via POST /api/v1/users/me/avatar; accepted formats: JPEG, PNG, WebP; max size 5MB; rejected with 422 if invalid.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 1, "token_count": 246, "hash_short": "ec7c6ca5", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_002", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "cords\n\n---\n\n## US-1.2\n\n### US-1.2-AC01\n\n**Criterion**: Users can upload avatar images via POST /api/v1/users/me/avatar; accepted formats: JPEG, PNG, WebP; max size 5MB; rejected with 422 if invalid.\n\n- **Test Method**: Integration\n- **Evidence Required**: Upload logs, error responses for invalid files\n\n### US-1.2-AC02\n\n**Criterion**: Uploaded avatars are scanned for malware using antivirus service; infected files rejected with E.UPLOAD.MALWARE_DETECTED and audit logged.\n\n- **Test Method**: Integration\n- **Evidence Required**: AV scan logs, EICAR test file rejection\n\n### US-1.2-AC03\n\n**Criterion**: System generates 128×128 pixel preview image from uploaded avatar within ≤2s; preview stored and served at /users/avatar/:id endpoint.\n\n- **Test Method**: Integration\n- **Evidence Required**: Preview images, performance metrics, storage verification\n\n### US-1.2-AC04\n\n**Criterion**: Users without avatars see a default placeholder image; placeholder is accessible and properly sized.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 2, "token_count": 247, "hash_short": "51be8f15", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_003", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "red**: Preview images, performance metrics, storage verification\n\n### US-1.2-AC04\n\n**Criterion**: Users without avatars see a default placeholder image; placeholder is accessible and properly sized.\n\n- **Test Method**: E2E\n- **Evidence Required**: UI screenshots showing placeholder\n\n### US-1.2-AC05\n\n**Criterion**: Avatar upload is idempotent via Idempotency-Key header; duplicate uploads return same result with Idempotent-Replayed header.\n\n- **Test Method**: Integration\n- **Evidence Required**: Idempotency test results, HTTP headers\n\n---\n\n## US-1.3\n\n### US-1.3-AC01\n\n**Criterion**: Unit tests cover profile field validation, immutable field protection, and weight unit conversion with ≥90% code coverage.\n\n- **Test Method**: Unit\n- **Evidence Required**: Test coverage reports\n\n### US-1.3-AC02\n\n**Criterion**: Integration tests verify profile update API, avatar upload flow, and error handling scenarios.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 3, "token_count": 227, "hash_short": "30d021d7", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_004", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "- **Test Method**: Unit\n- **Evidence Required**: Test coverage reports\n\n### US-1.3-AC02\n\n**Criterion**: Integration tests verify profile update API, avatar upload flow, and error handling scenarios.\n\n- **Test Method**: Integration\n- **Evidence Required**: Integration test results\n\n### US-1.3-AC03\n\n**Criterion**: E2E tests verify complete profile editing workflow including form validation, submission, and persistence.\n\n- **Test Method**: E2E\n- **Evidence Required**: E2E test results, UI screenshots\n\n---\n\n## US-10.1\n\n### US-10.1-AC01\n\n**Criterion**: Automated daily encrypted backups of all critical data (users, sessions, exercises, points); backups stored in secure location.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Backup job logs, backup storage verification\n\n### US-10.1-AC02\n\n**Criterion**: Backup encryption verified; backup integrity checksums validated; backup rotation policy (retain 30 days daily, 12 months monthly).", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 4, "token_count": 237, "hash_short": "7290b2c0", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_005", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ogs, backup storage verification\n\n### US-10.1-AC02\n\n**Criterion**: Backup encryption verified; backup integrity checksums validated; backup rotation policy (retain 30 days daily, 12 months monthly).\n\n- **Test Method**: Ops review\n- **Evidence Required**: Encryption verification, rotation policy\n\n---\n\n## US-10.2\n\n### US-10.2-AC01\n\n**Criterion**: Quarterly backup restore tests performed; restore procedure documented; restore RTO ≤4h, RPO ≤24h verified.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Restore test logs, RTO/RPO verification\n\n### US-10.2-AC02\n\n**Criterion**: Restore tests include data integrity verification; restored data matches source; restore procedure tested end-to-end.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Restore test results, integrity verification\n\n---\n\n## US-10.3\n\n### US-10.3-AC01\n\n**Criterion**: Disaster recovery procedures documented in runbook; DR scenarios tested (regional failover, data center outage); RTO ≤4h, RPO ≤24h.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 5, "token_count": 246, "hash_short": "2ca17d5e", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_006", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ty verification\n\n---\n\n## US-10.3\n\n### US-10.3-AC01\n\n**Criterion**: Disaster recovery procedures documented in runbook; DR scenarios tested (regional failover, data center outage); RTO ≤4h, RPO ≤24h.\n\n- **Test Method**: Ops review\n- **Evidence Required**: DR runbook, DR test results\n\n### US-10.3-AC02\n\n**Criterion**: DR procedures include communication plan, escalation paths, and rollback procedures; procedures reviewed quarterly.\n\n- **Test Method**: Ops review\n- **Evidence Required**: DR documentation, review records\n\n---\n\n## US-10.4\n\n### US-10.4-AC01\n\n**Criterion**: Health check endpoint GET /api/v1/health returns 200 with service status (database, storage, external services); health checks used by load balancer.\n\n- **Test Method**: Integration\n- **Evidence Required**: Health check responses, load balancer configuration\n\n### US-10.4-AC02\n\n**Criterion**: Health check includes readiness and liveness probes; unhealthy services removed from load balancer; health status monitored.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 6, "token_count": 247, "hash_short": "ba37fa5f", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_007", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "responses, load balancer configuration\n\n### US-10.4-AC02\n\n**Criterion**: Health check includes readiness and liveness probes; unhealthy services removed from load balancer; health status monitored.\n\n- **Test Method**: Integration\n- **Evidence Required**: Health check implementation, monitoring verification\n\n---\n\n## US-10.5\n\n### US-10.5-AC01\n\n**Criterion**: Read-only mode implemented via system configuration; read-only mode prevents all write operations (POST, PATCH, DELETE return 503).\n\n- **Test Method**: Integration\n- **Evidence Required**: Read-only mode tests, maintenance mode verification\n\n### US-10.5-AC02\n\n**Criterion**: Read-only mode can be toggled via admin endpoint or environment variable; mode change takes effect within ≤10s.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 7, "token_count": 186, "hash_short": "017d1315", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_008", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "Read-only mode tests, maintenance mode verification\n\n### US-10.5-AC02\n\n**Criterion**: Read-only mode can be toggled via admin endpoint or environment variable; mode change takes effect within ≤10s.\n\n- **Test Method**: Integration\n- **Evidence Required**: Mode toggle tests, activation timing\n\n---\n\n## US-11.1\n\n### US-11.1-AC01\n\n**Criterion**: Duplicate 2FA routes removed from auth.routes.ts (lines 99-128); twofa.controller.ts and twofa.service.ts deleted if unused.\n\n- **Test Method**: Code review\n- **Evidence Required**: Code diff, route conflict resolution\n\n### US-11.1-AC02\n\n**Criterion**: Only two-factor.controller.ts and two-factor.routes.ts remain; all 2FA functionality uses single implementation; tests updated.\n\n- **Test Method**: Code review\n- **Evidence Required**: Code verification, test updates\n\n---\n\n## US-11.2\n\n### US-11.2-AC01\n\n**Criterion**: All 62 skipped tests reviewed; tests either fixed, documented (with reason), or removed; test coverage maintained or improved.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 8, "token_count": 247, "hash_short": "ad2b9a20", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_009", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "cation, test updates\n\n---\n\n## US-11.2\n\n### US-11.2-AC01\n\n**Criterion**: All 62 skipped tests reviewed; tests either fixed, documented (with reason), or removed; test coverage maintained or improved.\n\n- **Test Method**: Code review\n- **Evidence Required**: Skipped test review log, test fixes\n\n### US-11.2-AC02\n\n**Criterion**: Skipped test reasons documented in test files or test plan; intentional skips justified; no tests skipped without reason.\n\n- **Test Method**: Code review\n- **Evidence Required**: Test documentation, skip reason verification\n\n---\n\n## US-11.3\n\n### US-11.3-AC01\n\n**Criterion**: Timer cleanup standardized: tests using jest.useFakeTimers() restore in afterEach; no global timer clearing; pattern documented.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 9, "token_count": 182, "hash_short": "b2c3d88f", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_010", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "eason verification\n\n---\n\n## US-11.3\n\n### US-11.3-AC01\n\n**Criterion**: Timer cleanup standardized: tests using jest.useFakeTimers() restore in afterEach; no global timer clearing; pattern documented.\n\n- **Test Method**: Code review\n- **Evidence Required**: Timer cleanup pattern, test updates\n\n---\n\n## US-11.4\n\n### US-11.4-AC01\n\n**Criterion**: Database connection cleanup verified: all tests that create connections close them in afterEach/afterAll; no open handles detected.\n\n- **Test Method**: Integration\n- **Evidence Required**: Connection cleanup tests, open handle verification\n\n---\n\n## US-11.5\n\n### US-11.5-AC01\n\n**Criterion**: All public APIs have JSDoc comments with parameter descriptions, return types, and examples; documentation coverage ≥80%.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 10, "token_count": 188, "hash_short": "a860e33a", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_011", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "open handle verification\n\n---\n\n## US-11.5\n\n### US-11.5-AC01\n\n**Criterion**: All public APIs have JSDoc comments with parameter descriptions, return types, and examples; documentation coverage ≥80%.\n\n- **Test Method**: Code review\n- **Evidence Required**: JSDoc coverage report, documentation samples\n\n### US-11.5-AC02\n\n**Criterion**: Complex business logic has inline comments explaining rationale; code is self-documenting where possible; README files updated.\n\n- **Test Method**: Code review\n- **Evidence Required**: Code documentation review, README updates\n\n---\n\n## US-2.1\n\n### US-2.1-AC01\n\n**Criterion**: Users can create exercises via POST /api/v1/exercises with required fields (name, type_code) and optional fields (muscle_group, equipment, tags, description); exercise saved within ≤500ms.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 11, "token_count": 199, "hash_short": "a2b497d0", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_012", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "terion**: Users can create exercises via POST /api/v1/exercises with required fields (name, type_code) and optional fields (muscle_group, equipment, tags, description); exercise saved within ≤500ms.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: DB snapshot, UI screenshots, API response times\n\n### US-2.1-AC02\n\n**Criterion**: Users can update their own exercises via PATCH /api/v1/exercises/:id; edits preserve historical accuracy; unauthorized edits return 403.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Update tests, access control verification\n\n### US-2.1-AC03\n\n**Criterion**: Exercises can be archived (soft delete) via DELETE /api/v1/exercises/:id; archived exercises have archived_at timestamp set; they are hidden from selectors but retained in database.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 12, "token_count": 199, "hash_short": "f6c482f3", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_013", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "**Criterion**: Exercises can be archived (soft delete) via DELETE /api/v1/exercises/:id; archived exercises have archived_at timestamp set; they are hidden from selectors but retained in database.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: DB records, UI showing archived exercises not in selectors\n\n### US-2.1-AC04\n\n**Criterion**: Exercise visibility model: private (default, owner_id = user_id) or public (is_public = true); private exercises only visible to creator.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Access control tests, UI screenshots\n\n### US-2.1-AC05\n\n**Criterion**: Exercise name uniqueness enforced per owner: (owner_id, normalized_name) unique constraint; duplicate names rejected with 409 CONFLICT.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 13, "token_count": 189, "hash_short": "eda8f2b8", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_014", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "control tests, UI screenshots\n\n### US-2.1-AC05\n\n**Criterion**: Exercise name uniqueness enforced per owner: (owner_id, normalized_name) unique constraint; duplicate names rejected with 409 CONFLICT.\n\n- **Test Method**: Unit + API negative\n- **Evidence Required**: Uniqueness test results, error responses\n\n---\n\n## US-2.2\n\n### US-2.2-AC01\n\n**Criterion**: Users can search public exercises via GET /api/v1/exercises?is_public=true&q=searchterm with pagination (default 20, max 100).\n\n- **Test Method**: E2E\n- **Evidence Required**: Search results, API response times\n\n### US-2.2-AC02\n\n**Criterion**: Exercise search supports filtering by category (type_code), muscle_group, equipment, and tags; filters can be combined.\n\n- **Test Method**: E2E\n- **Evidence Required**: Filter UI screenshots, filtered search results\n\n### US-2.2-AC03\n\n**Criterion**: Search results are sorted by relevance (name match) or date; empty results return empty array with 200 status.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 14, "token_count": 239, "hash_short": "7db4126c", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_015", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ired**: Filter UI screenshots, filtered search results\n\n### US-2.2-AC03\n\n**Criterion**: Search results are sorted by relevance (name match) or date; empty results return empty array with 200 status.\n\n- **Test Method**: E2E\n- **Evidence Required**: Search result ordering, empty result handling\n\n---\n\n## US-2.3\n\n### US-2.3-AC01\n\n**Criterion**: When an exercise is used in a session, exercise name is stored as snapshot in session_exercises.exercise_name field; snapshot persists even if exercise is later modified or archived.\n\n- **Test Method**: Integration\n- **Evidence Required**: DB records showing snapshot preservation, exercise modification tests\n\n### US-2.3-AC02\n\n**Criterion**: Historical sessions display exercise name from snapshot, not current exercise name; exercise changes do not affect past session records.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 15, "token_count": 205, "hash_short": "3264d36c", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_016", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "exercise modification tests\n\n### US-2.3-AC02\n\n**Criterion**: Historical sessions display exercise name from snapshot, not current exercise name; exercise changes do not affect past session records.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Historical session display tests, exercise modification verification\n\n---\n\n## US-2.4\n\n### US-2.4-AC01\n\n**Criterion**: Administrators can create global exercises (owner_id = null) via POST /api/v1/exercises with admin role; global exercises are accessible to all users.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Admin UI screenshots, access control tests\n\n### US-2.4-AC02\n\n**Criterion**: Administrators can edit and archive global exercises; non-admin users cannot modify global exercises (403 Forbidden).", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 16, "token_count": 196, "hash_short": "86bdf872", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_017", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "d**: Admin UI screenshots, access control tests\n\n### US-2.4-AC02\n\n**Criterion**: Administrators can edit and archive global exercises; non-admin users cannot modify global exercises (403 Forbidden).\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Admin edit tests, non-admin access denial\n\n---\n\n## US-2.5\n\n### US-2.5-AC01\n\n**Criterion**: Exercise selector in Planner and Logger displays user's personal exercises, global exercises, and public exercises; archived exercises are excluded.\n\n- **Test Method**: E2E\n- **Evidence Required**: Exercise selector UI screenshots, exercise list verification\n\n### US-2.5-AC02\n\n**Criterion**: Exercise selector supports search and filtering; selected exercise is added to session with proper reference.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 17, "token_count": 188, "hash_short": "b0579ec7", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_018", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ise selector UI screenshots, exercise list verification\n\n### US-2.5-AC02\n\n**Criterion**: Exercise selector supports search and filtering; selected exercise is added to session with proper reference.\n\n- **Test Method**: E2E\n- **Evidence Required**: Selector search tests, exercise addition verification\n\n---\n\n## US-2.6\n\n### US-2.6-AC01\n\n**Criterion**: Unit tests cover exercise CRUD operations, archival, visibility model, and uniqueness constraints with ≥90% code coverage.\n\n- **Test Method**: Unit\n- **Evidence Required**: Test coverage reports\n\n### US-2.6-AC02\n\n**Criterion**: Integration tests verify exercise creation, editing, archival, search, and access control scenarios.\n\n- **Test Method**: Integration\n- **Evidence Required**: Integration test results\n\n### US-2.6-AC03\n\n**Criterion**: E2E tests verify complete exercise management workflow including creation, search, selection, and archival.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 18, "token_count": 225, "hash_short": "0be00d6a", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_019", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "gration\n- **Evidence Required**: Integration test results\n\n### US-2.6-AC03\n\n**Criterion**: E2E tests verify complete exercise management workflow including creation, search, selection, and archival.\n\n- **Test Method**: E2E\n- **Evidence Required**: E2E test results, UI screenshots\n\n---\n\n## US-3.1\n\n### US-3.1-AC01\n\n**Criterion**: Authenticated users can access public feed via GET /api/v1/feed?scope=public with pagination (default 20 items per page, max 100); feed returns public sessions only.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Feed API responses, pagination tests, UI screenshots\n\n### US-3.1-AC02\n\n**Criterion**: Feed supports search via ?q=keyword parameter; search matches session titles, exercise names, and user aliases.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 19, "token_count": 189, "hash_short": "35bf492b", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_020", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "Feed API responses, pagination tests, UI screenshots\n\n### US-3.1-AC02\n\n**Criterion**: Feed supports search via ?q=keyword parameter; search matches session titles, exercise names, and user aliases.\n\n- **Test Method**: E2E\n- **Evidence Required**: Search functionality tests, search result screenshots\n\n### US-3.1-AC03\n\n**Criterion**: Feed supports sorting by date (default), popularity (likes), and relevance; sort parameter ?sort=date|popularity|relevance.\n\n- **Test Method**: E2E\n- **Evidence Required**: Sort functionality tests, sorted feed screenshots\n\n### US-3.1-AC04\n\n**Criterion**: Feed response time p95 ≤400ms per PRD performance targets; feed is cached for 30s via NGINX edge caching.\n\n- **Test Method**: Performance\n- **Evidence Required**: Performance metrics, cache hit ratio\n\n---\n\n## US-3.2\n\n### US-3.2-AC01\n\n**Criterion**: Users can toggle session visibility (private/public) via PATCH /api/v1/sessions/:id with visibility field; default is private.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 20, "token_count": 241, "hash_short": "063f726d", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_021", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "trics, cache hit ratio\n\n---\n\n## US-3.2\n\n### US-3.2-AC01\n\n**Criterion**: Users can toggle session visibility (private/public) via PATCH /api/v1/sessions/:id with visibility field; default is private.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Visibility toggle tests, API responses\n\n### US-3.2-AC02\n\n**Criterion**: Switching session from private to public makes it visible in feed within ≤2s; switching from public to private removes it from feed immediately; past private data never leaked.\n\n- **Test Method**: Integration + Security\n- **Evidence Required**: Privacy tests, data leakage verification, feed update timing\n\n---\n\n## US-3.3\n\n### US-3.3-AC01\n\n**Criterion**: Users can like/unlike public sessions via POST /api/v1/feed/item/:feedItemId/like and DELETE /api/v1/feed/item/:feedItemId/like; like action is idempotent.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 21, "token_count": 211, "hash_short": "d874e51e", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_022", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "## US-3.3\n\n### US-3.3-AC01\n\n**Criterion**: Users can like/unlike public sessions via POST /api/v1/feed/item/:feedItemId/like and DELETE /api/v1/feed/item/:feedItemId/like; like action is idempotent.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Like button tests, API responses, idempotency verification\n\n### US-3.3-AC02\n\n**Criterion**: Like counts update in real-time within ≤500ms; like count displayed on feed items and session details.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Count update tests, UI screenshots, API response times\n\n### US-3.3-AC03\n\n**Criterion**: Users can bookmark/unbookmark sessions via POST /api/v1/sessions/:id/bookmark and DELETE /api/v1/sessions/:id/bookmark; bookmarks are idempotent.\n\n- **Test Method**: E2E\n- **Evidence Required**: Bookmark UI screenshots, bookmark functionality tests\n\n### US-3.3-AC04\n\n**Criterion**: Users can view their bookmarked sessions via GET /api/v1/users/me/bookmarks with pagination.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 22, "token_count": 245, "hash_short": "d0e66638", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_023", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "idence Required**: Bookmark UI screenshots, bookmark functionality tests\n\n### US-3.3-AC04\n\n**Criterion**: Users can view their bookmarked sessions via GET /api/v1/users/me/bookmarks with pagination.\n\n- **Test Method**: E2E\n- **Evidence Required**: Bookmark collection view tests, UI screenshots\n\n---\n\n## US-3.4\n\n### US-3.4-AC01\n\n**Criterion**: Users can comment on public sessions via POST /api/v1/feed/item/:feedItemId/comments with body (plain text, max 500 chars); comments are idempotent.\n\n- **Test Method**: E2E\n- **Evidence Required**: Comment UI screenshots, comment creation tests\n\n### US-3.4-AC02\n\n**Criterion**: Comments are displayed with author info, timestamp, and proper formatting; comments list paginated (default 20 per page).", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 23, "token_count": 185, "hash_short": "ba68cc81", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_024", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ment UI screenshots, comment creation tests\n\n### US-3.4-AC02\n\n**Criterion**: Comments are displayed with author info, timestamp, and proper formatting; comments list paginated (default 20 per page).\n\n- **Test Method**: E2E\n- **Evidence Required**: Comment display tests, comment list screenshots\n\n### US-3.4-AC03\n\n**Criterion**: Comment owners and session owners can delete comments via DELETE /api/v1/comments/:commentId; deleted comments are soft-deleted (deleted_at set).\n\n- **Test Method**: E2E\n- **Evidence Required**: Comment deletion tests, access control verification\n\n### US-3.4-AC04\n\n**Criterion**: Comment rate limiting: 20 comments per hour per user; exceeding limit returns 429 with Retry-After header.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 24, "token_count": 178, "hash_short": "e6fc6228", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_025", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "red**: Comment deletion tests, access control verification\n\n### US-3.4-AC04\n\n**Criterion**: Comment rate limiting: 20 comments per hour per user; exceeding limit returns 429 with Retry-After header.\n\n- **Test Method**: Integration\n- **Evidence Required**: Rate limit tests, HTTP headers\n\n---\n\n## US-3.5\n\n### US-3.5-AC01\n\n**Criterion**: Users can follow/unfollow other users via POST /api/v1/users/:alias/follow and DELETE /api/v1/users/:alias/follow; users cannot follow themselves (422 error).\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Follow button tests, follower count tests, self-follow prevention\n\n### US-3.5-AC02\n\n**Criterion**: Follower and following counts update correctly; counts displayed on user profiles; GET /api/v1/users/:alias/followers and /following return paginated lists.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 25, "token_count": 203, "hash_short": "0fb80645", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_026", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "evention\n\n### US-3.5-AC02\n\n**Criterion**: Follower and following counts update correctly; counts displayed on user profiles; GET /api/v1/users/:alias/followers and /following return paginated lists.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Follower count tests, UI screenshots, API responses\n\n### US-3.5-AC03\n\n**Criterion**: Follow rate limiting: 50 follows per day per user; exceeding limit returns 429.\n\n- **Test Method**: Integration\n- **Evidence Required**: Rate limit tests\n\n---\n\n## US-3.6\n\n### US-3.6-AC01\n\n**Criterion**: Users can clone public sessions via POST /api/v1/sessions/:id/clone or POST /api/v1/feed/session/:sessionId/clone; cloned session created as planned session for current user.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 26, "token_count": 181, "hash_short": "4b18c1a9", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_027", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": ".6-AC01\n\n**Criterion**: Users can clone public sessions via POST /api/v1/sessions/:id/clone or POST /api/v1/feed/session/:sessionId/clone; cloned session created as planned session for current user.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Clone functionality tests, cloned session verification\n\n### US-3.6-AC02\n\n**Criterion**: Cloned sessions preserve attribution: source_session_id or metadata field contains original session ID and creator info; attribution visible in UI.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Attribution verification, UI screenshots showing attribution\n\n### US-3.6-AC03\n\n**Criterion**: Users can modify cloned sessions (title, date, exercises, sets); modifications do not affect original session.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 27, "token_count": 191, "hash_short": "8f8cfbdb", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_028", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ution verification, UI screenshots showing attribution\n\n### US-3.6-AC03\n\n**Criterion**: Users can modify cloned sessions (title, date, exercises, sets); modifications do not affect original session.\n\n- **Test Method**: E2E\n- **Evidence Required**: Modification tests, original session preservation\n\n---\n\n## US-3.7\n\n### US-3.7-AC01\n\n**Criterion**: Users can report inappropriate content (sessions or comments) via POST /api/v1/feed/report with reason and details; reports are idempotent.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Report UI screenshots, report creation tests\n\n### US-3.7-AC02\n\n**Criterion**: Reports appear in admin moderation queue; admins can view reports via GET /api/v1/admin/reports with filtering and pagination.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Admin queue tests, report list screenshots\n\n### US-3.7-AC03\n\n**Criterion**: Report rate limiting: 10 reports per day per user; exceeding limit returns 429.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 28, "token_count": 243, "hash_short": "4f9fb161", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_029", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "Integration + E2E\n- **Evidence Required**: Admin queue tests, report list screenshots\n\n### US-3.7-AC03\n\n**Criterion**: Report rate limiting: 10 reports per day per user; exceeding limit returns 429.\n\n- **Test Method**: Integration\n- **Evidence Required**: Rate limit tests\n\n---\n\n## US-3.8\n\n### US-3.8-AC01\n\n**Criterion**: Unit tests cover like, bookmark, comment, follow, and clone operations with ≥90% code coverage.\n\n- **Test Method**: Unit\n- **Evidence Required**: Test coverage reports\n\n### US-3.8-AC02\n\n**Criterion**: Integration tests verify feed access, social interactions, cloning, and reporting scenarios.\n\n- **Test Method**: Integration\n- **Evidence Required**: Integration test results\n\n### US-3.8-AC03\n\n**Criterion**: E2E tests verify complete social workflow including feed browsing, liking, commenting, following, and cloning.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 29, "token_count": 210, "hash_short": "e299b2d7", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_030", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "tion\n- **Evidence Required**: Integration test results\n\n### US-3.8-AC03\n\n**Criterion**: E2E tests verify complete social workflow including feed browsing, liking, commenting, following, and cloning.\n\n- **Test Method**: E2E\n- **Evidence Required**: E2E test results, UI screenshots\n\n---\n\n## US-4.1\n\n### US-4.1-AC01\n\n**Criterion**: Users can create training plans via POST /api/v1/plans with name, start_date, end_date; plan saved within ≤500ms.\n\n- **Test Method**: Integration\n- **Evidence Required**: DB snapshot, API response times\n\n### US-4.1-AC02\n\n**Criterion**: Users can update plans via PATCH /api/v1/plans/:id; updates persist and visible after reload.\n\n- **Test Method**: Integration\n- **Evidence Required**: Update tests, persistence verification\n\n### US-4.1-AC03\n\n**Criterion**: Users can delete plans via DELETE /api/v1/plans/:id; deletion is soft-delete (archived_at set); associated sessions are not deleted.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 30, "token_count": 230, "hash_short": "a85d4e78", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_031", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "tests, persistence verification\n\n### US-4.1-AC03\n\n**Criterion**: Users can delete plans via DELETE /api/v1/plans/:id; deletion is soft-delete (archived_at set); associated sessions are not deleted.\n\n- **Test Method**: Integration\n- **Evidence Required**: Deletion tests, session preservation verification\n\n### US-4.1-AC04\n\n**Criterion**: Plan concurrency: last-writer-wins with ETag support; stale ETag returns 412 Precondition Failed with conflict banner.\n\n- **Test Method**: Integration\n- **Evidence Required**: ETag headers, concurrency test results\n\n---\n\n## US-4.2\n\n### US-4.2-AC01\n\n**Criterion**: Users can activate a plan via POST /api/v1/plans/:id/activate; activation generates scheduled sessions based on plan template and recurrence rules.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 31, "token_count": 187, "hash_short": "0c402dfd", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_032", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "s\n\n---\n\n## US-4.2\n\n### US-4.2-AC01\n\n**Criterion**: Users can activate a plan via POST /api/v1/plans/:id/activate; activation generates scheduled sessions based on plan template and recurrence rules.\n\n- **Test Method**: Integration\n- **Evidence Required**: Activation tests, generated sessions verification\n\n### US-4.2-AC02\n\n**Criterion**: Plan progress tracking: progress_percent calculated as (completed_count / session_count) \\* 100; progress updates when sessions are completed.\n\n- **Test Method**: Integration\n- **Evidence Required**: Progress calculation tests, progress update verification\n\n### US-4.2-AC03\n\n**Criterion**: Plan duration validation: duration_weeks ∈ [1..52]; target_frequency ∈ [1..7] sessions per week; invalid values rejected with 422.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 32, "token_count": 189, "hash_short": "ff3d159f", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_033", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ests, progress update verification\n\n### US-4.2-AC03\n\n**Criterion**: Plan duration validation: duration_weeks ∈ [1..52]; target_frequency ∈ [1..7] sessions per week; invalid values rejected with 422.\n\n- **Test Method**: Unit + API negative\n- **Evidence Required**: Validation test results, error responses\n\n---\n\n## US-4.3\n\n### US-4.3-AC01\n\n**Criterion**: Drag-and-drop scheduling updates session planned_at without full page reload; calendar re-renders within ≤150ms on modern desktop.\n\n- **Test Method**: E2E\n- **Evidence Required**: Performance traces, drag-and-drop functionality tests\n\n### US-4.3-AC02\n\n**Criterion**: Overlapping sessions detected client-side before save with actionable error message and visual highlight of conflicts.\n\n- **Test Method**: Unit + E2E\n- **Evidence Required**: Conflict detection tests, UI screenshots\n\n### US-4.3-AC03\n\n**Criterion**: Server re-validates session overlaps; rejects with 422 and returns conflicting session IDs in error response.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 33, "token_count": 244, "hash_short": "7afa7f43", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_034", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ce Required**: Conflict detection tests, UI screenshots\n\n### US-4.3-AC03\n\n**Criterion**: Server re-validates session overlaps; rejects with 422 and returns conflicting session IDs in error response.\n\n- **Test Method**: API negative\n- **Evidence Required**: HTTP traces, error responses with conflict details\n\n### US-4.3-AC04\n\n**Criterion**: Calendar view displays sessions with proper time slots, colors, and labels; supports month/week/day views.\n\n- **Test Method**: E2E\n- **Evidence Required**: Calendar UI screenshots, view switching tests\n\n---\n\n## US-4.4\n\n### US-4.4-AC01\n\n**Criterion**: Mobile drag/resize works via touch gestures (touchstart, touchmove, touchend); no scroll-jank with long tasks >50ms.\n\n- **Test Method**: E2E mobile emu\n- **Evidence Required**: Performance traces, touch gesture tests\n\n### US-4.4-AC02\n\n**Criterion**: Touch gestures are responsive and provide visual feedback; calendar is usable on mobile devices (screen width ≥320px).", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 34, "token_count": 240, "hash_short": "7596a09e", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_035", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "red**: Performance traces, touch gesture tests\n\n### US-4.4-AC02\n\n**Criterion**: Touch gestures are responsive and provide visual feedback; calendar is usable on mobile devices (screen width ≥320px).\n\n- **Test Method**: E2E mobile emu\n- **Evidence Required**: Mobile UI screenshots, usability tests\n\n---\n\n## US-4.5\n\n### US-4.5-AC01\n\n**Criterion**: Unit tests cover plan CRUD, activation, session generation, and progress tracking with ≥90% code coverage.\n\n- **Test Method**: Unit\n- **Evidence Required**: Test coverage reports\n\n### US-4.5-AC02\n\n**Criterion**: Integration tests verify plan management, activation flow, conflict detection, and progress calculation.\n\n- **Test Method**: Integration\n- **Evidence Required**: Integration test results\n\n### US-4.5-AC03\n\n**Criterion**: E2E tests verify complete planner workflow including drag-and-drop, conflict detection, and mobile touch gestures.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 35, "token_count": 223, "hash_short": "7f6c5cf7", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_036", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "- **Evidence Required**: Integration test results\n\n### US-4.5-AC03\n\n**Criterion**: E2E tests verify complete planner workflow including drag-and-drop, conflict detection, and mobile touch gestures.\n\n- **Test Method**: E2E\n- **Evidence Required**: E2E test results, UI screenshots\n\n---\n\n## US-5.1\n\n### US-5.1-AC01\n\n**Criterion**: Users can log session metrics (duration, distance, heart rate, sets, reps, weight) via PATCH /api/v1/sessions/:id with status='completed'; metrics saved within ≤500ms.\n\n- **Test Method**: Integration + E2E\n- **Evidence Required**: Logging tests, DB records, API response times\n\n### US-5.1-AC02\n\n**Criterion**: Session edits are audit-logged with who/when/what; audit records include field changes and timestamps.\n\n- **Test Method**: Unit + Integration\n- **Evidence Required**: Audit log excerpts, edit history verification\n\n### US-5.1-AC03\n\n**Criterion**: Logger frontend allows manual entry of all metrics with proper validation and unit conversion.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 36, "token_count": 244, "hash_short": "e98d2112", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_037", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "- **Evidence Required**: Audit log excerpts, edit history verification\n\n### US-5.1-AC03\n\n**Criterion**: Logger frontend allows manual entry of all metrics with proper validation and unit conversion.\n\n- **Test Method**: E2E\n- **Evidence Required**: Logger UI screenshots, form validation tests\n\n---\n\n## US-5.2\n\n### US-5.2-AC01\n\n**Criterion**: Users can import GPX files via POST /api/v1/sessions/import with file upload; GPX parser extracts track points, elevation, and timestamps.\n\n- **Test Method**: Fuzz + fixtures\n- **Evidence Required**: GPX parser test results, import success/failure logs\n\n### US-5.2-AC02\n\n**Criterion**: GPX parser handles ≥99% valid GPX samples; malformed GPX files produce user-facing error (422) without application crash.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 37, "token_count": 187, "hash_short": "da7ea205", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_038", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "r test results, import success/failure logs\n\n### US-5.2-AC02\n\n**Criterion**: GPX parser handles ≥99% valid GPX samples; malformed GPX files produce user-facing error (422) without application crash.\n\n- **Test Method**: Fuzz + fixtures\n- **Evidence Required**: Corpus results, error handling tests\n\n### US-5.2-AC03\n\n**Criterion**: Imported GPX data creates session with proper metrics (distance, duration, elevation gain/loss); timezone normalization applied.\n\n- **Test Method**: Unit\n- **Evidence Required**: Parser snapshots, imported session verification\n\n---\n\n## US-5.3\n\n### US-5.3-AC01\n\n**Criterion**: Users can import FIT files via POST /api/v1/sessions/import; FIT parser extracts GPS, heart rate, power, and other device metrics.\n\n- **Test Method**: Fuzz + fixtures\n- **Evidence Required**: FIT parser test results, import success/failure logs\n\n### US-5.3-AC02\n\n**Criterion**: FIT parser handles ≥99% valid FIT samples; malformed FIT files produce user-facing error (422) without crash.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 38, "token_count": 248, "hash_short": "1fc1879f", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_039", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "*: FIT parser test results, import success/failure logs\n\n### US-5.3-AC02\n\n**Criterion**: FIT parser handles ≥99% valid FIT samples; malformed FIT files produce user-facing error (422) without crash.\n\n- **Test Method**: Fuzz + fixtures\n- **Evidence Required**: Corpus results, error handling tests\n\n### US-5.3-AC03\n\n**Criterion**: FIT file metadata (GPS coordinates, heart rate zones, timezone) respected; timezone normalization applied correctly.\n\n- **Test Method**: Unit\n- **Evidence Required**: Parser snapshots, metadata extraction verification\n\n---\n\n## US-5.4\n\n### US-5.4-AC01\n\n**Criterion**: Editing pace or elevation triggers automatic recalculation of derived metrics (average pace, elevation gain/loss, normalized power) within ≤200ms.\n\n- **Test Method**: Integration\n- **Evidence Required**: Recalculation logs, metric update verification\n\n### US-5.4-AC02\n\n**Criterion**: Metric recalculation is idempotent: same inputs produce same outputs; snapshot tests remain stable across runs.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 39, "token_count": 248, "hash_short": "5966dc5b", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_040", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "red**: Recalculation logs, metric update verification\n\n### US-5.4-AC02\n\n**Criterion**: Metric recalculation is idempotent: same inputs produce same outputs; snapshot tests remain stable across runs.\n\n- **Test Method**: Unit\n- **Evidence Required**: Snapshot tests, idempotency verification\n\n---\n\n## US-5.5\n\n### US-5.5-AC01\n\n**Criterion**: Offline logging buffers session events in local storage (IndexedDB); events sync to server within ≤5s after network reconnect.\n\n- **Test Method**: E2E (PWA offline)\n- **Evidence Required**: Network traces, sync verification, offline storage tests\n\n### US-5.5-AC02\n\n**Criterion**: Service worker enables offline functionality; sync queue handles failed syncs with retry logic (exponential backoff).", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 40, "token_count": 184, "hash_short": "0013d8bf", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_041", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "races, sync verification, offline storage tests\n\n### US-5.5-AC02\n\n**Criterion**: Service worker enables offline functionality; sync queue handles failed syncs with retry logic (exponential backoff).\n\n- **Test Method**: E2E (PWA offline)\n- **Evidence Required**: Service worker tests, sync queue verification\n\n---\n\n## US-5.6\n\n### US-5.6-AC01\n\n**Criterion**: Fuzz tests cover GPX and FIT parsers with diverse file samples; parser handles edge cases (empty files, malformed XML/binary, missing fields).\n\n- **Test Method**: Fuzz + fixtures\n- **Evidence Required**: Fuzz test results, corpus coverage\n\n### US-5.6-AC02\n\n**Criterion**: Import tests verify file validation, parsing accuracy, error handling, and metric calculation correctness.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 41, "token_count": 183, "hash_short": "e439949c", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_042", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "**Evidence Required**: Fuzz test results, corpus coverage\n\n### US-5.6-AC02\n\n**Criterion**: Import tests verify file validation, parsing accuracy, error handling, and metric calculation correctness.\n\n- **Test Method**: Unit + Integration\n- **Evidence Required**: Import test results, accuracy verification\n\n---\n\n## US-6.1\n\n### US-6.1-AC01\n\n**Criterion**: Users can request data export via GET /api/v1/users/me/export; export generates JSON bundle with user, profile, sessions, exercises, points, badges within ≤24h.\n\n- **Test Method**: E2E DSR\n- **Evidence Required**: Export job logs, JSON bundle samples\n\n### US-6.1-AC02\n\n**Criterion**: Export link valid for 24h; download available via secure link; export includes all user data per GDPR requirements.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 42, "token_count": 188, "hash_short": "070c2c3c", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_043", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "Required**: Export job logs, JSON bundle samples\n\n### US-6.1-AC02\n\n**Criterion**: Export link valid for 24h; download available via secure link; export includes all user data per GDPR requirements.\n\n- **Test Method**: E2E DSR\n- **Evidence Required**: Export link tests, data completeness verification\n\n---\n\n## US-6.2\n\n### US-6.2-AC01\n\n**Criterion**: Users can delete account via DELETE /api/v1/users/me; deletion marks account as pending_deletion; hard deletion occurs within 30 days.\n\n- **Test Method**: E2E DSR\n- **Evidence Required**: Deletion tests, account status verification\n\n### US-6.2-AC02\n\n**Criterion**: Account deletion propagates to backups within ≤14 days (configurable); deletion receipt issued in audit log.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Deletion pipeline logs, backup verification\n\n### US-6.2-AC03\n\n**Criterion**: Deletion invalidates all active sessions; user cannot login after deletion; data anonymized where required for referential integrity.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 43, "token_count": 247, "hash_short": "15da8d68", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_044", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "eline logs, backup verification\n\n### US-6.2-AC03\n\n**Criterion**: Deletion invalidates all active sessions; user cannot login after deletion; data anonymized where required for referential integrity.\n\n- **Test Method**: Integration\n- **Evidence Required**: Session invalidation tests, anonymization verification\n\n---\n\n## US-6.3\n\n### US-6.3-AC01\n\n**Criterion**: Users can manage consent preferences via UI; consent stored in database with timestamp and version; opt-out respected within ≤5m across services.\n\n- **Test Method**: E2E\n- **Evidence Required**: Consent UI screenshots, consent storage verification\n\n### US-6.3-AC02\n\n**Criterion**: Consent banner gates optional analytics; consent changes trigger immediate effect; consent history maintained for audit.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 44, "token_count": 190, "hash_short": "82dde236", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_045", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "UI screenshots, consent storage verification\n\n### US-6.3-AC02\n\n**Criterion**: Consent banner gates optional analytics; consent changes trigger immediate effect; consent history maintained for audit.\n\n- **Test Method**: E2E\n- **Evidence Required**: Consent banner tests, analytics gating verification\n\n---\n\n## US-6.4\n\n### US-6.4-AC01\n\n**Criterion**: Users can configure privacy settings for profile (hide age/weight) and content (default visibility) via privacy settings UI.\n\n- **Test Method**: E2E\n- **Evidence Required**: Privacy settings UI screenshots, settings persistence tests\n\n### US-6.4-AC02\n\n**Criterion**: Privacy settings take effect immediately; past data visibility not retroactively changed; settings persisted in user profile.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 45, "token_count": 185, "hash_short": "d12bad7f", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_046", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "screenshots, settings persistence tests\n\n### US-6.4-AC02\n\n**Criterion**: Privacy settings take effect immediately; past data visibility not retroactively changed; settings persisted in user profile.\n\n- **Test Method**: Integration + Security\n- **Evidence Required**: Privacy tests, settings application verification\n\n---\n\n## US-6.5\n\n### US-6.5-AC01\n\n**Criterion**: All GDPR-related events (export requests, deletion requests, consent changes) are audit-logged with timestamp, user ID, and action details.\n\n- **Test Method**: Integration\n- **Evidence Required**: Audit log excerpts, GDPR event verification\n\n### US-6.5-AC02\n\n**Criterion**: Audit logs are retained per retention policy; logs are searchable and exportable for compliance demonstrations.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 46, "token_count": 187, "hash_short": "1dcfbf47", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_047", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "quired**: Audit log excerpts, GDPR event verification\n\n### US-6.5-AC02\n\n**Criterion**: Audit logs are retained per retention policy; logs are searchable and exportable for compliance demonstrations.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Audit log retention verification, search functionality\n\n---\n\n## US-6.6\n\n### US-6.6-AC01\n\n**Criterion**: Integration tests verify data export flow, deletion flow, consent management, and privacy settings with GDPR compliance checks.\n\n- **Test Method**: Integration\n- **Evidence Required**: GDPR flow test results\n\n### US-6.6-AC02\n\n**Criterion**: E2E tests verify complete GDPR user journeys including export request, download, account deletion, and consent management.\n\n- **Test Method**: E2E DSR\n- **Evidence Required**: E2E test results, GDPR journey screenshots\n\n---\n\n## US-7.1\n\n### US-7.1-AC01\n\n**Criterion**: API latency p95 ≤300ms for all endpoints per PRD targets; slow endpoints identified and optimized.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 47, "token_count": 241, "hash_short": "169366a4", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_048", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ired**: E2E test results, GDPR journey screenshots\n\n---\n\n## US-7.1\n\n### US-7.1-AC01\n\n**Criterion**: API latency p95 ≤300ms for all endpoints per PRD targets; slow endpoints identified and optimized.\n\n- **Test Method**: Performance\n- **Evidence Required**: Performance metrics, latency histograms\n\n### US-7.1-AC02\n\n**Criterion**: Per-endpoint budgets met: Auth ≤200ms, CRUD ≤300ms, Analytics ≤600ms, Feed ≤400ms p95.\n\n- **Test Method**: Performance\n- **Evidence Required**: Endpoint latency metrics, budget compliance\n\n---\n\n## US-7.2\n\n### US-7.2-AC01\n\n**Criterion**: Database queries optimized with proper indexes; slow query threshold 200ms; queries exceeding threshold logged and optimized.\n\n- **Test Method**: Performance\n- **Evidence Required**: Query performance metrics, index usage reports\n\n### US-7.2-AC02\n\n**Criterion**: Large tables (sessions, user_points) partitioned by month; partitions automatically pruned; connection pooling p95 wait <5ms.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 48, "token_count": 238, "hash_short": "9d8e754c", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_049", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "erformance metrics, index usage reports\n\n### US-7.2-AC02\n\n**Criterion**: Large tables (sessions, user_points) partitioned by month; partitions automatically pruned; connection pooling p95 wait <5ms.\n\n- **Test Method**: Performance\n- **Evidence Required**: Partitioning verification, pool metrics\n\n---\n\n## US-7.3\n\n### US-7.3-AC01\n\n**Criterion**: Frontend JS bundle size ≤300KB gzipped; Lighthouse CI budget enforced; bundle size regression >10% blocks merge.\n\n- **Test Method**: Performance\n- **Evidence Required**: Bundle size reports, Lighthouse CI results\n\n### US-7.3-AC02\n\n**Criterion**: Code splitting implemented for non-critical routes; lazy loading mandatory; critical CSS inlined.\n\n- **Test Method**: Performance\n- **Evidence Required**: Bundle analysis, code splitting verification\n\n---\n\n## US-7.4\n\n### US-7.4-AC01\n\n**Criterion**: Frontend performance metrics meet targets: LCP ≤2.5s, CLS ≤0.1, TTI ≤3.0s on mid-tier device, 4G connection.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 49, "token_count": 237, "hash_short": "da459655", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_050", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "le analysis, code splitting verification\n\n---\n\n## US-7.4\n\n### US-7.4-AC01\n\n**Criterion**: Frontend performance metrics meet targets: LCP ≤2.5s, CLS ≤0.1, TTI ≤3.0s on mid-tier device, 4G connection.\n\n- **Test Method**: Performance\n- **Evidence Required**: Lighthouse reports, Web Vitals metrics\n\n### US-7.4-AC02\n\n**Criterion**: Performance regression >10% from baseline blocks release; Lighthouse CI runs per PR with budget enforcement.\n\n- **Test Method**: Performance\n- **Evidence Required**: Lighthouse CI results, regression reports\n\n---\n\n## US-7.5\n\n### US-7.5-AC01\n\n**Criterion**: Read-through caching implemented for heavy queries (feed, progress); cache TTL 60s default with explicit invalidation on data changes.\n\n- **Test Method**: Integration\n- **Evidence Required**: Cache hit ratio metrics, invalidation tests\n\n### US-7.5-AC02\n\n**Criterion**: Cache strategy documented; cache keys follow naming convention; cache warming for frequently accessed data.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 50, "token_count": 240, "hash_short": "db9663a2", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_051", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "e Required**: Cache hit ratio metrics, invalidation tests\n\n### US-7.5-AC02\n\n**Criterion**: Cache strategy documented; cache keys follow naming convention; cache warming for frequently accessed data.\n\n- **Test Method**: Documentation review\n- **Evidence Required**: Cache documentation, cache key patterns\n\n---\n\n## US-7.6\n\n### US-7.6-AC01\n\n**Criterion**: Materialized views created for analytics (session_summary, exercise_prs, weekly_aggregates); views refreshed asynchronously (REFRESH CONCURRENTLY).\n\n- **Test Method**: Integration\n- **Evidence Required**: Materialized view definitions, refresh job logs\n\n### US-7.6-AC02\n\n**Criterion**: Materialized views refresh on session completion or nightly; refresh is non-blocking; view consistency verified.\n\n- **Test Method**: Integration\n- **Evidence Required**: Refresh job logs, consistency tests\n\n---\n\n## US-7.7\n\n### US-7.7-AC01\n\n**Criterion**: k6 load tests configured and run in CI; tests validate throughput ≥500 req/s sustained, 1000 req/s burst", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 51, "token_count": 249, "hash_short": "446d3e50", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_052", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "equired**: Refresh job logs, consistency tests\n\n---\n\n## US-7.7\n\n### US-7.7-AC01\n\n**Criterion**: k6 load tests configured and run in CI; tests validate throughput ≥500 req/s sustained, 1000 req/s burst.\n\n- **Test Method**: Performance\n- **Evidence Required**: k6 test results, throughput metrics\n\n### US-7.7-AC02\n\n**Criterion**: Performance regression >10% from baseline blocks release; baseline dataset ≥10k sessions for realistic query costs.\n\n- **Test Method**: Performance\n- **Evidence Required**: Performance test results, regression reports\n\n---\n\n## US-7.8\n\n### US-7.8-AC01\n\n**Criterion**: Performance metrics exposed via Prometheus: http_request_duration_ms, db_query_duration_ms, frontend_lcp_ms; metrics available in Grafana dashboards.\n\n- **Test Method**: Integration\n- **Evidence Required**: Prometheus metrics, Grafana dashboard screenshots\n\n### US-7.8-AC02\n\n**Criterion**: Performance alerts configured: p95 latency >400ms for 10min (warning), error rate >0.5% for 5min (critical).", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 52, "token_count": 248, "hash_short": "e5232f8d", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_053", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "red**: Prometheus metrics, Grafana dashboard screenshots\n\n### US-7.8-AC02\n\n**Criterion**: Performance alerts configured: p95 latency >400ms for 10min (warning), error rate >0.5% for 5min (critical).\n\n- **Test Method**: Ops review\n- **Evidence Required**: Alert configuration, alert test results\n\n---\n\n## US-8.1\n\n### US-8.1-AC01\n\n**Criterion**: All interactive elements have proper ARIA labels (aria-label, aria-labelledby, aria-describedby); semantic HTML used (button, nav, main, etc.).\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: ARIA audit results, HTML semantic verification\n\n### US-8.1-AC02\n\n**Criterion**: Form inputs have associated labels; form errors announced to screen readers; form structure is logical.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 53, "token_count": 184, "hash_short": "3536c331", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_054", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ce Required**: ARIA audit results, HTML semantic verification\n\n### US-8.1-AC02\n\n**Criterion**: Form inputs have associated labels; form errors announced to screen readers; form structure is logical.\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Form accessibility tests, label association verification\n\n---\n\n## US-8.2\n\n### US-8.2-AC01\n\n**Criterion**: All features navigable using only keyboard (Tab, Enter, Space, Arrow keys); focus indicators visible (2px outline, sufficient contrast).\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Keyboard navigation tests, focus indicator screenshots\n\n### US-8.2-AC02\n\n**Criterion**: No keyboard traps; skip links available for main content; tab order is logical and predictable.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 54, "token_count": 188, "hash_short": "660574e9", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_055", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ce Required**: Keyboard navigation tests, focus indicator screenshots\n\n### US-8.2-AC02\n\n**Criterion**: No keyboard traps; skip links available for main content; tab order is logical and predictable.\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Keyboard trap tests, skip link verification\n\n---\n\n## US-8.3\n\n### US-8.3-AC01\n\n**Criterion**: Color contrast meets WCAG 2.1 AA standards: text 4.5:1 for normal text, 3:1 for large text; UI components 3:1.\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Color contrast audit results, contrast ratio measurements\n\n### US-8.3-AC02\n\n**Criterion**: Color is not the only means of conveying information; icons, labels, or patterns supplement color coding.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 55, "token_count": 182, "hash_short": "54c1a0b7", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_056", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": ": Color contrast audit results, contrast ratio measurements\n\n### US-8.3-AC02\n\n**Criterion**: Color is not the only means of conveying information; icons, labels, or patterns supplement color coding.\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Color dependency audit, alternative indicator verification\n\n---\n\n## US-8.4\n\n### US-8.4-AC01\n\n**Criterion**: Application tested with screen readers (NVDA, JAWS, VoiceOver); all features accessible and functional.\n\n- **Test Method**: Screen reader testing\n- **Evidence Required**: Screen reader test results, accessibility test reports\n\n### US-8.4-AC02\n\n**Criterion**: Dynamic content changes announced to screen readers; live regions (aria-live) used appropriately; page structure is logical.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 56, "token_count": 188, "hash_short": "e130a020", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_057", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "test results, accessibility test reports\n\n### US-8.4-AC02\n\n**Criterion**: Dynamic content changes announced to screen readers; live regions (aria-live) used appropriately; page structure is logical.\n\n- **Test Method**: Screen reader testing\n- **Evidence Required**: Screen reader announcements, live region tests\n\n---\n\n## US-8.5\n\n### US-8.5-AC01\n\n**Criterion**: Focus management in modals: focus trapped within modal, focus returns to trigger on close, initial focus on first interactive element.\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Modal focus tests, focus management verification\n\n### US-8.5-AC02\n\n**Criterion**: Dynamic content (dropdowns, tooltips, notifications) manages focus appropriately; focus not lost unexpectedly.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 57, "token_count": 188, "hash_short": "528b03d4", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_058", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ed**: Modal focus tests, focus management verification\n\n### US-8.5-AC02\n\n**Criterion**: Dynamic content (dropdowns, tooltips, notifications) manages focus appropriately; focus not lost unexpectedly.\n\n- **Test Method**: Accessibility audit\n- **Evidence Required**: Dynamic content focus tests\n\n---\n\n## US-8.6\n\n### US-8.6-AC01\n\n**Criterion**: Automated accessibility tests (axe-core) run in CI; tests cover all pages and components; violations block merge.\n\n- **Test Method**: Automated testing\n- **Evidence Required**: CI test results, axe violation reports\n\n### US-8.6-AC02\n\n**Criterion**: Accessibility test coverage ≥80% of interactive elements; critical violations (level 1) must be zero.\n\n- **Test Method**: Automated testing\n- **Evidence Required**: Test coverage reports, violation counts\n\n---\n\n## US-8.7\n\n### US-8.7-AC01\n\n**Criterion**: Lighthouse accessibility score = 100; all accessibility audits pass; score maintained across releases.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 58, "token_count": 236, "hash_short": "749bdb05", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_059", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "red**: Test coverage reports, violation counts\n\n---\n\n## US-8.7\n\n### US-8.7-AC01\n\n**Criterion**: Lighthouse accessibility score = 100; all accessibility audits pass; score maintained across releases.\n\n- **Test Method**: Lighthouse CI\n- **Evidence Required**: Lighthouse reports, accessibility score history\n\n### US-8.7-AC02\n\n**Criterion**: Lighthouse CI runs per PR; accessibility score regression blocks merge; budget enforced.\n\n- **Test Method**: Lighthouse CI\n- **Evidence Required**: Lighthouse CI results, budget compliance\n\n---\n\n## US-9.1\n\n### US-9.1-AC01\n\n**Criterion**: All logs are structured JSON with required fields: ts, level, request_id, user_id (if authenticated), route, status, lat_ms; no PII in logs.\n\n- **Test Method**: Integration\n- **Evidence Required**: Log samples, PII scan results\n\n### US-9.1-AC02\n\n**Criterion**: Correlation IDs (request_id) propagated across services; request tracing possible via correlation ID search.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 59, "token_count": 236, "hash_short": "1222334a", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_060", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "n\n- **Evidence Required**: Log samples, PII scan results\n\n### US-9.1-AC02\n\n**Criterion**: Correlation IDs (request_id) propagated across services; request tracing possible via correlation ID search.\n\n- **Test Method**: Integration\n- **Evidence Required**: Correlation ID propagation tests, trace verification\n\n---\n\n## US-9.2\n\n### US-9.2-AC01\n\n**Criterion**: Prometheus metrics exposed for all endpoints: http_request_duration_seconds (histogram), http_requests_total (counter) with method, route, status labels.\n\n- **Test Method**: Integration\n- **Evidence Required**: Prometheus metrics, metric definitions\n\n### US-9.2-AC02\n\n**Criterion**: Database metrics: db_query_duration_seconds (histogram) with op, table labels; background job metrics: background_job_duration_seconds.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 60, "token_count": 194, "hash_short": "7f40071e", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_061", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "s metrics, metric definitions\n\n### US-9.2-AC02\n\n**Criterion**: Database metrics: db_query_duration_seconds (histogram) with op, table labels; background job metrics: background_job_duration_seconds.\n\n- **Test Method**: Integration\n- **Evidence Required**: DB metrics, job metrics\n\n### US-9.2-AC03\n\n**Criterion**: Metric cardinality bounded: route labels normalized, user IDs excluded, label sets limited to prevent cardinality explosion.\n\n- **Test Method**: Integration\n- **Evidence Required**: Cardinality analysis, metric samples\n\n---\n\n## US-9.3\n\n### US-9.3-AC01\n\n**Criterion**: OpenTelemetry tracing implemented with traceparent propagation; sampling rate 10% prod, 100% staging; spans include timing only (no PII).\n\n- **Test Method**: Integration\n- **Evidence Required**: Tracing configuration, trace samples\n\n### US-9.3-AC02\n\n**Criterion**: Traces cover full request lifecycle: HTTP → service → database; trace IDs searchable in observability platform.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 61, "token_count": 239, "hash_short": "da53a16b", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_062", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ence Required**: Tracing configuration, trace samples\n\n### US-9.3-AC02\n\n**Criterion**: Traces cover full request lifecycle: HTTP → service → database; trace IDs searchable in observability platform.\n\n- **Test Method**: Integration\n- **Evidence Required**: Trace samples, trace completeness verification\n\n---\n\n## US-9.4\n\n### US-9.4-AC01\n\n**Criterion**: Grafana dashboards created for: API latency (p95), error rate, DB health, job queues, uploads AV, performance budgets.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Grafana dashboard screenshots, dashboard definitions\n\n### US-9.4-AC02\n\n**Criterion**: Dashboards refresh automatically; data retention configured; dashboards accessible to ops team.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 62, "token_count": 177, "hash_short": "18ff67a4", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_063", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": "ence Required**: Grafana dashboard screenshots, dashboard definitions\n\n### US-9.4-AC02\n\n**Criterion**: Dashboards refresh automatically; data retention configured; dashboards accessible to ops team.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Dashboard configuration, access verification\n\n---\n\n## US-9.5\n\n### US-9.5-AC01\n\n**Criterion**: Alerting rules configured for: 5xx rate spikes (>0.5% for 5min), p95 latency breaches (>400ms for 10min), DB pool saturation, auth lockout anomalies.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Alert rule definitions, alert test results\n\n### US-9.5-AC02\n\n**Criterion**: Alerts sent to appropriate channels (PagerDuty, Slack, email); alert routing based on severity; alert fatigue prevented.", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 63, "token_count": 187, "hash_short": "adb3e810", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES_chunk_064", "doc_id": ".._.._docs_1.Product_Requirements_AC_ALL_STORIES", "text": ": Alert rule definitions, alert test results\n\n### US-9.5-AC02\n\n**Criterion**: Alerts sent to appropriate channels (PagerDuty, Slack, email); alert routing based on severity; alert fatigue prevented.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Alert configuration, notification channel tests\n\n---\n\n## US-9.6\n\n### US-9.6-AC01\n\n**Criterion**: Log aggregation pipeline configured (Loki or compatible); logs ingested from all services; logs searchable by correlation ID, user ID, timestamp.\n\n- **Test Method**: Ops review\n- **Evidence Required**: Log aggregation configuration, search functionality\n\n### US-9.6-AC02\n\n**Criterion**: Log retention policy configured (default 30 days, configurable); log storage optimized; log queries performant (<2s for typical searches).\n\n- **Test Method**: Ops review\n- **Evidence Required**: Retention policy, query performance metrics\n\n---", "source_file": "../../docs/1.Product_Requirements/AC_ALL_STORIES.md", "category": "requirements", "chunk_index": 64, "token_count": 220, "hash_short": "d0e9f365", "version": 1.0, "title": "Acceptance Criteria for All User Stories", "mtime": "2025-11-24T23:08:11.376485", "ingested_at": "2025-11-30T04:00:41.943637", "tags": ["requirements", "md"]}
