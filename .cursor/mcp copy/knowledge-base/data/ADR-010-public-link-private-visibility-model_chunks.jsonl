{"chunk_id": ".._.._docs_2.Technical_Design_Document_2.f.Architectural_Decision_Documentation_ADR-010-public-link-private-visibility-model_chunk_000", "doc_id": ".._.._docs_2.Technical_Design_Document_2.f.Architectural_Decision_Documentation_ADR-010-public-link-private-visibility-model", "text": "# ADR-010 — Public/Link/Private Visibility Model\n\n> **File:** docs/adr/ADR-010-public-link-private-visibility-model.md  \n> **Purpose:** Define resource visibility for sessions, plans, and profiles with privacy‑first defaults.\n\n---\n\nid: ADR-010\ntitle: \"Public/Link/Private Visibility Model\"\nstatus: \"Proposed\"\ndate: \"2025-10-13\"\nowners: [\"Dr. Konstantinos Pilpilidis\"]\nversion: \"1.0\"\nlinks:\n\n- TDD §4.7: \"Feed & sharing\"\n- TDD §7.8: \"Security & privacy controls\"\n\n---\n\n\n## Context\n\nUsers need to keep data **private by default**, share via **unlisted (link)** URLs, or make some content **public** (e.g., for a community feed). We must support **revocable links** and feature‑flagged public discovery to remain privacy‑first.\n\n## Decision\n\nIntroduce `visibility` enum on shareable resources with values: **`private` (default)**, **`link`**, **`public`**. Implement **link tokens** for unlisted sharing and **feature flags** for public discovery surfaces.", "source_file": "../../docs/2.Technical_Design_Document/2.f.Architectural_Decision_Documentation/ADR-010-public-link-private-visibility-model.md", "category": "technical", "chunk_index": 0, "token_count": 238, "hash_short": "936dd93c", "version": 1.0, "title": "ADR-010 — Public/Link/Private Visibility Model", "mtime": "2025-10-18T10:54:49.887235", "ingested_at": "2025-11-30T04:00:44.106354", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_2.f.Architectural_Decision_Documentation_ADR-010-public-link-private-visibility-model_chunk_001", "doc_id": ".._.._docs_2.Technical_Design_Document_2.f.Architectural_Decision_Documentation_ADR-010-public-link-private-visibility-model", "text": "ility` enum on shareable resources with values: **`private` (default)**, **`link`**, **`public`**. Implement **link tokens** for unlisted sharing and **feature flags** for public discovery surfaces.\n\n### Model\n\n- Column: `visibility visibility_enum NOT NULL DEFAULT 'private'`.\n- `link` visibility uses `share_links(resource_id, token, expires_at, revoked_at, created_at)`; tokens are random and **revocable**.\n- `public` visibility enables inclusion in public feeds **only if** feature `public_feed_enabled` is on.\n\n### Access Rules\n\n- **private**: owner and authorized roles only.\n- **link**: anyone with valid token; token may expire or be revoked.\n- **public**: visible to all; indexed by feed, but **no PII beyond what user consents** in profile settings.\n\n### Security & Abuse\n\n- Rate limiting on token endpoints; audit logs for token creation and revocation.\n- Tokens are **single‑resource** scoped; cannot escalate privileges.\n- Public feeds moderated; report/removal pipeline (Phase 2).", "source_file": "../../docs/2.Technical_Design_Document/2.f.Architectural_Decision_Documentation/ADR-010-public-link-private-visibility-model.md", "category": "technical", "chunk_index": 1, "token_count": 248, "hash_short": "e3710346", "version": 1.0, "title": "ADR-010 — Public/Link/Private Visibility Model", "mtime": "2025-10-18T10:54:49.887235", "ingested_at": "2025-11-30T04:00:44.106354", "tags": ["technical", "md"]}
{"chunk_id": ".._.._docs_2.Technical_Design_Document_2.f.Architectural_Decision_Documentation_ADR-010-public-link-private-visibility-model_chunk_002", "doc_id": ".._.._docs_2.Technical_Design_Document_2.f.Architectural_Decision_Documentation_ADR-010-public-link-private-visibility-model", "text": "ng on token endpoints; audit logs for token creation and revocation.\n- Tokens are **single‑resource** scoped; cannot escalate privileges.\n- Public feeds moderated; report/removal pipeline (Phase 2).\n\n## Consequences\n\n- Clear, privacy‑first sharing semantics with revocation.\n- Additional tables and checks for tokens and flags.\n\n## Alternatives Considered\n\n- **Only private/link**: Simpler but limits community features.\n- **Public by default**: Violates privacy‑by‑default principle.\n\n## QA & Acceptance\n\n- E2E: token sharing grants access; revocation immediately blocks.\n- Public feed only returns `public` items when feature flag is on.\n- GDPR: visibility changes propagate to caches/CDN within SLA.\n\n## Backout Plan\n\nDisable `public_feed_enabled`; fall back to private/link only while preserving tokens.\n\n## Change Log\n\n- **1.0 (2025-10-13):** Initial proposal.", "source_file": "../../docs/2.Technical_Design_Document/2.f.Architectural_Decision_Documentation/ADR-010-public-link-private-visibility-model.md", "category": "technical", "chunk_index": 2, "token_count": 216, "hash_short": "610ebc69", "version": 1.0, "title": "ADR-010 — Public/Link/Private Visibility Model", "mtime": "2025-10-18T10:54:49.887235", "ingested_at": "2025-11-30T04:00:44.106354", "tags": ["technical", "md"]}
