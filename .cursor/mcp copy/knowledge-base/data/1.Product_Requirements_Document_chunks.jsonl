{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_000", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "﻿---\ntitle: \"FitVibe Product Requirements Document (PRD)\"\nversion: \"v2.0\"\nstatus: \"Accepted\"\nowner: \"Konstantinos Pilpilidis (Dr.)\"\ndate: \"2025-10-21\"\nlicense: \"MIT\"\n---\n\n## 0.1 Purpose & Scope\n\nThis PRD specifies **which** features the FitVibe system entails.\n\n## 0.2 Audience & Reading Guide\n\n- **Engineers** implement according to specs, contracts, and runbooks.\n- **QA** uses RTM links to derive tests and quality gates.\n- **Security/Compliance** verifies controls, data classification, GDPR flows.\n- **Product/Design** confirms that behavior matches PRD intent.\n\n# 1. Vision\n\n> **Editor’s note (SSOT):** Detailed **technology** and **CI/CD** mechanics have moved to the **Technical Design Document (TDD)**.\n> In this PRD, §6 and §11.2/§11.3 are placeholders that point to TDD. Functional _what/why_ content remains here.\n\nFitVibe is a platform, where users can upload and plan training sessions expanding over all domains of fitness (vibes).", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 0, "token_count": 236, "hash_short": "313e3814", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_001", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "re placeholders that point to TDD. Functional _what/why_ content remains here.\n\nFitVibe is a platform, where users can upload and plan training sessions expanding over all domains of fitness (vibes). Each vibe is represented as an element and users are challenged to maintain a balance of the elements by training holistically over all vibes.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 1, "token_count": 85, "hash_short": "0b264349", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_002", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "sessions expanding over all domains of fitness (vibes). Each vibe is represented as an element and users are challenged to maintain a balance of the elements by training holistically over all vibes.\n\n| Vibe         | Element | Activities                                          |\n| ------------ | ------- | --------------------------------------------------- |\n| Strength     | Earth   | Lifting, strongman, body building                   |\n| Agility      | Air     | Juggling, climbing, bouldering, gymnastics, parkour |\n| Endurance    | Water   | Running, hiking, cycling, rowing, jump rope         |\n| Explosivity  | Fire    | Sprints, jumps, throws                              |\n| Inteligence  | Shadow  | Chess, shooting, sailing                            |\n| Regeneration | Aether  | Yoga, Stretching, Fasting                           |\n\n### 1.1 Goals\n\nThe plattform enables individuals to **plan, log, share, and track** their training sessions with a clear, accessible, and responsive interface independent of their fitness activity", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 2, "token_count": 261, "hash_short": "99bfa1a3", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_003", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "|\n\n### 1.1 Goals\n\nThe plattform enables individuals to **plan, log, share, and track** their training sessions with a clear, accessible, and responsive interface independent of their fitness activity. Further, the logic gives them the ability to log exercises and make them comparable.\n\n### 1.2 Tech Vision\n\nThe system is designed with a **modular, scalable architecture** and strict **separation of concerns**, ensuring sustainable growth and easy extensibility (e.g., nutrition tracking, wearables integration, AI recommendations).\n\nThe system shall follow a **security-first design** and guarantee full **GDPR compliance**, including privacy-by-default settings and user-controlled data management.\nAccessibility shall be central, following **WCAG 2.1 AA standards**, providing a barrier-free experience across devices and user groups.\n\n---\n\n## 2. Context, Scope, and Goals\n\n### 2.1 Goals\n\nThe system shall:\n\n- Provide an **easy-to-use interface** for planning and logging training sessions.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 3, "token_count": 248, "hash_short": "71e26a07", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_004", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "experience across devices and user groups.\n\n---\n\n## 2. Context, Scope, and Goals\n\n### 2.1 Goals\n\nThe system shall:\n\n- Provide an **easy-to-use interface** for planning and logging training sessions.\n- Enable **fast entry and retrieval** of exercises and sessions.\n- Facilitate **sharing and community engagement** with robust privacy controls.\n- Offer **progress tracking** with historical data and analytics.\n- Deliver a **gamified experience** via a hidden points system.\n- Ensure an **accessible and responsive UI** (WCAG 2.1 AA).\n- Guarantee **security-first user management** (2FA, brute-force protection, password policy).\n- Support **scalability and modularity** for future enhancements.\n\n### 2.2 Scope\n\n#### 2.2.1 In Scope\n\n- User\n  - **User**: User accounts, profiles, and secure authentication.\n  - **Personal Exercise library**: Every authenticated user can create and manage their own custom exercises.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 4, "token_count": 228, "hash_short": "93db739f", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_005", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": ".2.1 In Scope\n\n- User\n  - **User**: User accounts, profiles, and secure authentication.\n  - **Personal Exercise library**: Every authenticated user can create and manage their own custom exercises.\n  - **Global Exercise library**: Admins can still edit or delete system-wide (shared) exercises, but users can add personal ones that appear only in their own planner/logger.\n  - **Planner**: Planning and logging sessions, as series of exercises done one-after-the-other.\n  - **Progress Tracking**: Progress dashboard (history and charts).\n  - **Gamification**: Points and badges awarded upon session completion and leaderboards.\n  - **Social**: Public feed of sessions with privacy controls.\n    - likes, bookmarks, comments.\n    - Follow users (follow/unfollow UI, follower counts).\n    - Leaderboards (global/friends).\n- Customizing\n  - **Multilanguage**: English (**en**) and German (**de**) static translations for all UI and system text.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 5, "token_count": 235, "hash_short": "e2fd79eb", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_006", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "(follow/unfollow UI, follower counts).\n    - Leaderboards (global/friends).\n- Customizing\n  - **Multilanguage**: English (**en**) and German (**de**) static translations for all UI and system text.\n  - **Localization**: Locale-aware date, number, and unit formatting.\n- Easy of administration\n  - Admin dashboards for moderation.\n  - Admin moderation (report queue, suspensions, takedowns).\n\n#### 2.2.2 Out of Scope\n\n- Third-party integrations (Garmin/Strava).\n- Nutrition tracking and body composition analytics.\n- Real-time chat\n- Native mobile apps (progressive web app acceptable for MVP).\n- Manual translation workflows or in-app translation editing.\n- Voice or speech translation.\n- RTL (right-to-left) language support.\n\n---\n\n## 3.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 6, "token_count": 184, "hash_short": "973915a6", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_007", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "mobile apps (progressive web app acceptable for MVP).\n- Manual translation workflows or in-app translation editing.\n- Voice or speech translation.\n- RTL (right-to-left) language support.\n\n---\n\n## 3. Users and Use Cases\n\n### 3.1 Personas\n\n- [Athlete](.\\4.personas\\persona-member-athlete.md)\n- [Follower](.\\4.personas\\persona-follower.md)\n- [Coach](.\\4.personas\\persona-coach-trainer.md)\n- [Administrator](.\\4.personas\\persona-administrator.md)\n- [Content Curatoer](.\\4.personas\\persona-content-curator.md)\n\n### 3.2 Core Use Cases\n\nThe system shall enable users to:\n\n1. **Plan a session** with exercises and attributes for self or othere; save as draft or scheduled.\n2. **Log a session**; record actual performance; mark complete; receive points based on ad hoc or predefined sessions and exercises.\n3. **Browse the feed**; view or clone public sessions into the planner.\n4. **Manage accounts**; edit profile, avatar, and security settings; export or delete data.\n5.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 7, "token_count": 241, "hash_short": "0a8783cd", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_008", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "edefined sessions and exercises.\n3. **Browse the feed**; view or clone public sessions into the planner.\n4. **Manage accounts**; edit profile, avatar, and security settings; export or delete data.\n5. **Administer the platform**; configure selectable lists, review reports, moderate community content.\n\n---\n\n## 4. Functional Requirements (FR)\n\n> Each FR includes **Acceptance Criteria (AC)** and, where relevant, **Error Behaviors (EB)**.\n\n#### FR-1 User Management & Security\n\n- **Registration** with verified email (15-minute TTL token, 3 resend/hour, auto-purge in 7 days).\n  - **AC:** Duplicate usernames rejected (case-insensitive).\n- **Login** with username/password; optional 2FA (TOTP + backup codes).\n  - **EB:** Generic error messages, no user enumeration.\n- **Password policy:** ≥12 chars, must include upper, lower, number, symbol.\n- **Brute force protection:** max 10 failed attempts → exponential backoff, lock, optional CAPTCHA, user notified.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 8, "token_count": 239, "hash_short": "2907d42f", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_009", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "ration.\n- **Password policy:** ≥12 chars, must include upper, lower, number, symbol.\n- **Brute force protection:** max 10 failed attempts → exponential backoff, lock, optional CAPTCHA, user notified.\n- **Logout** invalidates refresh session (rotated per use, revoked by `jti`).\n- **Password reset** via single-use link (15 min TTL, audit logged).\n- **Account deletion (GDPR):** hard deletion within 30 days (with exceptions for audit/legal); queued deletion from backups.\n- **Data export:** JSON of profile, sessions, exercises, points (link valid 24h).\n- **Roles & authorization:** `user` (default) and `admin`, enforced server-side.\n\n#### FR-2 Profile & Settings\n\n- **Editable:** alias, weight (+unit), fitness level, avatar (max 5MB jpeg/png/webp).\n- **Immutable:** date of birth, gender (man, woman, diverse, prefer not to say).\n- **Training frequency** stored for personalization.\n- **Avatar:** 128Ã—128 preview, placeholder if absent.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 9, "token_count": 235, "hash_short": "b643b574", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_010", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "ng/webp).\n- **Immutable:** date of birth, gender (man, woman, diverse, prefer not to say).\n- **Training frequency** stored for personalization.\n- **Avatar:** 128Ã—128 preview, placeholder if absent.\n\n#### FR-3 Exercise Library\n\n- Create, edit, archive exercises with attributes (name, category: cardio/strength/power-endurance, muscle group, tags).\n- **Default visibility:** private; public exercises discoverable.\n- Safe delete = archive (hidden from selectors, retained for history).\n- **Reuse across sessions:** snapshot of name retained in session_exercises for historical accuracy.\n\n#### FR-4 Sessions\n\n- **Plan sessions** for specific date/time or recurring template (time-zone aware, DST safe).\n- **Log actuals**; mark completed/canceled; compare planned vs actual.\n- **Clone & modify** own or public sessions (attribution retained).\n- **Visibility:** private (default) or public; switching never leaks past data.\n- **Archival:** sessions archived, not deleted, for historical traceability.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 10, "token_count": 249, "hash_short": "f2fe7c3b", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_011", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "r public sessions (attribution retained).\n- **Visibility:** private (default) or public; switching never leaks past data.\n- **Archival:** sessions archived, not deleted, for historical traceability.\n\n#### FR-5 Progress & Analytics\n\n- **History view** with filters (date, category, visibility).\n- **Charts**: volume, duration, distance, intensity, frequency.\n- **Summaries**: weekly, monthly, yearly.\n- **Personal bests & streaks** tracked.\n\n#### FR-6 Points System\n\n- Awarded server-side upon session completion.\n- Formula inputs: calories (if available), age, gender, fitness level, frequency, RPE.\n- **AC:** Users see awarded points only, not formula.\n- Anti-gaming: bounds checking, device/IP heuristics; manual admin adjustments logged.\n\n#### FR-7 Sharing & Community\n\n- Authenticated feed of public sessions with search/sort.\n- Clone public sessions into planner (attribution preserved).\n- Reporting & moderation placeholders (future admin UI).", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 11, "token_count": 237, "hash_short": "b8010549", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_012", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "7 Sharing & Community\n\n- Authenticated feed of public sessions with search/sort.\n- Clone public sessions into planner (attribution preserved).\n- Reporting & moderation placeholders (future admin UI).\n- **Policy:** default privacy is private; community guidelines apply.\n\n#### FR-8 Internationalization (i18n)\n\n- **Language Detection**: The system shall detect the user's preferred language via browser headers or stored profile preference.\n- **Static UI Translation**: All visible system UI elements shall be translated using predefined token dictionaries (JSON resources).\n- **Fallback**: If a translation for a token or text is unavailable, the system shall display the original English text.\n- **Locale Formatting**: Dates, numbers, and units shall follow the selected locale conventions.\n- **User Preference Persistence**: The user's preferred language shall be stored in their profile and applied on login.\n\n---\n\n## 5.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 12, "token_count": 230, "hash_short": "1fb73fe4", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_013", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "s, numbers, and units shall follow the selected locale conventions.\n- **User Preference Persistence**: The user's preferred language shall be stored in their profile and applied on login.\n\n---\n\n## 5. Non-Functional Requirements (NFR)\n\n### 5.1 Security\n\n**Authentication & Tokens**\n\n- Passwords hashed with **bcryptjs** + per-user salts.\n- JWT (**RS256**) short-lived access tokens (≤15 min).\n- Server-stored **refresh tokens** with rotation (`jti`) and revocation on logout.\n\n**Account Protection**\n\n- **2FA** (TOTP + backup codes).\n- Brute-force protection with exponential backoff;\n- (Optional) **CAPTCHA** after repeated failures.\n- Email verification mandatory;\n- **unverified accounts purged after 7 days**.\n\n**Transport & Session Security**\n\n- **HTTPS only**; **TLS 1.3** with **OCSP stapling**;\n- **HSTS** enabled at NGINX.\n- `httpOnly`, `Secure`, `SameSite=Lax` cookies;\n- **CSRF** protection for all state-changing requests.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 13, "token_count": 233, "hash_short": "43563092", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_014", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "Security**\n\n- **HTTPS only**; **TLS 1.3** with **OCSP stapling**;\n- **HSTS** enabled at NGINX.\n- `httpOnly`, `Secure`, `SameSite=Lax` cookies;\n- **CSRF** protection for all state-changing requests.\n\n**Security Headers**\n\n- **Content-Security-Policy**: disallow `unsafe-inline`; restrict `script-src`, `img-src`, `connect-src` to allowlists.\n- **Referrer-Policy: no-referrer**; **Permissions-Policy** hardened (camera/mic/geolocation denied by default).\n\n**Secrets Management**\n\n- Centralized secrets via **AWS Secrets Manager** or **HashiCorp Vault** with automated rotation and access audit trails.\n\n**Rate Limiting / DoS**\n\n- Application-level rate limits **and** reverse-proxy-level throttling via **NGINX**;\n- **fail2ban** on suspicious IPs.\n\n**File Upload Security**\n\n- Mandatory **antivirus scanning** (e.g., ClamAV) for uploads;\n- MIME/type & size validation; server-side image re-encoding.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 14, "token_count": 224, "hash_short": "2e0f6d47", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_015", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "a **NGINX**;\n- **fail2ban** on suspicious IPs.\n\n**File Upload Security**\n\n- Mandatory **antivirus scanning** (e.g., ClamAV) for uploads;\n- MIME/type & size validation; server-side image re-encoding.\n\n**Audit & Anomaly Detection**\n\n- **Security audit logging** for logins, 2FA events, password changes, deletions, admin actions.\n- Automated **anomaly detection** (improbable IP/device changes) with user notifications and session hardening.\n\n**Dependency & Supply-Chain Hygiene**\n\n- CI includes **SCA** (npm audit, **Snyk**) and **secret scanning**;\n- Vulnerable builds are blocked.\n\n**Password Reset Flow**\n\n- One-time reset tokens (≤ 15 min), **invalidated on first use**;\n- Device fingerprint captured for risk signals.\n- Successful resets **revoke all active sessions** and require re-login.\n\n### 5.2 Privacy & GDPR\n\n**Processing Register & Data Map**\n\n- Maintain an Article 30 processing register;\n- Document systems, processors, and data flows.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 15, "token_count": 237, "hash_short": "cb82dc67", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_016", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "all active sessions** and require re-login.\n\n### 5.2 Privacy & GDPR\n\n**Processing Register & Data Map**\n\n- Maintain an Article 30 processing register;\n- Document systems, processors, and data flows.\n\n**Data Minimization & Pseudonymization**\n\n- Separate PII from activity data;\n- Minimize fields in logs/analytics;\n- Prefer pseudonymous identifiers.\n\n**Backups & Retention**\n\n- Encrypted backups;\n- **Deletion propagates within 14 days** (configurable).\n\n**Consent Management**\n\n- Cookie/consent manager in the frontend;\n- Analytics and non-essential tracking only after **opt-in**.\n\n**DSR Automation**\n\n- Export (JSON) and deletion flows tracked end-to-end; issue deletion receipts in the audit log.\n\n### 5.3 Performance\n\nThe system shall be designed to **sustain predictable performance under growth** through measurable KPIs, CI-enforced budgets, and architectural constraints.\nSee also §11.3.6 _Performance Governance_ for regression policy and enforcement.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 16, "token_count": 240, "hash_short": "f2ac515d", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_017", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "n predictable performance under growth** through measurable KPIs, CI-enforced budgets, and architectural constraints.\nSee also §11.3.6 _Performance Governance_ for regression policy and enforcement.\n\n#### 5.3.1 General Targets\n\n| Metric                                 | Target (Nominal Load)                       | Definition / Notes                                    |\n| -------------------------------------- | ------------------------------------------- | ----------------------------------------------------- |\n| **Backend API latency (p95)**          | < **300 ms** overall                        | Measured at API gateway under 500 concurrent requests |\n| **Frontend LCP**                       | < **2.5 s**                                 | Mid-tier device, 4G connection                        |\n| **Frontend CLS**                       | < **0.1**                                   | Layout stability across devices                       |\n| **Frontend TTI (Time-to-Interactive)** | < **3.0 s**                                 | Lazy loading required for all routes                  |\n| **Error rate**                         | < **0.1 %** sustained                       | Calculated per release window                         |\n| **Throughput**                         | ≥ **500 req/s sustained**, 1000 req/s burst | Validated in automated k6 tests                       |\n| **Cold-start container boot**          | ≤ **5 s**                                   | Measured from container start leads to `/health` OK   |\n\nPerformance regressions **> 10 % from baseline block release** until mitigated", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 17, "token_count": 403, "hash_short": "2b48aedb", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_018", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "boot**          | ≤ **5 s**                                   | Measured from container start leads to `/health` OK   |\n\nPerformance regressions **> 10 % from baseline block release** until mitigated.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 18, "token_count": 50, "hash_short": "5f70167f", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_019", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "ot**          | ≤ **5 s**                                   | Measured from container start leads to `/health` OK   |\n\nPerformance regressions **> 10 % from baseline block release** until mitigated.\n\n---\n\n#### 5.3.2 Per-Endpoint Budgets\n\n| Endpoint Group                  | Target p95 | Expected Payload        | Notes                         |\n| ------------------------------- | ---------- | ----------------------- | ----------------------------- |\n| **Auth / Users**                | ≤ 200 ms   | < 10 KB                 | Short transactions only       |\n| **Exercises / Sessions (CRUD)** | ≤ 300 ms   | < 100 KB                | Cached lookups preferred      |\n| **Progress / Analytics**        | ≤ 600 ms   | up to 250 KB            | Served via materialized views |\n| **Feed / Public endpoints**     | ≤ 400 ms   | paginated 20 items/page | Edge-cached 30 s via NGINX    |\n\n---\n\n#### 5.3.3 Frontend Budgets\n\n| Component                | Target                            | Validation                       |\n| ------------------------ | --------------------------------- | -------------------------------- |\n| **Total JS bundle**      | ≤ 300 KB gz                       | Lighthouse CI budget             |\n| **API calls / page**     | ≤ 5                               | UX validation                    |\n| **Static asset caching** | `immutable, max-age=31536000`     | Enforced in NGINX                |\n| **Critical CSS**         | inlined for initial route         | Build config                     |\n| **Lazy loading**         | Mandatory for non-critical routes | React lazy + Vite code-splitting |\n\n---", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 19, "token_count": 404, "hash_short": "674f517a", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_020", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "ritical CSS**         | inlined for initial route         | Build config                     |\n| **Lazy loading**         | Mandatory for non-critical routes | React lazy + Vite code-splitting |\n\n---\n\n\n#### 5.3.4 Backend Constraints\n\n- **Response size limit:** 1 MB max; larger payloads must paginate or stream.\n- **Pagination:** default = 20 items, max = 100.\n- **Compression:** Gzip/Brotli only for responses > 1 KB.\n- **Timeouts:** Request timeout = 10 s; circuit breaker opens after 3 consecutive failures.\n- **Caching:**\n  - Read-through cache for heavy queries (feed, progress).\n  - Redis TTL = 60 s (default) with explicit invalidation on data changes.\n\n---\n\n#### 5.3.5 Database Performance\n\n- **Connection pooling:** via PgBouncer; p95 wait time < 5 ms.\n- **Partitioning:** monthly partitions for high-volume tables (`sessions`, `user_points`).\n- **Query optimization:**\n  - `pg_stat_statements` and `auto_explain` enabled.\n  - Slow-query threshold = 200 ms; alerts in Grafana.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 20, "token_count": 246, "hash_short": "e66d86a4", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_021", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "hly partitions for high-volume tables (`sessions`, `user_points`).\n- **Query optimization:**\n  - `pg_stat_statements` and `auto_explain` enabled.\n  - Slow-query threshold = 200 ms; alerts in Grafana.\n- **Materialized view refresh:** asynchronous, non-blocking (`REFRESH CONCURRENTLY`) on `session.completed` or nightly.\n\n---\n\n#### 5.3.6 Testing & Validation\n\n- Load tests (k6 / Artillery) executed in CI.\n- Baseline dataset ≥ 10 000 sessions for realistic query cost.\n- Lighthouse CI runs per PR for LCP / bundle budgets.\n- Regression threshold: > 10 % deviation → pipeline fail.\n\nPerformance KPIs account for secure transport (TLS 1.3) and rate limiting overhead (~5 % latency buffer).\n\n---\n\n### 5.4 Availability\n\n- Service Level Objective (SLO): **99.5% monthly availability**.\n- API p95 budgets per endpoint family defined; alerting derived from these SLOs (thresholds in runbooks)\n- Error budget tracked to inform release management and reliability improvements.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 21, "token_count": 241, "hash_short": "ca380cc5", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_022", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "ilability**.\n- API p95 budgets per endpoint family defined; alerting derived from these SLOs (thresholds in runbooks)\n- Error budget tracked to inform release management and reliability improvements.\n- Stateless API and containerized infra support horizontal scaling.\n\n### 5.5 Accessibility\n\n- Conforms to **WCAG 2.1 AA**.\n- Keyboard navigation, ARIA labels, and color-blind safe palettes.\n- Responsive, barrier-free design across devices.\n\n### 5.6 Observability\n\n- Structured, non-PII logs with correlation IDs.\n- Dashboards for latency (p95), error rate, and auth failures.\n- Alerts for 5xx spikes, DB pool saturation, and security anomalies.\n\nSee §6.10 for detailed metric definitions and alert thresholds.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 22, "token_count": 177, "hash_short": "d6a333fa", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_023", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": ".\n- Dashboards for latency (p95), error rate, and auth failures.\n- Alerts for 5xx spikes, DB pool saturation, and security anomalies.\n\nSee §6.10 for detailed metric definitions and alert thresholds.\n\n#### 5.6.1 Additions for Performance Monitoring\n\n- **Metrics coverage:**\n  - `http_request_duration_ms` histogram per route\n  - `db_query_duration_ms` histogram\n  - `frontend_lcp_ms` gauge via RUM SDK\n- **Alert thresholds:**\n  - p95 latency > 400 ms for 10 min → warning\n  - error rate > 0.5 % for 5 min → critical\n- **Tracing sampling:**\n  - 10 % of normal traffic, 100 % of 5xx responses.\n- **Dashboards:** show API latency, DB wait, frontend LCP/FID, cache hit ratio.\n- **Correlation:** FE → BE request IDs for tracing full transaction time.\n\n### 5.7 Backup & Disaster Recovery (DR)\n\n- **Retention:** deletion propagation window **14 days** (configurable).\n- **DR Tests:** include **regional failover simulation**.\n- Daily encrypted backups of all critical data.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 23, "token_count": 241, "hash_short": "7e3f90ba", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_024", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "aster Recovery (DR)\n\n- **Retention:** deletion propagation window **14 days** (configurable).\n- **DR Tests:** include **regional failover simulation**.\n- Daily encrypted backups of all critical data.\n- **Recovery Point Objective (RPO): ≤24h**.\n- **Recovery Time Objective (RTO): ≤4h**.\n- Quarterly restore tests ensure backup integrity.\n\n### 5.8 Modularity & Extensibility\n\n- Strict separation of concerns (frontend, backend, infra).\n- API-first design with versioning (`/api/v1`).\n- Extensible architecture to support nutrition, wearables, AI coaching, and leaderboards.\n\n### 5.9 Security Threat Model\n\nThe system shall follow a structured threat-mitigation model aligned with OWASP Top 10 (2021).\nEach vector is mitigated through preventive and detective controls at application, infrastructure, and process level.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 24, "token_count": 204, "hash_short": "12a59eb4", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_025", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "ll follow a structured threat-mitigation model aligned with OWASP Top 10 (2021).\nEach vector is mitigated through preventive and detective controls at application, infrastructure, and process level.\n\n| ID  | Threat / Attack Vector            | Risk Description                                                                  | Mitigation                                                                                                                       | OWASP Top 10 Ref                                               |\n| --- | --------------------------------- | --------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |\n| R1  | Brute-force login attempts        | Automated password guessing against login endpoint.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 25, "token_count": 235, "hash_short": "6477163c", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_026", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "------ | -------------------------------------------------------------- |\n| R1  | Brute-force login attempts        | Automated password guessing against login endpoint.                               | - **Rate limiting** per IP & account.<br>- Optional CAPTCHA after repeated failures.<br>- Strong password policy.                | A07: Identification & Authentication Failures                  |\n| R2  | Password theft / hash cracking    | Stolen DB dump used to brute-force weak hashes offline.                           | - **bcryptjs** with per-user salt.<br>- Enforce password complexity.<br>- Credential rotation policy.                            | A02: Cryptographic Failures                                    |\n| R3  | Token theft (XSS / localStorage)  | Stolen JWT access/refresh tokens misused for API access.                          | - Store tokens in **httpOnly Secure cookies**.<br>- Short-lived access tokens (≤15 min).<br>- Refresh token rotation with `jti`.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 26, "token_count": 244, "hash_short": "958621f8", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_027", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "cess/refresh tokens misused for API access.                          | - Store tokens in **httpOnly Secure cookies**.<br>- Short-lived access tokens (≤15 min).<br>- Refresh token rotation with `jti`. | A07: Identification & Authentication Failures / A03: Injection |\n| R4  | Refresh token replay              | Attacker reuses stolen refresh token to obtain new access tokens.                 | - **Refresh token rotation** (rotate on every use).<br>- Server-stored tokens with `jti`.<br>- Revoke on anomaly/logout.         | A07: Identification & Authentication Failures                  |\n| R5  | Cross-Site Request Forgery (CSRF) | Unauthorized state-changing requests executed via victim's authenticated session. | - **SameSite=Lax cookies**.<br>- CSRF protection middleware.<br>- Validate `Origin`/`Referer` headers.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 27, "token_count": 205, "hash_short": "04e1d1a9", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_028", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "state-changing requests executed via victim's authenticated session. | - **SameSite=Lax cookies**.<br>- CSRF protection middleware.<br>- Validate `Origin`/`Referer` headers.                           | A05: Security Misconfiguration / A08: CSRF                     |\n| R6  | Cross-Site Scripting (XSS)        | Injected JS steals cookies or manipulates DOM.                                    | - **httpOnly cookies**.<br>- **CSP headers**.<br>- React DOM sanitization.<br>- Input validation.                                | A03: Injection                                                 |\n| R7  | Session fixation                  | Attacker forces victim to use a known session token.                              | - **Refresh tokens rotated** at login.<br>- Invalidate sessions on password change or logout.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 28, "token_count": 203, "hash_short": "affa460c", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_029", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "es victim to use a known session token.                              | - **Refresh tokens rotated** at login.<br>- Invalidate sessions on password change or logout.                                    | A07: Identification & Authentication Failures                  |\n| R8  | Man-in-the-Middle (MITM)          | Network interception of credentials or tokens.                                    | - **HTTPS only** via NGINX.<br>- TLS 1.2+ enforced.<br>- **HSTS** headers enabled.                                               | A02: Cryptographic Failures                                    |\n| R9  | Account takeover via reset        | Weak password reset exploited to gain control of accounts.                        | - **One-time reset tokens** (expire ≤15 min).<br>- Verified email links.<br>- Reset invalidates sessions.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 29, "token_count": 206, "hash_short": "fb087fd9", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_030", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "reset exploited to gain control of accounts.                        | - **One-time reset tokens** (expire ≤15 min).<br>- Verified email links.<br>- Reset invalidates sessions.                        | A07: Identification & Authentication Failures                  |\n| R10 | Privilege escalation              | Attacker bypasses or manipulates role checks.                                     | - **RBAC enforced server-side**.<br>- Minimal JWT claims.<br>- Backend validates roles, not client.                              | A01: Broken Access Control                                     |\n| R11 | Data leakage via logs             | Sensitive data (tokens, passwords, PII) written to logs.                          | - **Structured logging** (pino/winston).<br>- Exclude PII.<br>- Use correlation IDs only.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 30, "token_count": 201, "hash_short": "6f114be6", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_031", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "a (tokens, passwords, PII) written to logs.                          | - **Structured logging** (pino/winston).<br>- Exclude PII.<br>- Use correlation IDs only.                                        | A09: Security Logging & Monitoring Failures                    |\n| R12 | Denial of Service (DoS)           | Flood of requests exhausts server or DB resources.                                | - **Rate limiting**.<br>- Optional **Redis counters** (future scaling).<br>- Autoscaling (future).                               | A06: Vulnerable & Outdated Components / A08: DoS               |\n| R13 | Supply chain vulnerabilities      | Dependencies or base images compromised                                           | - **npm audit**, **Snyk**, **Trivy** in CI;<br>- signed images (sha256)                                                          | A06: Vulnerable & Outdated Components                          |\n\n---\n\n## 6.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 31, "token_count": 231, "hash_short": "9a21c608", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document_chunk_032", "doc_id": ".._.._docs_1.Product_Requirements_1.Product_Requirements_Document", "text": "audit**, **Snyk**, **Trivy** in CI;<br>- signed images (sha256)                                                          | A06: Vulnerable & Outdated Components                          |\n\n---\n\n## 6. Technology (moved)\n\nThis section has been migrated to the **Technical Design Document (TDD)**.\nSee **TDD → Platform & Stack, API Design, Security/Privacy, Observability, i18n**.", "source_file": "../../docs/1.Product_Requirements/1.Product_Requirements_Document.md", "category": "requirements", "chunk_index": 32, "token_count": 94, "hash_short": "01a8c83b", "version": 1.0, "title": "1. Vision", "mtime": "2025-10-22T23:22:55.388740", "ingested_at": "2025-11-30T04:00:41.931361", "tags": ["requirements", "md"]}
