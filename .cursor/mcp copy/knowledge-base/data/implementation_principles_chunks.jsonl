{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_000", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "# FitVibe Implementation Principles\n\n**Last Updated**: 2025-11-29\n**Purpose**: Core implementation principles and preferences derived from codebase analysis and development practices.\n\n\n## Overview\n\nThis document captures the fundamental principles that guide all implementation work in FitVibe. These principles ensure consistency, quality, and maintainability across the entire codebase.\n\n---\n\n## Core Principles\n\n### 1. **No Placeholders or Fake Data**\n\n**Principle**: Never use placeholders, mock data, or simplified implementations in production code.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 0, "token_count": 139, "hash_short": "04e9d699", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_001", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "ity across the entire codebase.\n\n---\n\n## Core Principles\n\n### 1. **No Placeholders or Fake Data**\n\n**Principle**: Never use placeholders, mock data, or simplified implementations in production code.\n\n**Rules**:\n\n- ❌ **Never** use `TODO`, `FIXME`, `placeholder`, `mock`, `fake`, `dummy`, or `stub` in production code\n- ❌ **Never** hardcode example data that should come from the database or API\n- ❌ **Never** use simplified algorithms or shortcuts that reduce functionality\n- ✅ **Always** implement full functionality, even if it takes longer\n- ✅ **Always** use real data structures and proper error handling\n- ✅ **Always** implement complete features, not partial implementations\n\n**Examples**:\n\n```typescript\n// ❌ BAD: Placeholder implementation\nfunction calculatePoints(session: Session): number {\n  // TODO: Implement real calculation\n  return 100; // placeholder\n}\n\n// ✅ GOOD: Full implementation\nfunction calculatePoints(context: PointsCalculationContext): PointsCalculationResult {\n  const caloriesRaw = context.sessionCalories ?", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 1, "token_count": 258, "hash_short": "ed1f3d22", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_002", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "on\n  return 100; // placeholder\n}\n\n// ✅ GOOD: Full implementation\nfunction calculatePoints(context: PointsCalculationContext): PointsCalculationResult {\n  const caloriesRaw = context.sessionCalories ?? estimateCalories(context.distanceMeters, context.averageRpe);\n  const calories = caloriesRaw === null ? null : clamp(caloriesRaw, 0, 1800);\n  // ... complete calculation logic\n  return { points, inputs: { ... } };\n}\n```\n\n---\n\n### 2. **No Code Quality Reduction**\n\n**Principle**: Never simplify code at the expense of quality, maintainability, or correctness.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 2, "token_count": 140, "hash_short": "5af986f0", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_003", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "lculation logic\n  return { points, inputs: { ... } };\n}\n```\n\n---\n\n### 2. **No Code Quality Reduction**\n\n**Principle**: Never simplify code at the expense of quality, maintainability, or correctness.\n\n**Rules**:\n\n- ❌ **Never** remove error handling to \"simplify\" code\n- ❌ **Never** skip validation or type checking\n- ❌ **Never** use `any` types to avoid proper typing\n- ❌ **Never** remove tests to speed up development\n- ❌ **Never** skip edge case handling\n- ✅ **Always** maintain TypeScript strict mode compliance\n- ✅ **Always** include comprehensive error handling\n- ✅ **Always** write tests for new functionality\n- ✅ **Always** handle edge cases and boundary conditions\n- ✅ **Always** use proper type definitions\n\n**Examples**:\n\n```typescript\n// ❌ BAD: Simplified, missing error handling\nfunction createUser(data: any) {\n  return db(\"users\").insert(data);\n}\n\n// ✅ GOOD: Full implementation with proper types and error handling\nasync function createUser(data: CreateUserDTO, userId: string): Promise<UserRow> {\n  const validated = createUserSchema.parse(data);\n\n  try {\n    const [row] = await db(\"users\")\n      .insert({ ...validated, user_id: userId })\n      .returning(\"*\");\n\n    if (!row) {\n      throw new HttpError(500, \"E.CREATE_FAILED\", \"Failed to create user\");\n    }\n\n    return row;\n  } catch (error) {\n    if (error instanceof HttpError) throw error;\n    if (isUniqueConstraintError(error)) {\n      throw new HttpError(409, \"E.ALREADY_EXISTS\", \"User already exists\");\n    }\n    throw new HttpError(500, \"E.INTERNAL_ERROR\", \"Internal server error\");\n  }\n}\n```\n\n---", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 3, "token_count": 394, "hash_short": "d3f602a2", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_004", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "queConstraintError(error)) {\n      throw new HttpError(409, \"E.ALREADY_EXISTS\", \"User already exists\");\n    }\n    throw new HttpError(500, \"E.INTERNAL_ERROR\", \"Internal server error\");\n  }\n}\n```\n\n---\n\n\n### 3. **Global Settings Over Hardcoding**\n\n**Principle**: All configuration values, constants, and settings must be centralized and configurable.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 4, "token_count": 87, "hash_short": "358a378a", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_005", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "_ERROR\", \"Internal server error\");\n  }\n}\n```\n\n---\n\n\n### 3. **Global Settings Over Hardcoding**\n\n**Principle**: All configuration values, constants, and settings must be centralized and configurable.\n\n**Rules**:\n\n- ❌ **Never** hardcode URLs, ports, timeouts, limits, or magic numbers\n- ❌ **Never** embed configuration values directly in code\n- ❌ **Never** use magic numbers without named constants\n- ✅ **Always** use environment variables for configuration\n- ✅ **Always** centralize constants in configuration files\n- ✅ **Always** use named constants instead of magic numbers\n- ✅ **Always** validate configuration with Zod schemas\n- ✅ **Always** provide sensible defaults in configuration\n\n**Examples**:\n\n```typescript\n// ❌ BAD: Hardcoded values\nfunction sendEmail(to: string, subject: string) {\n  const smtp = {\n    host: \"smtp.gmail.com\",\n    port: 587,\n    timeout: 60000,\n  };\n  // ...", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 5, "token_count": 222, "hash_short": "1c482d3a", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_006", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "**Examples**:\n\n```typescript\n// ❌ BAD: Hardcoded values\nfunction sendEmail(to: string, subject: string) {\n  const smtp = {\n    host: \"smtp.gmail.com\",\n    port: 587,\n    timeout: 60000,\n  };\n  // ...\n}\n\n// ✅ GOOD: Configuration from env\nimport { env } from \"../config/env.js\";\n\nfunction sendEmail(to: string, subject: string) {\n  const smtp = {\n    host: env.email.smtpHost,\n    port: env.email.smtpPort,\n    timeout: env.email.smtpTimeout,\n  };\n  // ...\n}\n```\n\n**Configuration Structure**:\n\n- Backend: `apps/backend/src/config/env.ts` - All environment variables with Zod validation\n- Frontend: `apps/frontend/src/config/` - Environment-specific configuration\n- Infrastructure: `infra/kubernetes/configmap.yaml` - Kubernetes configuration\n- All values must be validated and typed\n\n---\n\n### 4. **Internationalization (i18n) for All Text**\n\n**Principle**: All user-facing text must come from i18n translation files, never hardcoded.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 6, "token_count": 232, "hash_short": "7408e0b2", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_007", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "ration\n- All values must be validated and typed\n\n---\n\n### 4. **Internationalization (i18n) for All Text**\n\n**Principle**: All user-facing text must come from i18n translation files, never hardcoded.\n\n**Rules**:\n\n- ❌ **Never** hardcode strings in components, pages, or UI elements\n- ❌ **Never** use hardcoded error messages, labels, or placeholders\n- ❌ **Never** embed text directly in JSX or HTML\n- ✅ **Always** use `useTranslation()` hook for React components\n- ✅ **Always** use translation keys from i18n files\n- ✅ **Always** include placeholders in translation files\n- ✅ **Always** provide fallback translations\n- ✅ **Always** organize translation keys by feature/page\n\n**Examples**:\n\n```typescript\n// ❌ BAD: Hardcoded text\nexport const LoginForm: React.FC = () => {\n  return (\n    <form>\n      <label>Email</label>\n      <input placeholder=\"you@example.com\" />\n      <button>Login</button>\n    </form>\n  );\n};\n\n// ✅ GOOD: i18n usage\nexport const LoginForm: React.FC = () => {\n  const { t } = useTranslation();\n\n  return (\n    <form>\n      <label>{t(\"auth.labels.email\")}</label>\n      <input placeholder={t(\"auth.placeholders.email\")} />\n      <button>{t(\"auth.buttons.login\")}</button>\n    </form>\n  );\n};\n```\n\n**Translation File Structure**:\n\n- Frontend: `apps/frontend/src/i18n/locales/{lang}/common.json`\n- Backend: `packages/i18n/src/{lang}.ts` (for shared translations)\n- Keys organized by feature: `auth.*`, `sessions.*`, `profile.*`, etc", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 7, "token_count": 362, "hash_short": "bcdd0be3", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_008", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "- Frontend: `apps/frontend/src/i18n/locales/{lang}/common.json`\n- Backend: `packages/i18n/src/{lang}.ts` (for shared translations)\n- Keys organized by feature: `auth.*`, `sessions.*`, `profile.*`, etc.\n- All placeholders, labels, buttons, errors, and messages must be translated\n\n---\n\n### 5. **Complete Error Handling**\n\n**Principle**: All operations must have comprehensive error handling with proper error types and messages.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 8, "token_count": 106, "hash_short": "dfc2cf30", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_009", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "buttons, errors, and messages must be translated\n\n---\n\n### 5. **Complete Error Handling**\n\n**Principle**: All operations must have comprehensive error handling with proper error types and messages.\n\n**Rules**:\n\n- ❌ **Never** use generic `Error` or `catch (e)` without proper handling\n- ❌ **Never** swallow errors silently\n- ❌ **Never** return `null` or `undefined` without proper error handling\n- ✅ **Always** use `HttpError` utility for API errors\n- ✅ **Always** provide specific error codes and messages\n- ✅ **Always** log errors appropriately\n- ✅ **Always** handle edge cases and boundary conditions\n- ✅ **Always** validate input before processing\n\n**Examples**:\n\n```typescript\n// ❌ BAD: Generic error handling\nasync function getUser(id: string) {\n  try {\n    return await db(\"users\").where({ id }).first();\n  } catch (error) {\n    throw error; // Generic, no context\n  }\n}\n\n// ✅ GOOD: Specific error handling\nasync function getUser(id: string): Promise<UserRow> {\n  if (!id || typeof id !== \"string\") {\n    throw new HttpError(400, \"E.INVALID_INPUT\", \"User ID is required\");\n  }\n\n  try {\n    const user = await db(\"users\").where({ id }).first();\n\n    if (!user) {\n      throw new HttpError(404, \"E.NOT_FOUND\", \"User not found\");\n    }\n\n    return user;\n  } catch (error) {\n    if (error instanceof HttpError) throw error;\n    logger.error(\"Failed to get user\", { userId: id, error });\n    throw new HttpError(500, \"E.INTERNAL_ERROR\", \"Failed to retrieve user\");\n  }\n}\n```\n\n---", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 9, "token_count": 370, "hash_short": "3f94d36e", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_010", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "if (error instanceof HttpError) throw error;\n    logger.error(\"Failed to get user\", { userId: id, error });\n    throw new HttpError(500, \"E.INTERNAL_ERROR\", \"Failed to retrieve user\");\n  }\n}\n```\n\n---\n\n\n### 6. **Type Safety and Strict TypeScript**\n\n**Principle**: Maintain strict TypeScript compliance with no `any` types in public surfaces.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 10, "token_count": 85, "hash_short": "5b0391d9", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_011", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "TERNAL_ERROR\", \"Failed to retrieve user\");\n  }\n}\n```\n\n---\n\n\n### 6. **Type Safety and Strict TypeScript**\n\n**Principle**: Maintain strict TypeScript compliance with no `any` types in public surfaces.\n\n**Rules**:\n\n- ❌ **Never** use `any` types in production code\n- ❌ **Never** disable TypeScript strict mode\n- ❌ **Never** use type assertions without validation\n- ❌ **Never** skip type definitions for public APIs\n- ✅ **Always** use strict TypeScript mode\n- ✅ **Always** define proper types and interfaces\n- ✅ **Always** use `import type` for type-only imports\n- ✅ **Always** validate types at runtime with Zod when needed\n- ✅ **Always** use proper type inference where possible\n\n**Examples**:\n\n```typescript\n// ❌ BAD: Using any\nfunction processData(data: any): any {\n  return data.value * 2;\n}\n\n// ✅ GOOD: Proper types\ninterface ProcessDataInput {\n  value: number;\n}\n\ninterface ProcessDataOutput {\n  result: number;\n}\n\nfunction processData(data: ProcessDataInput): ProcessDataOutput {\n  return { result: data.value * 2 };\n}\n```\n\n---", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 11, "token_count": 257, "hash_short": "1aec5b6a", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_012", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "essDataInput {\n  value: number;\n}\n\ninterface ProcessDataOutput {\n  result: number;\n}\n\nfunction processData(data: ProcessDataInput): ProcessDataOutput {\n  return { result: data.value * 2 };\n}\n```\n\n---\n\n\n### 7. **Comprehensive Testing**\n\n**Principle**: All new functionality must have corresponding tests with adequate coverage.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 12, "token_count": 81, "hash_short": "cb92b9a3", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_013", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "t): ProcessDataOutput {\n  return { result: data.value * 2 };\n}\n```\n\n---\n\n\n### 7. **Comprehensive Testing**\n\n**Principle**: All new functionality must have corresponding tests with adequate coverage.\n\n**Rules**:\n\n- ❌ **Never** skip tests to speed up development\n- ❌ **Never** write tests that don't actually test functionality\n- ❌ **Never** use flaky or non-deterministic tests\n- ✅ **Always** write unit tests for business logic\n- ✅ **Always** write integration tests for API endpoints\n- ✅ **Always** use deterministic test data (fake clocks, seeded PRNG)\n- ✅ **Always** test happy paths, error cases, and edge cases\n- ✅ **Always** maintain ≥80% coverage repo-wide, ≥90% for critical paths\n\n**Examples**:\n\n```typescript\n// ✅ GOOD: Comprehensive test\ndescribe(\"createUser\", () => {\n  it(\"should create user with valid data\", async () => {\n    const userData = { name: \"Test User\", email: \"test@example.com\" };\n    const result = await createUser(userData, \"user-123\");\n\n    expect(result).toMatchObject({\n      name: \"Test User\",\n      email: \"test@example.com\",\n    });\n  });\n\n  it(\"should throw HttpError for duplicate email\", async () => {\n    const userData = { name: \"Test\", email: \"existing@example.com\" };\n\n    await expect(createUser(userData, \"user-123\")).rejects.toThrow(\n      expect.objectContaining({\n        statusCode: 409,\n        code: \"E.ALREADY_EXISTS\",\n      }),\n    );\n  });\n\n  it(\"should validate required fields\", async () => {\n    await expect(createUser({}, \"user-123\")).rejects.toThrow(HttpError);\n  });\n});\n```\n\n---", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 13, "token_count": 385, "hash_short": "e3302a33", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_014", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "code: \"E.ALREADY_EXISTS\",\n      }),\n    );\n  });\n\n  it(\"should validate required fields\", async () => {\n    await expect(createUser({}, \"user-123\")).rejects.toThrow(HttpError);\n  });\n});\n```\n\n---\n\n\n### 8. **Proper Architecture and Separation of Concerns**\n\n**Principle**: Maintain clear separation between layers and follow established patterns.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 14, "token_count": 86, "hash_short": "be997a54", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_015", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": ").rejects.toThrow(HttpError);\n  });\n});\n```\n\n---\n\n\n### 8. **Proper Architecture and Separation of Concerns**\n\n**Principle**: Maintain clear separation between layers and follow established patterns.\n\n**Rules**:\n\n- ❌ **Never** mix business logic with route handlers\n- ❌ **Never** put database queries directly in controllers\n- ❌ **Never** skip the service layer for \"simple\" operations\n- ✅ **Always** follow the Controller → Service → Repository pattern\n- ✅ **Always** keep controllers thin (validation and response formatting)\n- ✅ **Always** put business logic in services\n- ✅ **Always** put data access in repositories\n- ✅ **Always** use proper dependency injection\n\n**Examples**:\n\n```typescript\n// ✅ GOOD: Proper separation\n// Controller (thin)\nexport async function createUserHandler(req: Request, res: Response): Promise<void> {\n  const validated = createUserSchema.parse(req.body);\n  const result = await createUser(validated, req.user!.sub);\n  res.status(201).json(result);\n}\n\n// Service (business logic)\nexport async function createUser(data: CreateUserDTO, userId: string): Promise<UserRow> {\n  // Business logic validation\n  if (await emailExists(data.email)) {\n    throw new HttpError(409, \"E.ALREADY_EXISTS\", \"Email already registered\");\n  }\n\n  return await userRepository.create({ ...data, created_by: userId });\n}\n\n// Repository (data access)\nexport async function create(input: CreateUserInput): Promise<UserRow> {\n  const [row] = await db(\"users\").insert(input).returning(\"*\");\n  return row;\n}\n```\n\n---", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 15, "token_count": 379, "hash_short": "12a53d3a", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_016", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "Id });\n}\n\n// Repository (data access)\nexport async function create(input: CreateUserInput): Promise<UserRow> {\n  const [row] = await db(\"users\").insert(input).returning(\"*\");\n  return row;\n}\n```\n\n---\n\n\n### 9. **Security and Privacy First**\n\n**Principle**: Security and privacy considerations are built into every feature, not added later.\n\n**Rules**:\n\n- ❌ **Never** skip input validation\n- ❌ **Never** expose sensitive data in logs or responses\n- ❌ **Never** use weak authentication or authorization\n- ❌ **Never** skip rate limiting on public endpoints\n- ✅ **Always** validate all input with Zod schemas\n- ✅ **Always** use parameterized queries (automatic with Knex)\n- ✅ **Always** implement proper authentication and authorization\n- ✅ **Always** follow privacy-by-default principles\n- ✅ **Always** use secure defaults (HTTPS, secure cookies, etc.)\n\n---\n\n### 10. **Accessibility by Default**\n\n**Principle**: All UI components must be accessible by default, not as an afterthought.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 16, "token_count": 245, "hash_short": "c14938fb", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_017", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "s\n- ✅ **Always** use secure defaults (HTTPS, secure cookies, etc.)\n\n---\n\n### 10. **Accessibility by Default**\n\n**Principle**: All UI components must be accessible by default, not as an afterthought.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 17, "token_count": 49, "hash_short": "ef255530", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_018", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "**Rules**:\n\n- ❌ **Never** skip ARIA labels\n- ❌ **Never** use color alone to convey information\n- ❌ **Never** create keyboard traps\n- ❌ **Never** skip focus management\n- ✅ **Always** provide ARIA labels and roles\n- ✅ **Always** ensure keyboard navigation\n- ✅ **Always** maintain WCAG 2.1 AA compliance\n- ✅ **Always** test with screen readers\n- ✅ **Always** provide text alternatives for visual information\n\n---\n\n## Implementation Checklist\n\nWhen implementing any feature, ensure:\n\n- [ ] No placeholders or fake data\n- [ ] Full functionality implemented (no shortcuts)\n- [ ] All configuration values come from environment/config\n- [ ] All user-facing text uses i18n\n- [ ] Comprehensive error handling with specific error types\n- [ ] Strict TypeScript compliance (no `any` types)\n- [ ] Tests written for new functionality\n- [ ] Proper architecture (Controller → Service → Repository)\n- [ ] Security considerations addressed\n- [ ] Accessibility requirements met\n- [ ] Documentation updated if needed\n\n---", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 18, "token_count": 250, "hash_short": "fc1aa540", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_019", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "new functionality\n- [ ] Proper architecture (Controller → Service → Repository)\n- [ ] Security considerations addressed\n- [ ] Accessibility requirements met\n- [ ] Documentation updated if needed\n\n---\n\n\n## Examples of What NOT to Do\n\n### ❌ Bad Examples\n\n```typescript\n// 1. Placeholder implementation\nfunction calculatePoints(session: Session): number {\n  // TODO: Implement later\n  return 100;\n}\n\n// 2. Hardcoded values\nconst API_URL = \"https://api.example.com\";\nconst TIMEOUT = 5000;\n\n// 3. Hardcoded text\n<button>Submit</button>\n<input placeholder=\"Enter email\" />\n\n// 4. Simplified error handling\ntry {\n  await doSomething();\n} catch (e) {\n  console.log(e);\n}\n\n// 5. Any types\nfunction process(data: any): any {\n  return data.value;\n}\n\n// 6. Skipping service layer\nexport async function createUserHandler(req: Request, res: Response) {\n  const user = await db(\"users\").insert(req.body).returning(\"*\");\n  res.json(user);\n}\n```\n\n### ✅ Good Examples\n\n```typescript\n// 1.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 19, "token_count": 242, "hash_short": "20c8b8c9", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_020", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "ort async function createUserHandler(req: Request, res: Response) {\n  const user = await db(\"users\").insert(req.body).returning(\"*\");\n  res.json(user);\n}\n```\n\n### ✅ Good Examples\n\n```typescript\n// 1. Full implementation\nfunction calculatePoints(context: PointsCalculationContext): PointsCalculationResult {\n  // Complete calculation logic with all factors\n  // ...\n}\n\n// 2. Configuration-based\nimport { env } from \"../config/env.js\";\nconst API_URL = env.appBaseUrl;\nconst TIMEOUT = env.requestTimeout;\n\n// 3. i18n usage\nconst { t } = useTranslation();\n<button>{t(\"actions.submit\")}</button>\n<input placeholder={t(\"forms.emailPlaceholder\")} />\n\n// 4. Proper error handling\ntry {\n  await doSomething();\n} catch (error) {\n  if (error instanceof HttpError) throw error;\n  logger.error(\"Operation failed\", { error });\n  throw new HttpError(500, \"E.OPERATION_FAILED\", \"Operation failed\");\n}\n\n// 5.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 20, "token_count": 222, "hash_short": "322081a2", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_021", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "thing();\n} catch (error) {\n  if (error instanceof HttpError) throw error;\n  logger.error(\"Operation failed\", { error });\n  throw new HttpError(500, \"E.OPERATION_FAILED\", \"Operation failed\");\n}\n\n// 5. Proper types\ninterface ProcessDataInput {\n  value: number;\n}\nfunction process(data: ProcessDataInput): ProcessDataOutput {\n  return { result: data.value * 2 };\n}\n\n// 6.", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 21, "token_count": 92, "hash_short": "ed62cd2b", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
{"chunk_id": ".._.._docs_6.Implementation_implementation_principles_chunk_022", "doc_id": ".._.._docs_6.Implementation_implementation_principles", "text": "\"Operation failed\");\n}\n\n// 5. Proper types\ninterface ProcessDataInput {\n  value: number;\n}\nfunction process(data: ProcessDataInput): ProcessDataOutput {\n  return { result: data.value * 2 };\n}\n\n// 6. Proper architecture\nexport async function createUserHandler(req: Request, res: Response) {\n  const validated = createUserSchema.parse(req.body);\n  const result = await createUser(validated, req.user!.sub);\n  res.status(201).json(result);\n}\n```\n\n---\n\n## References\n\n- **.cursorrules**: Main coding standards and patterns\n- **CODING_STYLE_GUIDE.md**: Detailed coding style guidelines\n- **ADR-011**: Internationalization approach\n- **env.ts**: Configuration structure and validation\n\n---\n\n## Maintenance\n\nThis document should be updated when:\n\n- New implementation principles are identified\n- Patterns change based on team feedback\n- New tools or practices are adopted\n- Issues are discovered that require new principles\n\n**Last Review**: 2025-11-29", "source_file": "../../docs/6.Implementation/implementation_principles.md", "category": "implementation", "chunk_index": 22, "token_count": 236, "hash_short": "4d049d33", "version": 1.0, "title": "FitVibe Implementation Principles", "mtime": "2025-11-30T04:58:39.622663", "ingested_at": "2025-11-30T04:00:43.928460", "tags": ["implementation", "md"]}
