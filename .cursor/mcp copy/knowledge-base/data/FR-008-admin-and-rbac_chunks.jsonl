{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac_chunk_000", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac", "text": "# FR-008 — Admin & RBAC\n\n---\n\n**Requirement ID**: FR-008  \n**Type**: Functional Requirement  \n**Title**: Admin & RBAC  \n**Status**: Done  \n**Priority**: High  \n**Gate**: GOLD  \n**Owner**: ENG/QA  \n**Created**: 2025-11-21  \n**Updated**: 2025-01-21\n\n---\n\n\n## Executive Summary\n\nThis functional requirement specifies admin & rbac capabilities that the system must provide.\n\nEnable administrative control and role-based access control for platform management.\n\n## Business Context\n\n- **Business Objective**: Enable administrative control and role-based access control for platform management.\n- **Success Criteria**: Admins can manage users and content with proper authorization and audit logging.", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-008-admin-and-rbac.md", "category": "requirements", "chunk_index": 0, "token_count": 173, "hash_short": "3e31250c", "version": 1.0, "title": "FR-008 — Admin & RBAC", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.191122", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac_chunk_001", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac", "text": "ective**: Enable administrative control and role-based access control for platform management.\n- **Success Criteria**: Admins can manage users and content with proper authorization and audit logging.", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-008-admin-and-rbac.md", "category": "requirements", "chunk_index": 1, "token_count": 49, "hash_short": "8435ee8f", "version": 1.0, "title": "FR-008 — Admin & RBAC", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.191122", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac_chunk_002", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac", "text": "- **Target Users**: Administrators and coaches\n\n## Traceability\n\n- **PRD Reference**: PRD §Admin\n- **TDD Reference**: TDD §RBAC\n\n## Functional Requirements\n\n### Role-Based Access Control\n\nThe system shall provide RBAC with the following capabilities:\n\n- **Roles**: Support `user`, `coach`, and `admin` roles\n- **Route Guards**: Route guards deny access appropriately with 403 Forbidden\n- **JWT Claims**: RBAC claims come from JWT `roles[]` array\n- **Middleware Enforcement**: Middleware rejects tokens missing required role\n- **No Information Leakage**: Error messages do not leak role information\n\n### Admin Actions\n\n- **2-Step Confirmation**: Admin actions (adjust points, edit user, delete session) require 2-step confirmation\n- **Audit Logging**: All admin actions are fully audit-logged\n- **User Management**: Admins can view and edit user profiles\n- **Content Moderation**: Admins can moderate and delete inappropriate content\n\n### Security\n\n- **Authorization Checks**: All admin endpoints enforce role=admin\n- **No IDOR**: No Insecure Direct Object Reference vulnerabilities\n- **Audit Trail**: Complete audit trail for all admin actions", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-008-admin-and-rbac.md", "category": "requirements", "chunk_index": 2, "token_count": 285, "hash_short": "20fa2318", "version": 1.0, "title": "FR-008 — Admin & RBAC", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.191122", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac_chunk_003", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac", "text": "ty\n\n- **Authorization Checks**: All admin endpoints enforce role=admin\n- **No IDOR**: No Insecure Direct Object Reference vulnerabilities\n- **Audit Trail**: Complete audit trail for all admin actions\n\n\n## Related Epics\n\n- [E16: Admin & RBAC](../b.Epics/E16-admin-and-rbac.md)\n\n## Dependencies\n\n### Technical Dependencies\n\n- JWT token system\n- Middleware system\n- Audit logging system\n\n### Feature Dependencies\n\n- [FR-001: User Registration](./FR-001-user-registration.md) - User accounts\n- [FR-002: Login & Session](./FR-002-login-and-session.md) - Authentication\n- [NFR-001: Security](./NFR-001-security.md) - Security requirements\n\n## Constraints\n\n### Technical Constraints\n\n- Role checks must be fast (<10ms)\n- Audit logging must not impact performance\n- 2-step confirmation required for destructive actions\n\n### Business Constraints\n\n- Admin actions must be transparent\n- Role assignments must be secure\n\n## Assumptions\n\n- Administrators are trusted users\n- Role assignments are managed securely\n- Audit logs are reviewed regularly", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-008-admin-and-rbac.md", "category": "requirements", "chunk_index": 3, "token_count": 258, "hash_short": "c00d5907", "version": 1.0, "title": "FR-008 — Admin & RBAC", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.191122", "tags": ["requirements", "md"]}
{"chunk_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac_chunk_004", "doc_id": ".._.._docs_1.Product_Requirements_a.Requirements_FR-008-admin-and-rbac", "text": "- Admin actions must be transparent\n- Role assignments must be secure\n\n## Assumptions\n\n- Administrators are trusted users\n- Role assignments are managed securely\n- Audit logs are reviewed regularly\n\n\n## Risks & Issues\n\n- **Risk**: Unauthorized access to admin functions\n- **Risk**: Admin actions may affect many users\n- **Risk**: Audit logs may grow very large\n\n## Open Questions\n\n- Should there be role hierarchies?\n- Should coaches have limited admin capabilities?\n\n## Related Requirements\n\n- [FR-001: User Registration](./FR-001-user-registration.md) - User management\n- [FR-002: Login & Session](./FR-002-login-and-session.md) - Authentication\n- [FR-006: Gamification](./FR-006-gamification.md) - Points adjustment\n- [NFR-001: Security](./NFR-001-security.md) - Security requirements\n\n---\n\n**Last Updated**: 2025-01-21  \n**Next Review**: 2025-02-21", "source_file": "../../docs/1.Product_Requirements/a.Requirements/FR-008-admin-and-rbac.md", "category": "requirements", "chunk_index": 4, "token_count": 213, "hash_short": "212489f1", "version": 1.0, "title": "FR-008 — Admin & RBAC", "mtime": "2025-11-30T03:53:28.214791", "ingested_at": "2025-11-30T04:00:44.191122", "tags": ["requirements", "md"]}
