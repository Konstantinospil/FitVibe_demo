# Backend Database
# SECURITY: Generate a secure password with: openssl rand -base64 32
# Then update the DATABASE_URL below
POSTGRES_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
DATABASE_URL=postgresql://fitvibe:REPLACE_WITH_SECURE_PASSWORD@localhost:5432/fitvibe
# Either provide inline PEM values or fallback to file paths below
# JWT_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----
# JWT_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----
JWT_PRIVATE_KEY_PATH=./infra/keys/jwt_rs256.key
JWT_PUBLIC_KEY_PATH=./infra/keys/jwt_rs256.pub

# Frontend
VITE_API_URL=http://localhost:4000

# Environment
NODE_ENV=development
PORT=4000
LOG_LEVEL=debug
ACCESS_TOKEN_TTL_SEC=900
REFRESH_TOKEN_TTL_SEC=1209600
COOKIE_DOMAIN=localhost
COOKIE_SECURE=false
ALLOWED_ORIGINS=http://localhost:4000
CSRF_ENABLED=true
CSRF_ALLOWED_ORIGINS=http://localhost:4000
GLOBAL_RATE_LIMIT_POINTS=120
GLOBAL_RATE_LIMIT_DURATION=60
METRICS_ENABLED=true
TYPES_CACHE_TTL_SEC=60
# --- IGNORE ---
ACCESS_COOKIE_NAME=fitvibe_access
REFRESH_COOKIE_NAME=fitvibe_refresh
EMAIL_VERIFICATION_TTL_MIN=1440  # 24 hours (FR-001-AC02-B)
PASSWORD_RESET_TTL_MIN=15
APP_BASE_URL=http://localhost:4000

# Feature flags (prod defaults must remain false)
FEATURE_SOCIAL_FEED=false
FEATURE_COACH_DASHBOARD=false
FEATURE_INSIGHTS=false

# Operational Safety (B-CC-9: Read-Only Mode Kill-Switch)
# Enable read-only mode to block all mutation requests (POST/PUT/PATCH/DELETE)
# Useful for maintenance windows, emergency response, or database migrations
READ_ONLY_MODE=false
MAINTENANCE_MESSAGE=System is temporarily in read-only mode for maintenance

# Antivirus Scanning (B-USR-5: AV Protection)
# ClamAV integration for malware scanning on file uploads
# IMPORTANT: Must be enabled in production!
CLAMAV_ENABLED=false
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_TIMEOUT=60000

# Email Configuration (SMTP)
# For development, you can use Gmail with an App Password
# See apps/docs/SMTP_Setup_Guide.md for detailed setup instructions
# Email Configuration (Gmail SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=fitvibe.test01@gmail.com
SMTP_PASS=qjzlacbuirqrqefc
SMTP_FROM_NAME=FitVibe
SMTP_FROM_EMAIL=fitvibe.test01@gmail.com

# Enable email features
EMAIL_ENABLED=true

# Secrets Management (I-12: Vault Integration)
# HashiCorp Vault for secure secrets storage in staging/prod
# Stores JWT keys, database credentials, and other sensitive config
# Per TDD Section 10.6 & 13.7, supports automatic rotation
VAULT_ENABLED=false
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=
VAULT_NAMESPACE=
# JWT key rotation policy (days)
JWT_KEY_ROTATION_DAYS=90

# ==============================================================================
# Redis Configuration
# ==============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
# SECURITY: Generate a secure password with: openssl rand -base64 32
REDIS_PASSWORD=REPLACE_WITH_SECURE_PASSWORD

# ==============================================================================
# Media Storage
# ==============================================================================
# Local storage root directory
MEDIA_STORAGE_ROOT=./uploads

# Storage provider (local or s3)
STORAGE_PROVIDER=local

# S3 Configuration (if STORAGE_PROVIDER=s3)
# S3_BUCKET=fitvibe-media
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your-access-key
# S3_SECRET_ACCESS_KEY=your-secret-key
# S3_ENDPOINT=https://s3.us-east-1.amazonaws.com

# ==============================================================================
# External Services (Optional)
# ==============================================================================
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# ANALYTICS_API_KEY=your-analytics-key

# ==============================================================================
# Performance & Scaling
# ==============================================================================
# Node.js cluster mode workers (auto = number of CPUs)
# WORKERS=auto

# Connection pool sizes
# PGPOOL_MIN=5
# PGPOOL_MAX=20

# ==============================================================================
# Compliance
# ==============================================================================
# GDPR data retention (in days)
# DATA_RETENTION_DAYS=730  # 24 months

# ==============================================================================
# SSL/TLS Configuration
# ==============================================================================
# Trust proxy headers (when behind NGINX/ALB)
# TRUST_PROXY=false

# ==============================================================================
# Monitoring Services (Grafana)
# ==============================================================================
# SECURITY: Generate a secure password with: openssl rand -base64 32
# Required for docker-compose to start Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
